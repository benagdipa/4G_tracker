import{R as C,W as I,j as e}from"./app-DJDtEcW-.js";import{r}from"./index-aoLFchbJ.js";import{u as O,F as S,I as z}from"./index-DZpz44Hh.js";import{c as R}from"./AuthenticatedLayout-CPFH4X6Z.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=R("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function L(i){var m;const{data:s}=i;console.log(JSON.parse(s==null?void 0:s.artifacts));const a=()=>h(!p),[p,h]=C.useState(!1),{data:o,setData:f,post:u,processing:g,reset:v}=I({site_id:s==null?void 0:s.id,location_id:s.loc_id,field_name:(m=i==null?void 0:i.colDef)==null?void 0:m.field,artifacts:[]}),{getRootProps:N,getInputProps:y}=O({onDrop:n=>{f("artifacts",[...o.artifacts,...n.map(l=>Object.assign(l,{preview:URL.createObjectURL(l)}))])}}),w=o==null?void 0:o.artifacts.map(n=>e.jsxs("li",{children:[n.path," - ",n.size," bytes"]},n.path)),b=()=>{u(route("wireless.sites.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{v(),h(!1)}})},k=({files:n})=>{if(n){const l=JSON.parse(n),d=t=>t.split(".").pop(),j=t=>{const c=t.split("/");let x=c[c.length-1];return x=x.replace(/^\d+_/,""),x};return e.jsx("div",{className:"flex ps-2",children:l.map((t,c)=>e.jsxs("div",{className:"",children:[d(t)==="csv"&&e.jsx(r.Tooltip,{content:j(t),children:e.jsx(S,{size:18})}),d(t)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),d(t)==="pdf"&&e.jsx(r.Tooltip,{content:j(t),children:e.jsx(z,{})})]},c))})}},F=async()=>{await axios.get(route("wireless.sites.get.artifacts"))};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-center items-center",children:[" ",e.jsx("button",{className:"font-medium text-[12px] w-[70%]",onClick:a,children:"upload"}),e.jsx("a",{href:"/dashboard/wireless-sites/artifacts/",children:e.jsx(U,{className:"cursor-pointer",size:20,onClick:F})})]}),JSON.parse(s==null?void 0:s.artifacts).length>0&&e.jsx(k,{files:s!=null&&s.value?s==null?void 0:s.value:""}),e.jsxs(r.Dialog,{open:p,handler:a,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(r.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...N({className:"dropzone"}),children:[e.jsx("input",{...y()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(o==null?void 0:o.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:w})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:a,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:b,loading:g,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{L as U};
