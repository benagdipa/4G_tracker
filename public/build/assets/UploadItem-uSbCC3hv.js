import{r as I,W as y,j as e}from"./app-CQg3CYsG.js";import{r as n}from"./index-CpiuZQBe.js";import{u as O,F as m,I as S}from"./index-C2KJ7R7V.js";function R(c){var u;const{data:s}=c;console.log(s);const x=()=>j(!h),[h,j]=I.useState(!1),{data:r,setData:f,post:g,processing:v,reset:N}=y({site_id:s==null?void 0:s.id,field_name:(u=c==null?void 0:c.colDef)==null?void 0:u.field,artifacts:[]}),{getRootProps:F,getInputProps:b}=O({onDrop:o=>{f("artifacts",[...r.artifacts,...o.map(i=>Object.assign(i,{preview:URL.createObjectURL(i)}))])}}),z=r==null?void 0:r.artifacts.map(o=>e.jsxs("li",{children:[o.path," - ",o.size," bytes"]},o.path)),U=()=>{g(route("site.field.name.update.artifact"),{preserveScroll:!0,onSuccess:()=>{N(),j(!1)}})},C=({files:o})=>{if(o){const i=JSON.parse(o),l=t=>t.split(".").pop(),a=t=>{const d=t.split("/");let p=d[d.length-1];return p=p.replace(/^\d+_/,""),p};return e.jsx("div",{className:"flex ps-2",children:i.map((t,d)=>e.jsxs("div",{className:"",children:[l(t)==="csv"&&e.jsx(n.Tooltip,{content:a(t),children:e.jsx(m,{size:18})}),l(t)==="xlsx"&&e.jsx(n.Tooltip,{content:a(t),children:e.jsx(m,{size:18})}),l(t)==="xls"&&e.jsx(n.Tooltip,{content:a(t),children:e.jsx(m,{size:18})}),l(t)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),l(t)==="pdf"&&e.jsx(n.Tooltip,{content:a(t),children:e.jsx(S,{})})]},d))})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsx("button",{className:"font-medium text-[12px] opacity-0",onClick:x,children:"Uplaod"}),(s==null?void 0:s.value)&&e.jsx(C,{files:s!=null&&s.value?s==null?void 0:s.value:""}),e.jsxs(n.Dialog,{open:h,handler:x,size:"xs",children:[e.jsx(n.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(n.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...F({className:"dropzone"}),children:[e.jsx("input",{...b()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(r==null?void 0:r.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:z})]})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:x,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:U,loading:v,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{R as U};
