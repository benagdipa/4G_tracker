import{R as U,W as y,j as e}from"./app-DuVyQ3f3.js";import{r}from"./index-ClccL2zE.js";import{u as z,F as O,I as S}from"./index-CbSERLGd.js";import"./floating-ui.dom-BJX5GPEt.js";import"./createLucideIcon-DzoGniTu.js";function E({locId:j,siteId:f,name:u,value:a,single:p=!1}){const l=()=>m(!x),[x,m]=U.useState(!1),{data:n,setData:g,post:N,processing:F,reset:b}=y({site_id:f,location_id:j,field_name:u,artifacts:[]}),{getRootProps:v,getInputProps:D}=z({onDrop:t=>{g("artifacts",[...n.artifacts,...t.map(o=>Object.assign(o,{preview:URL.createObjectURL(o)}))])}}),C=n==null?void 0:n.artifacts.map(t=>e.jsxs("li",{children:[t.path," - ",t.size," bytes"]},t.path)),I=()=>{N(route("wireless.sites.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{b(),m(!1)}})},R=({files:t})=>{if(t){const o=JSON.parse(t),c=s=>s.split(".").pop(),h=s=>{const i=s.split("/");let d=i[i.length-1];return d=d.replace(/^\d+_/,""),d};return e.jsx("div",{className:"flex ps-2",children:o.map((s,i)=>e.jsxs("div",{className:`${p?"pt-2":""}`,children:[c(s)==="csv"&&e.jsx(r.Tooltip,{content:h(s),children:e.jsx(O,{size:18})}),c(s)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),c(s)==="pdf"&&e.jsx(r.Tooltip,{content:h(s),children:e.jsx(S,{})})]},i))})}};return e.jsxs("div",{className:"w-full h-full",children:[!p&&e.jsx("button",{className:"font-medium text-[12px] opacity-0",onClick:l,children:"Uplaod"}),a&&e.jsx(R,{files:a||""}),e.jsxs(r.Dialog,{open:x,handler:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(r.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...v({className:"dropzone"}),children:[e.jsx("input",{...D()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(n==null?void 0:n.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:C})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:l,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:I,loading:F,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{E as default};
