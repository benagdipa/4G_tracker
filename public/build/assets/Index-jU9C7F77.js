import{r as v,j as e,R as J,b as re,y as G,W as Q,Y as oe,a as le}from"./app-BMzSyOT0.js";import{r as t}from"./index-Vfe2c6Li.js";import{_ as ee,A as ae,C as de}from"./AuthenticatedLayout-CdUAz2E1.js";import{M as ie,D as ce,S as ue,R as xe,E as he,C as fe,P as me}from"./RestoreTable-CUqxDfla.js";import{T as se}from"./TextInput-DKqvN2jD.js";import{U as je}from"./UploadItemField-DIPlxHUd.js";import{I as F}from"./InputLabel-BUL_oAzA.js";import{I as B}from"./InputError-aMW2DFhU.js";import"./transition-CqOPuQqI.js";import"./format-BlmS4gph.js";function ye({mappingDialog:o,setMappingDialog:c,mappingData:s,setBatchId:x}){var E,P,I,z,M,H,$,A,L,W,U,R,q;const u=()=>c(!o),[h,j]=v.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[a,C]=v.useState({}),[b,k]=v.useState(!1),[_,S]=v.useState(""),[w,p]=v.useState(""),f=(r,y)=>{j(V=>({...V,[r]:y}))};v.useEffect(()=>{f("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const m=async r=>{var V,K,X,Z,D,Y;r.preventDefault();let y={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(l=>{h[l]||(y[l]="This field is required.")}),C(y),Object.keys(y).length>0){console.log(y);return}try{k(!0);const l=await re.post(route("site.field.map.save"),h);l!=null&&l.data&&(p((K=(V=l==null?void 0:l.data)==null?void 0:V.success)==null?void 0:K.message),x((X=l==null?void 0:l.data)==null?void 0:X.batch_id),setTimeout(()=>{c(!1),p(""),S("")},3e3),G.visit(route("site.field.name.index")))}catch(l){console.log("error:",l),S(`${(Y=(D=(Z=l==null?void 0:l.response)==null?void 0:Z.data)==null?void 0:D.error)==null?void 0:Y.message}`)}finally{k(!1)}};return e.jsx(J.Fragment,{children:e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"CSV Mapping"}),_&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:_}),w&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:w}),e.jsxs(t.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.site_name,onChange:r=>f("site_name",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((E=s==null?void 0:s.header)==null?void 0:E.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.cell_name,onChange:r=>f("cell_name",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lon,onChange:r=>f("lon",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((I=s==null?void 0:s.header)==null?void 0:I.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lat,onChange:r=>f("lat",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((z=s==null?void 0:s.header)==null?void 0:z.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.bb_type,onChange:r=>f("bb_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.rru_type,onChange:r=>f("rru_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((H=s==null?void 0:s.header)==null?void 0:H.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.antenna_type,onChange:r=>f("antenna_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.frequency,onChange:r=>f("frequency",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.pci,onChange:r=>f("pci",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.azimuth,onChange:r=>f("azimuth",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.height,onChange:r=>f("height",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((U=s==null?void 0:s.header)==null?void 0:U.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.last_epo,onChange:r=>f("last_epo",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.next_epo,onChange:r=>f("next_epo",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(B,{message:a.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:u,className:"mr-1",disabled:b,children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:m,loading:b,children:e.jsx("span",{children:"Confirm"})})]})]})})}function ve({site_id:o,changedItems:c,setChangedItems:s}){const[x,u]=v.useState(!1),h=async j=>{var a,C,b;if(c.length>0){let k=c.filter(_=>_.site_id===j)[0];if(k){u(!0);const _=await axios.post(route("site.field.name.save.item"),{site_id:k==null?void 0:k.site_id,items:k==null?void 0:k.items});(a=_==null?void 0:_.data)!=null&&a.success&&(u(!1),ee.success((b=(C=_==null?void 0:_.data)==null?void 0:C.success)==null?void 0:b.message),s(S=>S.filter(w=>w.site_id!==j)))}}};return e.jsx(t.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!c.some(j=>j.site_id===o),onClick:()=>{h(o)},loading:x,children:"Save"})}function be({addColumnDialog:o,setAddColumnDialog:c}){const{data:s,setData:x,post:u,processing:h,errors:j,reset:a}=Q({type:"fw_site",name:"",key:"",input_type:"",options:""}),C=b=>{b.preventDefault(),u(route("additional.columns.save.item"),{onSuccess:()=>{c(!1),a()}})};return e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Add New Column"}),e.jsxs(t.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Name",className:"mb-1"}),e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:b=>x("name",b.target.value)}),e.jsx(B,{message:j.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Key",className:"mb-1"}),e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:b=>x("key",b.target.value)}),e.jsx(B,{message:j.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:b=>x("input_type",b.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(B,{message:j.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:b=>x("options",b.target.value)}),e.jsx(B,{message:j.options,className:"text-sm font-medium"})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:()=>c(!o),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:b=>C(b),className:"capitalize",loading:h,children:e.jsx("span",{children:"Submit"})})]})]})}function pe({hideColumnDialog:o,setHideColumnDialog:c,columns:s,hidden_columns:x,deleted_columns:u}){const h=()=>c(!o),[j,a]=v.useState([]),{data:C,setData:b,post:k,processing:_,errors:S,reset:w}=Q({type:"fw_site",key:"hide",items:(x==null?void 0:x.length)>0?x:[]});v.useEffect(()=>{o&&a(m=>[...s.filter(P=>!u.includes(P.key)).map(P=>({key:P.key,name:P.name}))])},[o]);const p=(m,E)=>{const P=m.target.checked;b(I=>P?{...I,items:[...I.items,E]}:{...I,items:I.items.filter(z=>z!==E)})},f=m=>{m.preventDefault(),k(route("hide.columns.item"),{onSuccess:()=>{c(!1),w()}})};return e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Hide Column"}),e.jsx(t.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(j==null?void 0:j.length)>0&&j.map((m,E)=>e.jsx(J.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:m==null?void 0:m.name}),onChange:P=>p(P,m==null?void 0:m.key),defaultChecked:x==null?void 0:x.includes(m==null?void 0:m.key)})},E))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:h,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:m=>{f(m)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function Ne({renameColumnDialog:o,setRenameColumnDialog:c,columns:s,deleted_columns:x}){var S;const{data:u,setData:h,post:j,processing:a,errors:C,reset:b}=Q({type:"fw_site",key:"rename",items:[]});v.useEffect(()=>{o&&h(w=>{const p=[...s.filter(f=>!x.includes(f.key)).map(f=>({key:f.key,name:f.name}))];return{...w,items:p}})},[o]);const k=(w,p)=>{h(f=>({...f,items:f.items.map(m=>m.key===w?{...m,name:p}:m)}))},_=w=>{w.preventDefault(),j(route("rename.columns.item"),{onSuccess:()=>{c(!1),b()}})};return e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Rename Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(u==null?void 0:u.items.length)>0&&((S=u==null?void 0:u.items)==null?void 0:S.map((w,p)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",value:w==null?void 0:w.name,onChange:f=>k(w==null?void 0:w.key,f.target.value)})},p)))})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>c(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:w=>_(w),loading:a,children:"Submit"})]})]})}function ge({deleteColumnDialog:o,setDeleteColumnDialog:c,columns:s,deleted_columns:x}){const{data:u,setData:h,post:j,processing:a,errors:C,reset:b}=Q({type:"fw_site",key:"delete",items:[]}),[k,_]=v.useState([]);v.useEffect(()=>{o&&_(p=>[...s.filter(m=>!x.includes(m.key)).map(m=>({key:m.key,name:m.name}))])},[o]);const S=(p,f)=>{const m=p.target.checked;h(E=>m?{...E,items:[...E.items,f]}:{...E,items:E.items.filter(P=>P!==f)})},w=p=>{p.preventDefault(),j(route("delete.columns.item"),{onSuccess:()=>{c(!1),b()}})};return e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Delete Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(k==null?void 0:k.length)>0&&k.map((p,f)=>e.jsx(J.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:p==null?void 0:p.name}),onChange:m=>{S(m,p==null?void 0:p.key)}})},f))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>c(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:p=>{w(p)},loading:a,children:"Submit"})]})]})}function we({arrangeColumnDialog:o,setArrangeColumnDialog:c,columns:s,deleted_columns:x}){const[u,h]=v.useState([]),[j,a]=v.useState(null),{data:C,setData:b,post:k,processing:_,errors:S,reset:w}=Q({type:"fw_site",key:"arrange",items:[]});v.useEffect(()=>{o&&h(I=>[...(H=>H.map(($,A)=>({...$,position:A+1})))(s.filter(H=>!x.includes(H.key)).map(H=>({key:H.key,name:H.name})))])},[o]);const p=(I,z)=>{a(z)},f=()=>{a(null)},m=I=>{I.preventDefault()},E=(I,z)=>{if(!j)return;const M=u.indexOf(j),H=u.indexOf(z);if(M!==-1&&H!==-1){const A=[...(R=>R.map((q,r)=>({...q,position:r+1})))(u)],[L]=A.splice(M,1);A.splice(H,0,L);const W=A.map((R,q)=>({...R,position:q+1}));h(W);const U=W.map(R=>({key:R.key,position:R.position}));b("items",U)}},P=I=>{I.preventDefault(),k(route("rearrange.columns.item"),{onSuccess:()=>{c(!1),w()}})};return e.jsxs(t.Dialog,{open:o,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(u==null?void 0:u.length)>0&&(u==null?void 0:u.map((I,z)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:M=>p(M,I),onDragEnd:f,onDragOver:m,onDrop:M=>E(M,I),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(ie,{strokeWidth:1.5,size:18})}),I.name]})},z)))})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>c(!1),children:"cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:I=>P(I),loading:_,children:"Submit"})]})]})}function ke({columns:o,hidden_columns:c,deleted_columns:s}){const[x,u]=v.useState(!1),[h,j]=v.useState(!1),[a,C]=v.useState(!1),[b,k]=v.useState(!1),[_,S]=v.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(t.Menu,{children:[e.jsx(t.MenuHandler,{children:e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(t.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(t.MenuItem,{onClick:()=>{u(!0)},children:"Add Column"}),e.jsx(t.MenuItem,{onClick:()=>{j(!0)},children:"Show/Hide Columns"}),e.jsx(t.MenuItem,{onClick:()=>{C(!0)},children:"Rename Columns"}),e.jsx(t.MenuItem,{onClick:()=>{S(!0)},children:"Rearrange Columns"}),e.jsx(t.MenuItem,{onClick:()=>{k(!0)},className:"text-red-500",children:"Delete Columns"})]})]}),e.jsx(be,{addColumnDialog:x,setAddColumnDialog:u}),e.jsx(pe,{hideColumnDialog:h,setHideColumnDialog:j,columns:o,hidden_columns:c,deleted_columns:s}),e.jsx(Ne,{renameColumnDialog:a,setRenameColumnDialog:C,columns:o,deleted_columns:s}),e.jsx(ge,{deleteColumnDialog:b,setDeleteColumnDialog:k,columns:o,deleted_columns:s}),e.jsx(we,{arrangeColumnDialog:_,setArrangeColumnDialog:S,columns:o,deleted_columns:s})]})}function Ce({siteId:o,name:c,value:s,handleEditAbleItem:x}){const[u,h]=v.useState(s||""),j=a=>{h(a),x(o,c,a)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:u,rows:1,onChange:a=>{j(a.target.value)}})})}function Se({siteId:o,name:c,value:s,handleEditAbleItem:x}){const[u,h]=v.useState(s||""),j=a=>{h(a),x(o,c,a)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(ce,{selected:u,onChange:a=>j(a),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function _e({siteId:o,name:c,value:s,options:x,handleEditAbleItem:u}){const[h,j]=v.useState(s||""),a=C=>{j(C),u(o,c,C)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:h,onChange:C=>{a(C.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),x.length>0&&x.map((C,b)=>e.jsx("option",{value:C.value,children:C.label},b))]})})}const Ie={text:Ce,date:Se,dropdown:_e};function ze({item:o,site:c,handleEditAbleItem:s}){const x=Ie[o.input_type],u={status:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}],solution_type:[{label:"Opti Type-1",value:"opti_type_1"},{label:"Opti Type-5",value:"opti_type_5"},{label:"Opti Type-6",value:"opti_type_6"}]};return e.jsx(x,{siteId:c==null?void 0:c.id,name:o.key,value:o.value,handleEditAbleItem:s,options:u[o.key]})}function We({auth:o,sites:c,get_data:s,batch:x,additional_columns:u,hidden_columns:h,renamed_columns:j,deleted_columns:a,arrange_columns:C}){var Y;const{role:b}=o,k=[{name:"Site Name",sortable:!0,key:"site_name",position:1,editable:!1},{name:"Cell Name",sortable:!0,key:"cell_name",position:2,editable:!1},{name:"Lon",sortable:!0,key:"lon",position:3,editable:!1},{name:"Lat",sortable:!0,key:"lat",position:4,editable:!1},{name:"BB Type",sortable:!0,key:"bb_type",position:5,editable:!1},{name:"RRU Type",sortable:!0,key:"rru_type",position:6,editable:!1},{name:"Antenna Type",sortable:!0,key:"antenna_type",position:7,editable:!1},{name:"Frequency",sortable:!0,key:"frequency",position:8,editable:!1},{name:"PCI",sortable:!1,key:"pci",position:9,editable:!1},{name:"Azimuth",sortable:!1,key:"azimuth",position:10,editable:!1},{name:"Height",sortable:!1,key:"height",position:11,editable:!1},{name:"Last EPO",sortable:!1,key:"last_epo",position:12,editable:!1},{name:"Next EPO",sortable:!1,key:"next_epo",position:13,editable:!1},{name:"Solution Type",sortable:!1,key:"solution_type",position:14,editable:!0,input_type:"dropdown"},{name:"Start Date",sortable:!1,key:"start_date",position:15,editable:!0,input_type:"date"},{name:"End Date",sortable:!1,key:"end_date",position:16,editable:!0,input_type:"date"},{name:"Status",sortable:!1,key:"status",position:17,editable:!0,input_type:"dropdown"},{name:"Remarks",sortable:!1,key:"remarks",position:18,editable:!0,input_type:"text"},{name:"Artifacts",sortable:!1,key:"artifacts",position:19,editable:!0,input_type:"upload"}];function _(l,g){return l==null?g:g==null?l:[...new Set([...l,...g])]}const S=_(h,a);function w(){const l=[...k],g=u==null?void 0:u.map(i=>({...i,editable:!0})),n=(i,N)=>i.position!==void 0&&N.position!==void 0?i.position-N.position:i.position!==void 0?-1:N.position!==void 0?1:0;return j&&(l.forEach(i=>{const N=j.find(O=>O.key===i.key);N&&(i.name=N.name)}),g.forEach(i=>{const N=j.find(O=>O.key===i.key);N&&(i.name=N.name)})),S&&(l.forEach(i=>{S.find(O=>O===i.key)&&(i.hidden=!0)}),g.forEach(i=>{S.find(O=>O===i.key)&&(i.hidden=!0)})),C&&(l.forEach(i=>{const N=C.find(O=>O.key===i.key);N&&(i.position=N.position)}),g.forEach(i=>{const N=C.find(O=>O.key===i.key);N&&(i.position=N.position)})),[...l,...g].sort(n)}const p=w(),f=v.useRef(null),[m,E]=v.useState(s!=null&&s.search?s==null?void 0:s.search:""),[P,I]=v.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[z]=v.useState(c),[M,H]=v.useState(!1),[$,A]=v.useState(""),[L,W]=v.useState(null),[U,R]=v.useState([]),q=l=>{f.current.click()},r=async l=>{var n,d,T;const g=new FormData;g.append("import_file",l.target.files[0]);try{const i=await re.post(route("site.field.name.import"),g);i!=null&&i.data&&(A(i==null?void 0:i.data),H(!0))}catch(i){ee.error(`${(T=(d=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:d.error)==null?void 0:T.message}`)}},y=async()=>{m&&G.get(route("site.field.name.index",{search:m}))},V=async(l,g)=>{G.get(route("site.field.name.index",{order_by:l,order:g}))},K=async(l,g)=>{G.get(route("site.field.name.index",{filter_by:l,value:g}))},X=l=>{I(l),G.get(route("site.field.name.index",{...s,per_page:l}))};v.useEffect(()=>{x!=null&&x.batch_field_id&&W(x==null?void 0:x.batch_field_id)},[]),v.useEffect(()=>{const l=async()=>{var n,d,T;try{let i=0;const N=await re.get(route("import.progress",{batchId:L}));if(N!=null&&N.data){let O=parseInt((n=N==null?void 0:N.data)==null?void 0:n.total_jobs),te=parseInt((d=N==null?void 0:N.data)==null?void 0:d.pending_jobs),ne=O-te;parseInt((T=N==null?void 0:N.data)==null?void 0:T.failed_jobs)>0?clearInterval(g):(i=parseInt(ne/O*100).toFixed(0),i<100?ee.loading(`CSV Data Import Progress: ${i}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(ee.dismiss("loading-toast"),clearInterval(g)))}}catch(i){console.log(i)}},g=setInterval(()=>{L&&l()},5e3);return()=>clearInterval(g)},[L]);const Z=(l,g,n)=>{const d=U.findIndex(T=>T.site_id===l);R(d!==-1?T=>{const i=[...T];return i[d]={...i[d],items:{...i[d].items,[g]:n}},i}:T=>[...T,{site_id:l,items:{[g]:n}}])},D=l=>{let g=[];return p.forEach(n=>{const d=n.key,T=l[d];T!==void 0?n!=null&&n.position?g[n.position-1]={key:d,value:T,editable:n==null?void 0:n.editable,input_type:n!=null&&n.input_type?n==null?void 0:n.input_type:""}:g.push({key:d,value:T,editable:n==null?void 0:n.editable,input_type:n!=null&&n.input_type?n==null?void 0:n.input_type:""}):g.push({key:d,value:"",editable:n==null?void 0:n.editable,input_type:n!=null&&n.input_type?n==null?void 0:n.input_type:""})}),g};return e.jsxs(ae,{user:o==null?void 0:o.user,children:[e.jsx(oe,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(t.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(le,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(le,{href:route("site.field.name.index"),children:"FW Site"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[e.jsxs("div",{className:"search-wrapper w-1/5 flex relative",children:[e.jsx(se,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:m,onChange:l=>E(l.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(t.IconButton,{size:"sm",className:"rounded-l-none",onClick:y,children:e.jsx(ue,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>K("status",l.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>K("solution_type",l.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"opti_type_1",children:"Opti Type-1"}),e.jsx("option",{value:"opti_type_5",children:"Opti Type-5"}),e.jsx("option",{value:"opti_type_6",children:"Opti Type-6"})]})}),b==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(t.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:q,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:r,ref:f,style:{display:"none"}})]}),e.jsx(ke,{columns:p,hidden_columns:h,deleted_columns:a||[]}),e.jsx(xe,{type:"fw_site"})]}),e.jsx(he,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(t.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[p.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${S!=null&&S.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name}),(l==null?void 0:l.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(fe,{size:12,strokeWidth:2,onClick:()=>{V(l.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(de,{size:12,strokeWidth:2,onClick:()=>{V(l.key,"desc")}})})]})]})},l.name)),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:z==null?void 0:z.data.map((l,g)=>{const n=D(l);return e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[n==null?void 0:n.map((d,T)=>e.jsx(J.Fragment,{children:e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${S!=null&&S.includes(d==null?void 0:d.key)?"hidden":""}`,children:(d==null?void 0:d.key)==="loc_id"?e.jsx(le,{href:route("wireless.show.location.index",d==null?void 0:d.value),className:"font-semibold underline",children:d==null?void 0:d.value}):e.jsx(J.Fragment,{children:d!=null&&d.editable?e.jsxs(J.Fragment,{children:[(d==null?void 0:d.input_type)!=="upload"&&e.jsx(ze,{item:d,site:l,handleEditAbleItem:Z}),(d==null?void 0:d.input_type)==="upload"&&e.jsx(je,{value:d==null?void 0:d.value,siteId:l==null?void 0:l.id,name:"artifacts"})]}):d==null?void 0:d.value})})},T)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsx(ve,{site_id:l==null?void 0:l.id,changedItems:U,setChangedItems:R})})]},l==null?void 0:l.id)})})]}),((Y=z==null?void 0:z.data)==null?void 0:Y.length)===0&&e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:P,onChange:l=>{X(l.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${c==null?void 0:c.from}-${c==null?void 0:c.to} of ${c==null?void 0:c.total} Records`}),e.jsx(me,{links:z==null?void 0:z.links,perPage:P})]})]})}),e.jsx(ye,{mappingDialog:M,setMappingDialog:H,mappingData:$,setBatchId:W})]})]})}export{We as default};
