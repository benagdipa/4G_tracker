import{r as j,j as e,R as ne,b as se,y as q,W as D,Y as ie,a as ee}from"./app-DNp-emWw.js";import{r as o}from"./index-ChC4ODf3.js";import{_ as Z,A as ue,C as xe}from"./AuthenticatedLayout-BEfWFsmZ.js";import{D as me,S as he,E as fe,C as je,P as ve}from"./ExportButton-DXpxS9TM.js";import{T as H}from"./TextInput-CT3IAyRu.js";import{U as Ne}from"./UploadItemField-BtRiMCK8.js";import{I}from"./InputLabel-DIUvqpDL.js";import{I as P}from"./InputError-CmZdJ38n.js";import"./transition-DzGjdDzv.js";import"./index-BOEHotrA.js";function ce({siteId:c,locId:t,name:s,value:x,handleEditAbleItem:m}){const[d,v]=j.useState(x||""),i=N=>{v(N),m(c,t,s,N)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:d,rows:1,onChange:N=>{i(N.target.value)}})})}function le({siteId:c,locId:t,name:s,value:x,handleEditAbleItem:m}){const[d,v]=j.useState(x||""),i=N=>{v(N),m(c,t,s,N)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(me,{selected:d,onChange:N=>i(N),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function re({siteId:c,locId:t,name:s,value:x,options:m,handleEditAbleItem:d}){const[v,i]=j.useState(x||""),N=h=>{i(h),d(c,t,s,h)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:v,onChange:h=>{N(h.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),(m==null?void 0:m.length)>0&&m.map((h,y)=>e.jsx("option",{value:h.value,children:h.label},y))]})})}const ye={text:ce,date:le,dropdown:re};function be({column:c,site:t,value:s,handleEditAbleItem:x}){const m=ye[c.input_type];return e.jsx(m,{siteId:t==null?void 0:t.id,locId:t==null?void 0:t.loc_id,name:c.key,value:s,handleEditAbleItem:x,options:JSON.parse(c==null?void 0:c.options)})}function we({site_id:c,changedItems:t,setChangedItems:s}){const[x,m]=j.useState(!1),d=async v=>{var i,N,h;if(t.length>0){let y=t.filter(g=>g.site_id===v)[0];if(y){m(!0);const g=await axios.post(route("wireless.sites.save.item"),{site_id:y==null?void 0:y.site_id,location_id:y==null?void 0:y.loc_id,items:y==null?void 0:y.items});(i=g==null?void 0:g.data)!=null&&i.success&&(m(!1),Z.success((h=(N=g==null?void 0:g.data)==null?void 0:N.success)==null?void 0:h.message),s(p=>p.filter(F=>F.site_id!==v)))}}};return e.jsx(o.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!t.some(v=>v.site_id===c),onClick:()=>{d(c)},loading:x,children:"Save"})}function ge({mappingDialog:c,setMappingDialog:t,mappingData:s,setBatchId:x}){var a,B,S,R,z,K,W,Y,G,A,L,V;const m=()=>t(!c),[d,v]=j.useState({file_path:s?s==null?void 0:s.filePath:"",loc_id:"",wntd:"",imsi:"",version:"",avc:"",bw_profile:"",lon:"",lat:"",site_name:"",home_cell:"",home_pci:"",traffic_profile:""}),[i,N]=j.useState({}),[h,y]=j.useState(!1),[g,p]=j.useState(""),[F,r]=j.useState(""),u=(n,f)=>{v(O=>({...O,[n]:f}))};j.useEffect(()=>{u("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const b=async n=>{var O,Q,J,M,U,X;n.preventDefault();let f={};if(["loc_id","wntd","imsi","version","avc","bw_profile","lon","lat","site_name","home_cell","home_pci","traffic_profile"].forEach(k=>{d[k]||(f[k]="This field is required.")}),N(f),Object.keys(f).length>0){console.log(f);return}try{y(!0);const k=await se.post(route("wireless.sites.map.save"),d);k!=null&&k.data&&(r((Q=(O=k==null?void 0:k.data)==null?void 0:O.success)==null?void 0:Q.message),x((J=k==null?void 0:k.data)==null?void 0:J.batch_id),setTimeout(()=>{t(!1),r(""),p("")},3e3),q.visit(route("wireless.sites.index")))}catch(k){console.log("error:",k),p(`${(X=(U=(M=k==null?void 0:k.response)==null?void 0:M.data)==null?void 0:U.error)==null?void 0:X.message}`)}finally{y(!1)}};return e.jsx(ne.Fragment,{children:e.jsxs(o.Dialog,{open:c,size:"xs",children:[e.jsx(o.DialogHeader,{children:"CSV Mapping"}),g&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:g}),F&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:F}),e.jsxs(o.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"LOCID",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.loc_id,onChange:n=>u("loc_id",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((a=s==null?void 0:s.header)==null?void 0:a.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.loc_id,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"WNTD",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.wntd,onChange:n=>u("wntd",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((B=s==null?void 0:s.header)==null?void 0:B.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.wntd,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"IMSI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.imsi,onChange:n=>u("imsi",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((S=s==null?void 0:s.header)==null?void 0:S.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.imsi,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"VERSION",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.version,onChange:n=>u("version",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.version,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"AVC",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.avc,onChange:n=>u("avc",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((z=s==null?void 0:s.header)==null?void 0:z.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.avc,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"BW Profile",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.bw_profile,onChange:n=>u("bw_profile",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((K=s==null?void 0:s.header)==null?void 0:K.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.bw_profile,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lon,onChange:n=>u("lon",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lat,onChange:n=>u("lat",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((Y=s==null?void 0:s.header)==null?void 0:Y.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"SiteName",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.site_name,onChange:n=>u("site_name",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((G=s==null?void 0:s.header)==null?void 0:G.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"HomeCell",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.home_cell,onChange:n=>u("home_cell",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.home_cell,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"HomePCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.home_pci,onChange:n=>u("home_pci",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.home_pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{value:"Traffic_Profile",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.traffic_profile,onChange:n=>u("traffic_profile",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((V=s==null?void 0:s.header)==null?void 0:V.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(P,{message:i.traffic_profile,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(o.DialogFooter,{children:[e.jsx(o.Button,{variant:"text",color:"red",onClick:m,className:"mr-1",disabled:h,children:e.jsx("span",{children:"Cancel"})}),e.jsx(o.Button,{variant:"gradient",color:"green",onClick:b,loading:h,children:e.jsx("span",{children:"Confirm"})})]})]})})}function ke({addColumnDialog:c,setAddColumnDialog:t}){const{data:s,setData:x,post:m,processing:d,errors:v,reset:i}=D({type:"wntd",name:"",key:"",input_type:"",options:""}),N=h=>{h.preventDefault(),m(route("additional.columns.save.item"),{onSuccess:()=>{t(!1),i()}})};return e.jsxs(o.Dialog,{open:c,size:"xs",children:[e.jsx(o.DialogHeader,{children:"Add New Column"}),e.jsxs(o.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(I,{value:"Column Name",className:"mb-1"}),e.jsx(H,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:h=>x("name",h.target.value)}),e.jsx(P,{message:v.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(I,{value:"Column Key",className:"mb-1"}),e.jsx(H,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:h=>x("key",h.target.value)}),e.jsx(P,{message:v.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(I,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:h=>x("input_type",h.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(P,{message:v.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(I,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:h=>x("options",h.target.value)}),e.jsx(P,{message:v.options,className:"text-sm font-medium"})]})]}),e.jsxs(o.DialogFooter,{children:[e.jsx(o.Button,{variant:"text",color:"red",onClick:()=>t(!c),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(o.Button,{variant:"gradient",color:"green",onClick:h=>N(h),className:"capitalize",loading:d,children:e.jsx("span",{children:"Submit"})})]})]})}function pe({hideColumnDialog:c,setHideColumnDialog:t,columns:s,additional_columns:x,hidden_columns:m,deleted_columns:d}){const v=()=>t(!c),[i,N]=j.useState([]),{data:h,setData:y,post:g,processing:p,errors:F,reset:r}=D({type:"wntd",key:"hide",items:(m==null?void 0:m.length)>0?m:[]});j.useEffect(()=>{c&&N(a=>[...s.filter(S=>!d.includes(S.key)).map(S=>({key:S.key,name:S.name})),...x.filter(S=>!d.includes(S.key)).map(S=>({key:S.key,name:S.name}))])},[c]);const u=(a,B)=>{const S=a.target.checked;y(R=>S?{...R,items:[...R.items,B]}:{...R,items:R.items.filter(z=>z!==B)})},b=a=>{a.preventDefault(),g(route("hide.columns.item"),{onSuccess:()=>{t(!1),r()}})};return e.jsxs(o.Dialog,{open:c,size:"xs",children:[e.jsx(o.DialogHeader,{children:"Hide Column"}),e.jsx(o.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(i==null?void 0:i.length)>0&&i.map((a,B)=>e.jsx(ne.Fragment,{children:e.jsx(o.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(o.Typography,{color:"blue-gray",className:"font-medium text-sm",children:a==null?void 0:a.name}),onChange:S=>u(S,a==null?void 0:a.key),defaultChecked:m==null?void 0:m.includes(a==null?void 0:a.key)})},B))})]})}),e.jsxs(o.DialogFooter,{children:[e.jsx(o.Button,{variant:"text",color:"red",onClick:v,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(o.Button,{variant:"gradient",color:"green",onClick:a=>{b(a)},className:"capitalize",loading:p,children:e.jsx("span",{children:"Confirm"})})]})]})}function Ce({renameColumnDialog:c,setRenameColumnDialog:t,columns:s,additional_columns:x,deleted_columns:m}){var F;const{data:d,setData:v,post:i,processing:N,errors:h,reset:y}=D({type:"wntd",key:"rename",items:[]});j.useEffect(()=>{c&&v(r=>{const u=[...s.filter(b=>!m.includes(b.key)).map(b=>({key:b.key,name:b.name})),...x.filter(b=>!m.includes(b.key)).map(b=>({key:b.key,name:b.name}))];return{...r,items:u}})},[c]);const g=(r,u)=>{v(b=>({...b,items:b.items.map(a=>a.key===r?{...a,name:u}:a)}))},p=r=>{r.preventDefault(),i(route("rename.columns.item"),{onSuccess:()=>{t(!1),y()}})};return e.jsxs(o.Dialog,{open:c,size:"xs",children:[e.jsx(o.DialogHeader,{children:"Rename Columns"}),e.jsx(o.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(d==null?void 0:d.items.length)>0&&((F=d==null?void 0:d.items)==null?void 0:F.map((r,u)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(H,{className:"w-full text-sm font-medium text-gray-600",value:r==null?void 0:r.name,onChange:b=>g(r==null?void 0:r.key,b.target.value)})},u)))})}),e.jsxs(o.DialogFooter,{children:[e.jsx(o.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>t(!1),children:"Cancel"}),e.jsx(o.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:r=>p(r),loading:N,children:"Submit"})]})]})}function Se({deleteColumnDialog:c,setDeleteColumnDialog:t,columns:s,additional_columns:x,deleted_columns:m}){const{data:d,setData:v,post:i,processing:N,errors:h,reset:y}=D({type:"wntd",key:"delete",items:[]}),[g,p]=j.useState([]);j.useEffect(()=>{c&&p(u=>[...s.filter(a=>!m.includes(a.key)).map(a=>({key:a.key,name:a.name})),...x.filter(a=>!m.includes(a.key)).map(a=>({key:a.key,name:a.name}))])},[c]);const F=(u,b)=>{const a=u.target.checked;v(B=>a?{...B,items:[...B.items,b]}:{...B,items:B.items.filter(S=>S!==b)})},r=u=>{u.preventDefault(),i(route("delete.columns.item"),{onSuccess:()=>{t(!1),y()}})};return e.jsxs(o.Dialog,{open:c,size:"xs",children:[e.jsx(o.DialogHeader,{children:"Delete Columns"}),e.jsx(o.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(g==null?void 0:g.length)>0&&g.map((u,b)=>e.jsx(ne.Fragment,{children:e.jsx(o.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(o.Typography,{color:"blue-gray",className:"font-medium text-sm",children:u==null?void 0:u.name}),onChange:a=>{F(a,u==null?void 0:u.key)}})},b))})]})}),e.jsxs(o.DialogFooter,{children:[e.jsx(o.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>t(!1),children:"Cancel"}),e.jsx(o.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:u=>{r(u)},loading:N,children:"Submit"})]})]})}function _e({columns:c,additional_columns:t,hidden_columns:s,deleted_columns:x}){const[m,d]=j.useState(!1),[v,i]=j.useState(!1),[N,h]=j.useState(!1),[y,g]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Menu,{children:[e.jsx(o.MenuHandler,{children:e.jsx(o.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(o.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(o.MenuItem,{onClick:()=>{d(!0)},children:"Add Column"}),e.jsx(o.MenuItem,{onClick:()=>{i(!0)},children:"Hide Columns"}),e.jsx(o.MenuItem,{onClick:()=>{h(!0)},children:"Rename Columns"}),"\\",e.jsx(o.MenuItem,{onClick:()=>{g(!0)},className:"text-red-500",children:"Delete Columns"})]})]}),e.jsx(ke,{addColumnDialog:m,setAddColumnDialog:d}),e.jsx(pe,{hideColumnDialog:v,setHideColumnDialog:i,columns:c,additional_columns:t,hidden_columns:s,deleted_columns:x}),e.jsx(Ce,{renameColumnDialog:N,setRenameColumnDialog:h,columns:c,additional_columns:t,deleted_columns:x}),e.jsx(Se,{deleteColumnDialog:y,setDeleteColumnDialog:g,columns:c,additional_columns:t,deleted_columns:x})]})}function Oe({auth:c,sites:t,get_data:s,batch:x,additional_columns:m,hidden_columns:d,renamed_columns:v,deleted_columns:i}){var oe;const{role:N}=c,h=[{name:"LOCID",sortable:!0,key:"loc_id"},{name:"WNTD",sortable:!0,key:"wntd"},{name:"IMSI",sortable:!0,key:"imsi"},{name:"VERSION",sortable:!0,key:"version"},{name:"AVC",sortable:!0,key:"avc"},{name:"BW Profile",sortable:!0,key:"bw_profile"},{name:"Lon",sortable:!0,key:"lon"},{name:"Lat",sortable:!0,key:"lat"},{name:"SiteName",sortable:!0,key:"site_name"},{name:"HomeCell",sortable:!0,key:"home_cell"},{name:"HomePCI",sortable:!0,key:"home_pci"},{name:"Traffic Profile",sortable:!0,key:"traffic_profile"},{name:"Start Date",sortable:!1,key:"start_date"},{name:"End Date",sortable:!1,key:"end_date"},{name:"Solution Type",sortable:!1,key:"solution_type"},{name:"Status",sortable:!1,key:"status"},{name:"Remarks",sortable:!1,key:"remarks"},{name:"Artifacts",sortable:!1,key:"artifacts"}],[y,g]=j.useState(h),[p,F]=j.useState(m),r=u(d,i);function u(l,w){return l==null?w:w==null?l:[...new Set([...l,...w])]}j.useEffect(()=>{if(v){const l=[...y];l.forEach(_=>{const E=v.find(T=>T.key===_.key);E&&(_.name=E.name)});const w=[...p];w.forEach(_=>{const E=v.find(T=>T.key===_.key);E&&(_.name=E.name)}),g(l),F(w)}},[v]);const b=j.useRef(null),[a,B]=j.useState(s!=null&&s.search?s==null?void 0:s.search:""),[S,R]=j.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[z]=j.useState(t),[K,W]=j.useState(!1),[Y,G]=j.useState(""),[A,L]=j.useState(null),[V,n]=j.useState([]),f=l=>{b.current.click()},O=async l=>{var _,E,T;const w=new FormData;w.append("import_file",l.target.files[0]);try{const C=await se.post(route("wireless.sites.import"),w);C!=null&&C.data&&(G(C==null?void 0:C.data),W(!0))}catch(C){Z.error(`${(T=(E=(_=C==null?void 0:C.response)==null?void 0:_.data)==null?void 0:E.error)==null?void 0:T.message}`)}},Q=async()=>{q.get(route("wireless.sites.index",{search:a}))},J=async(l,w)=>{q.get(route("wireless.sites.index",{order_by:l,order:w}))},M=(l,w)=>{var _;if(l)return(_=l[w])==null?void 0:_.value},U=async(l,w)=>{q.get(route("wireless.sites.index",{filter_by:l,value:w}))},X=l=>{R(l),q.get(route("wireless.sites.index",{...s,per_page:l}))};j.useEffect(()=>{x!=null&&x.batch_site_id&&L(x==null?void 0:x.batch_site_id)},[]),j.useEffect(()=>{const l=async()=>{var _,E,T;try{let C=0;const $=await se.get(route("import.progress",{batchId:A}));if($!=null&&$.data){let te=parseInt((_=$==null?void 0:$.data)==null?void 0:_.total_jobs),de=parseInt((E=$==null?void 0:$.data)==null?void 0:E.pending_jobs),ae=te-de;parseInt((T=$==null?void 0:$.data)==null?void 0:T.failed_jobs)>0?clearInterval(w):(C=parseInt(ae/te*100).toFixed(0),C<100?Z.loading(`CSV Data Import Progress: ${C}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(Z.dismiss("loading-toast"),clearInterval(w)))}}catch(C){console.log(C)}},w=setInterval(()=>{A&&l()},5e3);return()=>clearInterval(w)},[A]);const k=(l,w,_,E)=>{const T=V.findIndex(C=>C.site_id===l&&C.loc_id===w);n(T!==-1?C=>{const $=[...C];return $[T]={...$[T],items:{...$[T].items,[_]:E}},$}:C=>[...C,{site_id:l,loc_id:w,items:{[_]:E}}])};return e.jsxs(ue,{user:c==null?void 0:c.user,children:[e.jsx(ie,{title:"Wireless Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(o.Typography,{variant:"h3",className:"tracking-tight",children:"WNTD"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(ee,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(ee,{href:route("wireless.sites.index"),children:"WNTD"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-2",children:[e.jsxs("div",{className:"search-wrapper w-1/3 flex relative",children:[e.jsx(H,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:a,onChange:l=>B(l.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(o.IconButton,{size:"sm",className:"rounded-l-none",onClick:Q,children:e.jsx(he,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>U("status",l.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>U("solution_type",l.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"device_upgrade",children:"Device Upgrade"}),e.jsx("option",{value:"reparent",children:"Reparent"}),e.jsx("option",{value:"repan",children:"Repan"})]})}),N==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(o.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:f,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:O,ref:b,style:{display:"none"}})]}),e.jsx(_e,{columns:y,additional_columns:p,hidden_columns:d,deleted_columns:i||[]})]}),e.jsx(fe,{route_name:"wireless.sites.export",file_name:"WNTD_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(o.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[y.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(o.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name}),(l==null?void 0:l.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(je,{size:12,strokeWidth:2,onClick:()=>{J(l.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(xe,{size:12,strokeWidth:2,onClick:()=>{J(l.key,"desc")}})})]})]})},l.name)),(p==null?void 0:p.length)>0&&(p==null?void 0:p.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsx("div",{className:"flex justify-between",children:e.jsx(o.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name})})},l.name))),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:z==null?void 0:z.data.map(l=>e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("loc_id")?"hidden":""}`,children:e.jsx(ee,{href:route("wireless.show.location.index",l==null?void 0:l.loc_id),className:"font-semibold underline",children:l==null?void 0:l.loc_id})}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("wntd")?"hidden":""}`,children:l==null?void 0:l.wntd}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("imsi")?"hidden":""}`,children:l==null?void 0:l.imsi}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("version")?"hidden":""}`,children:l==null?void 0:l.version}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("avc")?"hidden":""}`,children:l==null?void 0:l.avc}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("bw_profile")?"hidden":""}`,children:l==null?void 0:l.bw_profile}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lon")?"hidden":""}`,children:l==null?void 0:l.lon}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lat")?"hidden":""}`,children:l==null?void 0:l.lat}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("site_name")?"hidden":""}`,children:l==null?void 0:l.site_name}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("home_cell")?"hidden":""}`,children:l==null?void 0:l.home_cell}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("home_pci")?"hidden":""}`,children:l==null?void 0:l.home_pci}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("traffic_profile")?"hidden":""}`,children:l==null?void 0:l.traffic_profile}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("start_date")?"hidden":""}`,children:e.jsx(le,{value:M(l==null?void 0:l.tracking,"start_date"),name:"start_date",locId:l.loc_id,siteId:l.id,handleEditAbleItem:k})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("end_date")?"hidden":""}`,children:e.jsx(le,{value:M(l==null?void 0:l.tracking,"end_date"),name:"end_date",locId:l.loc_id,siteId:l.id,handleEditAbleItem:k})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("solution_type")?"hidden":""}`,children:e.jsx(re,{value:M(l==null?void 0:l.tracking,"solution_type"),name:"solution_type",locId:l.loc_id,siteId:l.id,handleEditAbleItem:k,options:[{label:"Device Upgrade",value:"device_upgrade"},{label:"Reparent",value:"reparent"},{label:"Repan",value:"repan"}]})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("status")?"hidden":""}`,children:e.jsx(re,{value:M(l==null?void 0:l.tracking,"status"),name:"status",locId:l.loc_id,siteId:l.id,handleEditAbleItem:k,options:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}]})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("remarks")?"hidden":""}`,children:e.jsx(ce,{value:M(l==null?void 0:l.tracking,"remarks"),name:"remarks",locId:l.loc_id,siteId:l.id,handleEditAbleItem:k})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("artifacts")?"hidden":""}`,children:e.jsx(Ne,{value:M(l==null?void 0:l.tracking,"artifacts"),name:"artifacts",locId:l.loc_id,siteId:l.id})}),(p==null?void 0:p.length)>0&&p.map((w,_)=>e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes(w.key)?"hidden":""}`,children:e.jsx(be,{column:w,site:l,value:M(l==null?void 0:l.tracking,w.key),handleEditAbleItem:k})},_)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsx(we,{site_id:l==null?void 0:l.id,changedItems:V,setChangedItems:n})})]},l.id))})]}),((oe=z==null?void 0:z.data)==null?void 0:oe.length)===0&&e.jsx(o.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:S,onChange:l=>{X(l.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${t==null?void 0:t.from}-${t==null?void 0:t.to} of ${t==null?void 0:t.total} Records`}),e.jsx(ve,{links:z==null?void 0:z.links,perPage:S})]})]})}),e.jsx(ge,{mappingDialog:K,setMappingDialog:W,mappingData:Y,setBatchId:L})]})]})}export{Oe as default};
