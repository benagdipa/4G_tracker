import{r as u,j as e,R as re,b as ue,y as Z,u as ae,W as K,c as ie,s as he,d as ne,e as me,Y as je,a as oe}from"./app-okMzQBCh.js";import{r as t}from"./index-BG5T_7Hs.js";import{_ as D,A as Ne}from"./AuthenticatedLayout-u_Ch8pw6.js";import{M as ve,T as xe,P as ye}from"./Pagination-DFLO9fRB.js";import{T as de}from"./TextInput-CqTG-BHC.js";import{I as B}from"./InputLabel-J2I8uczY.js";import{I as R}from"./InputError-ug9kAuqE.js";import{E as ge,P as pe}from"./ExportButton-Bn7KbCbL.js";/* empty css                         */import{U as we}from"./UploadItem-DB4kSxVn.js";import{A as fe}from"./index.esm-DRFmu6w4.js";import"./transition-DtIsPh0T.js";import"./ApplicationLogo-DQ_0DyDy.js";import"./index-BQuVIs4e.js";import"./download-DW4n8o7s.js";function be({mappingDialog:n,setMappingDialog:a,mappingData:s,setBatchId:c}){var P,A,k,S,H,E,q,b,J,L,V,W,U;const d=()=>a(!n),[h,j]=u.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[x,O]=u.useState({}),[y,g]=u.useState(!1),[F,T]=u.useState(""),[w,v]=u.useState(""),f=(l,N)=>{j($=>({...$,[l]:N}))};u.useEffect(()=>{f("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const m=async l=>{var $,Q,ee,Y,se,le;l.preventDefault();let N={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(z=>{h[z]||(N[z]="This field is required.")}),O(N),Object.keys(N).length>0){console.log(N);return}try{g(!0);const z=await ue.post(route("site.field.map.save"),h);z!=null&&z.data&&(v((Q=($=z==null?void 0:z.data)==null?void 0:$.success)==null?void 0:Q.message),c((ee=z==null?void 0:z.data)==null?void 0:ee.batch_id),setTimeout(()=>{a(!1),v(""),T("")},3e3),Z.visit(route("site.field.name.index")))}catch(z){console.log("error:",z),T(`${(le=(se=(Y=z==null?void 0:z.response)==null?void 0:Y.data)==null?void 0:se.error)==null?void 0:le.message}`)}finally{g(!1)}};return e.jsx(re.Fragment,{children:e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"CSV Mapping"}),F&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:F}),w&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:w}),e.jsxs(t.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.site_name,onChange:l=>f("site_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.cell_name,onChange:l=>f("cell_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lon,onChange:l=>f("lon",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((k=s==null?void 0:s.header)==null?void 0:k.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lat,onChange:l=>f("lat",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((S=s==null?void 0:s.header)==null?void 0:S.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.bb_type,onChange:l=>f("bb_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((H=s==null?void 0:s.header)==null?void 0:H.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.rru_type,onChange:l=>f("rru_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((E=s==null?void 0:s.header)==null?void 0:E.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.antenna_type,onChange:l=>f("antenna_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.frequency,onChange:l=>f("frequency",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((b=s==null?void 0:s.header)==null?void 0:b.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.pci,onChange:l=>f("pci",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((J=s==null?void 0:s.header)==null?void 0:J.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.azimuth,onChange:l=>f("azimuth",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.height,onChange:l=>f("height",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((V=s==null?void 0:s.header)==null?void 0:V.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.last_epo,onChange:l=>f("last_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.next_epo,onChange:l=>f("next_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((U=s==null?void 0:s.header)==null?void 0:U.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(R,{message:x.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:d,className:"mr-1",disabled:y,children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:m,loading:y,children:e.jsx("span",{children:"Confirm"})})]})]})})}function Ce(n){const{changedDataFW:a}=ae(c=>c.table),s=async()=>{var c,d,h;if(a.length>0){let j=a.filter(x=>x.site_id===n.data.id)[0];if(j){const x=await axios.post(route("site.field.name.save.item"),{site_id:j==null?void 0:j.site_id,items:j==null?void 0:j.items});(c=x==null?void 0:x.data)!=null&&c.success&&D.success((h=(d=x==null?void 0:x.data)==null?void 0:d.success)==null?void 0:h.message)}}};return e.jsx(t.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:()=>{s()},children:"Save"})}function Se({addColumnDialog:n,setAddColumnDialog:a}){const{data:s,setData:c,post:d,processing:h,errors:j,reset:x}=K({type:"fw_site",name:"",key:"",input_type:"",options:""}),O=y=>{y.preventDefault(),d(route("additional.columns.save.item"),{onSuccess:()=>{a(!1),x()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Add New Column"}),e.jsxs(t.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(B,{value:"Column Name",className:"mb-1"}),e.jsx(de,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:y=>c("name",y.target.value)}),e.jsx(R,{message:j.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(B,{value:"Column Key",className:"mb-1"}),e.jsx(de,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:y=>c("key",y.target.value)}),e.jsx(R,{message:j.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(B,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:y=>c("input_type",y.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(R,{message:j.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(B,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:y=>c("options",y.target.value)}),e.jsx(R,{message:j.options,className:"text-sm font-medium"})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:()=>a(!n),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:y=>O(y),className:"capitalize",loading:h,children:e.jsx("span",{children:"Submit"})})]})]})}function _e({hideColumnDialog:n,setHideColumnDialog:a,columns:s,hidden_columns:c,deleted_columns:d}){const h=()=>a(!n),[j,x]=u.useState([]),{data:O,setData:y,post:g,processing:F,errors:T,reset:w}=K({type:"fw_site",key:"hide",items:(c==null?void 0:c.length)>0?c:[],names:[]});u.useEffect(()=>{n&&x(m=>[...s])},[n]);const v=(m,P,A)=>{const k=m.target.checked;y(S=>{var H;return k?{...S,items:[...S.items,P],names:[...S.names,A]}:{...S,items:S.items.filter(E=>E!==P),names:(H=S==null?void 0:S.names)==null?void 0:H.filter(E=>E!==A)}})},f=m=>{m.preventDefault(),g(route("hide.columns.item"),{onSuccess:()=>{a(!1),w()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Hide Column"}),e.jsx(t.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(j==null?void 0:j.length)>0&&j.map((m,P)=>e.jsx(re.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:m==null?void 0:m.headerName}),onChange:A=>v(A,m==null?void 0:m.field,m==null?void 0:m.headerName),defaultChecked:c==null?void 0:c.includes(m==null?void 0:m.field)})},P))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:h,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:m=>{f(m)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function ke({renameColumnDialog:n,setRenameColumnDialog:a,columns:s,deleted_columns:c}){var T;const{data:d,setData:h,post:j,processing:x,errors:O,reset:y}=K({type:"fw_site",key:"rename",items:[]});u.useEffect(()=>{n&&h(w=>{const v=[...s.filter(f=>!c.includes(f.key)).map(f=>({key:f.key,name:f.name}))];return{...w,items:v}})},[n]);const g=(w,v)=>{h(f=>({...f,items:f.items.map(m=>m.key===w?{...m,name:v}:m)}))},F=w=>{w.preventDefault(),j(route("rename.columns.item"),{onSuccess:()=>{a(!1),y()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Rename Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(d==null?void 0:d.items.length)>0&&((T=d==null?void 0:d.items)==null?void 0:T.map((w,v)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(de,{className:"w-full text-sm font-medium text-gray-600",value:w==null?void 0:w.name,onChange:f=>g(w==null?void 0:w.key,f.target.value)})},v)))})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:w=>F(w),loading:x,children:"Submit"})]})]})}function Ee({deleteColumnDialog:n,setDeleteColumnDialog:a,columns:s,deleted_columns:c}){const{data:d,setData:h,post:j,processing:x,errors:O,reset:y}=K({type:"fw_site",key:"delete",items:[]}),[g,F]=u.useState([]);u.useEffect(()=>{n&&F(v=>[...s.filter(m=>!c.includes(m.key)).map(m=>({key:m.key,name:m.name}))])},[n]);const T=(v,f)=>{const m=v.target.checked;h(P=>m?{...P,items:[...P.items,f]}:{...P,items:P.items.filter(A=>A!==f)})},w=v=>{v.preventDefault(),j(route("delete.columns.item"),{onSuccess:()=>{a(!1),y()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Delete Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(g==null?void 0:g.length)>0&&g.map((v,f)=>e.jsx(re.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:v==null?void 0:v.name}),onChange:m=>{T(m,v==null?void 0:v.key)}})},f))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:v=>{w(v)},loading:x,children:"Submit"})]})]})}function ze({arrangeColumnDialog:n,setArrangeColumnDialog:a,columns:s,deleted_columns:c}){const[d,h]=u.useState([]),[j,x]=u.useState(null),{data:O,setData:y,post:g,processing:F,errors:T,reset:w}=K({type:"fw_site",key:"arrange",items:[]});u.useEffect(()=>{n&&h(k=>[...(E=>E.map((q,b)=>({...q,position:b+1})))(s.filter(E=>!c.includes(E.key)).map(E=>({key:E.key,name:E.name})))])},[n]);const v=(k,S)=>{x(S)},f=()=>{x(null)},m=k=>{k.preventDefault()},P=(k,S)=>{if(!j)return;const H=d.indexOf(j),E=d.indexOf(S);if(H!==-1&&E!==-1){const b=[...(W=>W.map((U,l)=>({...U,position:l+1})))(d)],[J]=b.splice(H,1);b.splice(E,0,J);const L=b.map((W,U)=>({...W,position:U+1}));h(L);const V=L.map(W=>({key:W.key,position:W.position}));y("items",V)}},A=k=>{k.preventDefault(),g(route("rearrange.columns.item"),{onSuccess:()=>{a(!1),w()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((k,S)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:H=>v(H,k),onDragEnd:f,onDragOver:m,onDrop:H=>P(H,k),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(ve,{strokeWidth:1.5,size:18})}),k.name]})},S)))})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>a(!1),children:"cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:k=>A(k),loading:F,children:"Submit"})]})]})}function Pe({columns:n,hidden_columns:a,deleted_columns:s,hideColumnDialog:c,setHideColumnDialog:d}){const[h,j]=u.useState(!1),[x,O]=u.useState(!1),[y,g]=u.useState(!1),[F,T]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{j(!0)},children:"Add New Column"}),e.jsx(Se,{addColumnDialog:h,setAddColumnDialog:j}),e.jsx(_e,{hideColumnDialog:c,setHideColumnDialog:d,columns:n,hidden_columns:a,deleted_columns:s}),e.jsx(ke,{renameColumnDialog:x,setRenameColumnDialog:O,columns:n,deleted_columns:s}),e.jsx(Ee,{deleteColumnDialog:y,setDeleteColumnDialog:g,columns:n,deleted_columns:s}),e.jsx(ze,{arrangeColumnDialog:F,setArrangeColumnDialog:T,columns:n,deleted_columns:s})]})}function Ie({site_id:n}){const{processing:a,delete:s}=K(),[c,d]=u.useState(!1),h={onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},j=()=>{s(route("site.field.name.destroy",n),{preserveScroll:!0,onSuccess:()=>{Z.visit(route("site.field.name.index"))}})};return e.jsx(re.Fragment,{children:e.jsxs(t.Popover,{placement:"top-end",open:c,handler:d,children:[e.jsx(t.PopoverHandler,{...h,children:e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:()=>setOpen(!0),children:e.jsx(xe,{size:14})})}),e.jsxs(t.PopoverContent,{...h,className:"px-3",children:[e.jsx(t.Typography,{variant:"h6",className:"text-center",children:"Are you sure?"}),e.jsx(t.Typography,{variant:"small",className:"font-normal",children:"This cannot be reverted back."}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx(t.Button,{variant:"text",color:"red",size:"sm",className:"capitalize rounded",onClick:()=>d(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize rounded",onClick:j,children:"Delete"})]})]})]})})}const Be=()=>{const n=ie(),{addNewRowDataFW:a}=ae(d=>d.table),s=d=>{if(console.log(a),d.preventDefault(),!a.site_name)return D.error("Site name is required");Z.post(route("site.field.name.add.row"),{newItem:a},{onSuccess:()=>{n(ne(!1)),D.success("Row Added successfully")}})},c=()=>{n(ne(!1)),he({})};return e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:s,children:"Save"}),e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:c,children:e.jsx(xe,{size:14})})]})};function Re({setAddNewRow:n}){const a=ie(),{addNewRowDataFW:s}=ae(g=>g.table),c=["opti_type_1","opti_type_5","opti_type_6"],d=["in_progress","not_started","completed"],h=u.useMemo(()=>({editable:!0})),[j]=u.useState([{headerName:"Site Name",field:"site_name"},{headerName:"Cell Name",field:"cell_name"},{headerName:"Lon",field:"lon"},{headerName:"Lat",field:"lat"},{headerName:"BB Type",field:"bb_type"},{headerName:"RRU Type",field:"rru_type"},{headerName:"Antenna Type",field:"antenna_type"},{headerName:"Frequency",field:"frequency"},{headerName:"PCI",field:"pci"},{headerName:"Azimuth",field:"azimuth"},{headerName:"Height",field:"height"},{headerName:"Last EPO",field:"last_epo"},{headerName:"Next EPO",field:"next_epo"},{headerName:"Start Date",field:"start_date"},{headerName:"End Date",field:"end_date"},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:c}},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:d}},{headerName:"Remarks",field:"remarks"},{headerName:"Artifacts",field:"artifacts",editable:!1},{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:Be}]),[x,O]=u.useState([{loc_id:"",wntd:"",imsi:"",version:"",avc:"",bw_profile:"",lon:"",lat:"",site_name:"",home_cell:"",home_pci:"",traffic_profile:"",deleted_at:null,remarks:"",artifacts:"",solution_type:"",start_date:new Date,status:"",end_date:new Date}]),y=g=>{var T;const F={...s};a(he({...F,[(T=g==null?void 0:g.colDef)==null?void 0:T.field]:g==null?void 0:g.value}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto overflow-hidden",children:e.jsx("div",{className:"ag-theme-quartz",style:{height:100},children:e.jsx(fe,{rowData:x,columnDefs:j,defaultColDef:h,onCellValueChanged:y})})})})}const Fe=n=>{var a,s;return e.jsx(oe,{href:route("site.field.name.show",(a=n==null?void 0:n.data)==null?void 0:a.id),className:"font-semibold underline",children:(s=n==null?void 0:n.data)==null?void 0:s.site_name})},Te=n=>e.jsxs("div",{className:"flex gap-5 my-2",children:[e.jsx(Ce,{...n}),e.jsx(Ie,{...n})]});function Xe({auth:n,sites:a,get_data:s,batch:c,additional_columns:d,hidden_columns_names:h,hidden_columns:j,renamed_columns:x,deleted_columns:O,arrange_columns:y}){var ce;const[g,F]=u.useState(!1),v=[{headerName:"Site Name",field:"site_name",cellRenderer:Fe,position:1},{headerName:"Cell Name",field:"cell_name",position:2},{headerName:"Lon",field:"lon",position:3},{headerName:"Lat",field:"lat",position:4},{headerName:"BB Type",field:"bb_type",position:5},{headerName:"RRU Type",field:"rru_type",position:6},{headerName:"Antenna Type",field:"antenna_type",position:7},{headerName:"Frequency",field:"frequency",position:8},{headerName:"PCI",field:"pci",position:9},{headerName:"Azimuth",field:"azimuth",position:10},{headerName:"Height",field:"height",position:11},{headerName:"Last EPO",field:"last_epo",position:12},{headerName:"Next EPO",field:"next_epo",position:13},{headerName:"Start Date",field:"start_date",input_type:"date",valueFormatter:r=>{if(!r.value)return"";const i=r.value.getMonth()+1,p=r.value.getDate();return`${r.value.getFullYear()}-${i<10?"0"+i:i}-${p<10?"0"+p:p}`},cellEditor:"agDateCellEditor",filter:!1,position:14},{headerName:"End Date",field:"end_date",valueFormatter:r=>{if(!r.value)return"";const i=r.value.getMonth()+1,p=r.value.getDate();return`${r.value.getFullYear()}-${i<10?"0"+i:i}-${p<10?"0"+p:p}`},cellEditor:"agDateCellEditor",filter:!1,position:15},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:["opti_type_1","opti_type_5","opti_type_6"]},position:16},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:["in_progress","not_started","completed"]},position:17},{headerName:"Remarks",field:"remarks",position:18},{headerName:"Artifacts",field:"artifacts",cellRenderer:we,editable:!1,position:19}],f=u.useRef(),{role:m}=n,P=ie(),{addNewRowFW:A}=ae(r=>r.table),k=u.useMemo(()=>({editable:!0,filter:!0}));u.useEffect(()=>{var r;((r=a==null?void 0:a.data)==null?void 0:r.length)>0&&(a==null||a.data.map(i=>{if(i.end_date||i.start_date){let p=i!=null&&i.end_date?new Date(i==null?void 0:i.end_date):new Date,C=i!=null&&i.start_date?new Date(i==null?void 0:i.start_date):new Date;i.start_date=C,i.end_date=p}return i}),J(a))},[a==null?void 0:a.data]);const[S,H]=u.useState();u.useRef(null),u.useState(s!=null&&s.search?s==null?void 0:s.search:"");const[E,q]=u.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[b,J]=u.useState([]),[L,V]=u.useState(!1),[W,U]=u.useState(""),[l,N]=u.useState(null),[$,Q]=u.useState([]);function ee(r){if(r==null)return[];let i=[];return r.forEach(C=>{C&&i.push(C)}),[...new Set([...i])]}const Y=ee(j);u.useEffect(()=>{function r(i){const p=[...v],C=i==null?void 0:i.map((o,I)=>{let M={};return(o==null?void 0:o.input_type)==="date"?M={headerName:o==null?void 0:o.name.toUpperCase(),field:o==null?void 0:o.key,position:v.length+I+1,valueFormatter:G=>{if(!G.value)return"";const X=G.value.getMonth()+1,te=G.value.getDate();return`${G.value.getFullYear()}-${X<10?"0"+X:X}-${te<10?"0"+te:te}`},cellEditor:"agDateCellEditor",filter:!1}:(o==null?void 0:o.input_type)==="text"?M={headerName:o==null?void 0:o.name.toUpperCase(),field:o==null?void 0:o.key,position:v.length+I+1}:(o==null?void 0:o.input_type)==="dropdown"&&(M={headerName:o==null?void 0:o.name.toUpperCase(),field:o==null?void 0:o.key,position:v.length+I+1,cellEditorParams:{values:JSON.parse(o==null?void 0:o.options)}}),M});Y&&(p.forEach(o=>{Y.find(M=>o.field===M)?o.hide=!0:o.hide=!1}),C.forEach(o=>{Y.find(M=>M===o.field)?o.hide=!0:o.hide=!1}));const _=[...p,...C,{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:Te}];H(_)}(d==null?void 0:d.length)>0&&r(d)},[d]),u.useEffect(()=>{$.length>0&&P(me($))},[$]);const se=r=>{const i=$.findIndex(p=>{var C,_;return p.site_id===((C=r==null?void 0:r.data)==null?void 0:C.id)&&p.loc_id===((_=r==null?void 0:r.data)==null?void 0:_.loc_id)});Q(i!==-1?p=>{var _;const C=[...p];return C[i]={...C[i],items:{...C[i].items,[(_=r==null?void 0:r.colDef)==null?void 0:_.field]:r==null?void 0:r.value}},C}:p=>{var C,_,o;return[...p,{site_id:(C=r==null?void 0:r.data)==null?void 0:C.id,loc_id:(_=r==null?void 0:r.data)==null?void 0:_.loc_id,items:{[(o=r==null?void 0:r.colDef)==null?void 0:o.field]:r==null?void 0:r.value}}]})},le=r=>{q(r),Z.get(route("site.field.name.index",{...s,per_page:r}))};u.useEffect(()=>{c!=null&&c.batch_field_id&&N(c==null?void 0:c.batch_field_id)},[]),u.useEffect(()=>{const r=async()=>{var p,C,_;try{let o=0;const I=await ue.get(route("import.progress",{batchId:l}));if(I!=null&&I.data){let M=parseInt((p=I==null?void 0:I.data)==null?void 0:p.total_jobs),G=parseInt((C=I==null?void 0:I.data)==null?void 0:C.pending_jobs),X=M-G;parseInt((_=I==null?void 0:I.data)==null?void 0:_.failed_jobs)>0?clearInterval(i):(o=parseInt(X/M*100).toFixed(0),o<100?D.loading(`CSV Data Import Progress: ${o}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(D.dismiss("loading-toast"),clearInterval(i)))}}catch(o){console.log(o)}},i=setInterval(()=>{l&&r()},5e3);return()=>clearInterval(i)},[l]);const z=()=>{var i;((i=f.current.props)==null?void 0:i.columnDefs).forEach(p=>{const C=p.field,_=f.current.api.getColumnFilterModel(C);_!=null&&_.filter&&Z.get(route("site.field.name.index",{search:_==null?void 0:_.filter}))})};return e.jsxs(Ne,{user:n==null?void 0:n.user,children:[e.jsx(je,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsxs("div",{className:"bg-white shadow rounded py-3 px-5 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(t.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(oe,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(oe,{href:route("site.field.name.index"),children:"FW Site"})})]})]})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[m==="super-admin"&&e.jsx(e.Fragment,{}),e.jsx(ge,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(t.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[(b==null?void 0:b.data)&&((ce=b==null?void 0:b.data)==null?void 0:ce.length)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"ag-theme-quartz w-full",style:{height:500},children:e.jsx(fe,{ref:f,rowData:b==null?void 0:b.data,columnDefs:S,defaultColDef:k,onCellValueChanged:se,onFilterChanged:z})}),e.jsx("div",{className:"w-[40px]",children:e.jsx("div",{className:"border flex justify-center rounded cursor-pointer",onClick:()=>F(!0),children:e.jsxs("p",{className:"column-hide-show py-10 flex gap-2",children:[e.jsx(pe,{size:22}),"Columns"]})})})]}),A&&e.jsx(Re,{tableHeader:S})]}),(b==null?void 0:b.length)===0&&e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"pagination flex justify-between items-center",children:[e.jsxs("div",{className:"px-4 flex gap-5",children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{P(ne(!0))},children:"Add New Row"}),e.jsx(Pe,{setHideColumnDialog:F,hideColumnDialog:g,columns:S,hidden_columns:j,deleted_columns:O||[]})]}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:E,onChange:r=>{le(r.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${a==null?void 0:a.from}-${a==null?void 0:a.to} of ${a==null?void 0:a.total} Records`}),e.jsx(ye,{links:b==null?void 0:b.links,perPage:E})]})]})]})}),e.jsx(be,{mappingDialog:L,setMappingDialog:V,mappingData:W,setBatchId:N})]})]})}export{Xe as default};
