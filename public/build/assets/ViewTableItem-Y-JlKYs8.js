import{q as _,r as v,j as e,R as y,y as V,W as D,Y as U,a as R}from"./app-DeLmO0Bi.js";import{c as L,_ as W,A as $,C as J}from"./AuthenticatedLayout-CA3nIOjT.js";import{r}from"./index-BszEVVV4.js";import{T as M}from"./TextInput-BvYIUaQA.js";import{I as F}from"./InputLabel-_6s0VwAi.js";import{I as H}from"./InputError-BQ8TFyWD.js";import{M as q,T as Y,D as G,S as K,C as Q}from"./react-datepicker-BKxJk6K2.js";import{u as X,F as E,I as Z}from"./index-CPj8U-Id.js";import"./transition-CTljDeXP.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=L("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function se({mappingDialog:l,setMappingDialog:s,columns:a,mappingData:n}){const{id:i,slug:x}=_().props.entity,u=a==null?void 0:a.reduce((m,w)=>(m[w.slug]="",m),{}),[h,o]=v.useState({...u,file_path:n?n==null?void 0:n.filePath:"",entity_id:i}),[g,b]=v.useState({}),[c,d]=v.useState(!1),[t,p]=v.useState(""),[j,N]=v.useState(""),z=()=>s(!l),f=(m,w)=>{o(k=>({...k,[m]:w}))};v.useEffect(()=>{f("file_path",n!=null&&n.filePath?n==null?void 0:n.filePath:"")},[n]);const S=async m=>{var k,I,B,T,O;m.preventDefault();let w={};if(Object.keys(h).forEach(C=>{h[C]||(w[C]="This field is required.")}),b(w),Object.keys(w).length>0){console.log(w);return}try{d(!0);const C=await axios.post(route("table.map.save"),h);C!=null&&C.data&&(N((I=(k=C==null?void 0:C.data)==null?void 0:k.success)==null?void 0:I.message),setTimeout(()=>{s(!1),N(""),p("")},3e3),V.visit(route("view.table.item",x)))}catch(C){console.log("error:",C),p(`${(O=(T=(B=C==null?void 0:C.response)==null?void 0:B.data)==null?void 0:T.error)==null?void 0:O.message}`)}finally{d(!1)}};return e.jsx(y.Fragment,{children:e.jsxs(r.Dialog,{open:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"CSV Mapping"}),e.jsx(r.DialogBody,{className:"px-6 overflow-scroll",children:(a==null?void 0:a.length)>0&&(a==null?void 0:a.map((m,w)=>{var k;return e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{value:m==null?void 0:m.name,className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h[m==null?void 0:m.slug],onChange:I=>f(m==null?void 0:m.slug,I.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((k=n==null?void 0:n.header)==null?void 0:k.length)>0&&(n==null?void 0:n.header.map((I,B)=>e.jsx("option",{value:I,children:I},B)))]}),e.jsx(H,{message:g[m==null?void 0:m.slug],className:"!text-[12px] font-medium mt-1"})]})]})},w)}))}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:z,className:"mr-1 capitalize",disabled:c,children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:S,loading:c,children:e.jsx("span",{children:"Confirm"})})]})]})})}function re({columns:l}){const s=v.useRef(null),[a,n]=v.useState(!1),[i,x]=v.useState(""),u=o=>{s.current.click()},h=async o=>{var b,c,d;const g=new FormData;g.append("import_file",o.target.files[0]);try{const t=await axios.post(route("table.import.csv"),g);t!=null&&t.data&&(x(t==null?void 0:t.data),n(!0))}catch(t){W.error(`${(d=(c=(b=t==null?void 0:t.response)==null?void 0:b.data)==null?void 0:c.error)==null?void 0:d.message}`)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(r.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:u,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:h,ref:s,style:{display:"none"}})]}),e.jsx(se,{mappingDialog:a,setMappingDialog:n,mappingData:i,columns:l})]})}function ne({addColumnDialog:l,setAddColumnDialog:s}){var b;const{id:a}=(b=_().props)==null?void 0:b.entity,{data:n,setData:i,post:x,processing:u,errors:h,reset:o}=D({entity_id:a,name:"",slug:"",sortable:!1,editable:!1,input_type:"",options:""}),g=c=>{c.preventDefault(),x(route("table.add.column"),{onSuccess:()=>{s(!1),o()}})};return e.jsxs(r.Dialog,{open:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Add New Column"}),e.jsxs(r.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Name",className:"mb-1"}),e.jsx(M,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:n.name,onChange:c=>i("name",c.target.value)}),e.jsx(H,{message:h.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Slug",className:"mb-1"}),e.jsx(M,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column slug...",value:n.slug,onChange:c=>i("slug",c.target.value)}),e.jsx(H,{message:h.slug,className:"text-sm font-medium"})]}),e.jsx("div",{className:"form-item",children:e.jsx(r.Checkbox,{label:e.jsx(r.Typography,{className:"text-sm font-medium pl-2",children:"Sortable"}),defaultChecked:n.sortable,onChange:c=>i("sortable",c.target.checked)})}),e.jsx("div",{className:"form-item",children:e.jsx(r.Checkbox,{label:e.jsx(r.Typography,{className:"text-sm font-medium pl-2",children:"Editable"}),defaultChecked:n.editable,onChange:c=>i("editable",c.target.checked)})}),(n==null?void 0:n.editable)&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:n.input_type,onChange:c=>i("input_type",c.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(H,{message:h.input_type,className:"text-sm font-medium"})]}),(n==null?void 0:n.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(F,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:n.options,onChange:c=>i("options",c.target.value)}),e.jsx(H,{message:h.options,className:"text-sm font-medium"})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:()=>s(!l),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:c=>g(c),className:"capitalize",loading:u,children:e.jsx("span",{children:"Submit"})})]})]})}function le({hideColumnDialog:l,setHideColumnDialog:s,columns:a}){const n=()=>s(!l),{data:i,setData:x,post:u,processing:h,errors:o,reset:g}=D({items:[],unHiddenItems:[]}),b=d=>{const{value:t,checked:p}=d.target;p?(x(j=>({...j,items:[...j.items,parseInt(t)]})),x(j=>({...j,unHiddenItems:j.unHiddenItems.filter(N=>N!==parseInt(t))}))):(x(j=>({...j,items:j.items.filter(N=>N!==parseInt(t))})),x(j=>({...j,unHiddenItems:[...j.unHiddenItems,parseInt(t)]})))},c=d=>{d.preventDefault(),u(route("table.hide.column"),{onSuccess:()=>{s(!1),g()}})};return e.jsx(e.Fragment,{children:e.jsxs(r.Dialog,{open:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Hide Column"}),e.jsx(r.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(a==null?void 0:a.length)>0&&a.map((d,t)=>e.jsx(y.Fragment,{children:e.jsx(r.Checkbox,{label:e.jsx(r.Typography,{color:"blue-gray",className:"font-medium text-sm",children:d==null?void 0:d.name}),value:d==null?void 0:d.id,onChange:p=>b(p),defaultChecked:d==null?void 0:d.hidden})},t))})]})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:n,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:d=>{c(d)},loading:h,children:e.jsx("span",{children:"Confirm"})})]})]})})}function ae({renameColumnDialog:l,setRenameColumnDialog:s,columns:a}){var c,d;const{data:n,setData:i,post:x,processing:u,errors:h,reset:o}=D({items:a}),g=(t,p)=>{i(j=>({...j,items:j.items.map(N=>N.slug===t?{...N,name:p}:N)}))},b=t=>{t.preventDefault(),x(route("table.rename.column"),{onSuccess:()=>{s(!1),o()}})};return e.jsxs(r.Dialog,{open:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Rename Columns"}),e.jsx(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:((c=n==null?void 0:n.items)==null?void 0:c.length)>0&&((d=n==null?void 0:n.items)==null?void 0:d.map((t,p)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(M,{className:"w-full text-sm font-medium text-gray-600",value:t!=null&&t.alternative_name?t==null?void 0:t.alternative_name:t==null?void 0:t.name,onChange:j=>g(t==null?void 0:t.slug,j.target.value)})},p)))})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>s(!1),children:"Cancel"}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:t=>b(t),loading:u,children:"Submit"})]})]})}function te({deleteColumnDialog:l,setDeleteColumnDialog:s,columns:a}){const{data:n,setData:i,post:x,processing:u,errors:h,reset:o}=D({items:[]}),g=(c,d)=>{const t=c.target.checked;i(p=>t?{...p,items:[...p.items,d]}:{...p,items:p.items.filter(j=>j!==d)})},b=c=>{c.preventDefault(),x(route("table.delete.column"),{onSuccess:()=>{s(!1),o()}})};return e.jsxs(r.Dialog,{size:"xs",open:l,children:[e.jsx(r.DialogHeader,{children:"Delete Columns"}),e.jsx(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(a==null?void 0:a.length)>0&&a.map((c,d)=>e.jsx(y.Fragment,{children:e.jsx(r.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(r.Typography,{color:"blue-gray",className:"font-medium text-sm",children:c!=null&&c.alternative_name?c==null?void 0:c.alternative_name:c==null?void 0:c.name}),onChange:t=>{g(t,c==null?void 0:c.id)}})},d))})]})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:()=>s(!1),children:"Cancel"}),e.jsx(r.Button,{variant:"text",color:"red",onClick:c=>b(c),children:"Delete"})]})]})}function oe({arrangeColumnDialog:l,setArrangeColumnDialog:s,columns:a}){const[n,i]=v.useState([]),[x,u]=v.useState(null),{data:h,setData:o,post:g,processing:b,errors:c,reset:d}=D({items:[]});v.useEffect(()=>{l&&i(a)},[l]);const t=(f,S)=>{u(S)},p=()=>{u(null)},j=f=>{f.preventDefault()},N=(f,S)=>{if(!x)return;const m=n.indexOf(x),w=n.indexOf(S);if(m!==-1&&w!==-1){const I=[...(C=>C.map((P,A)=>({...P,position:A+1})))(n)],[B]=I.splice(m,1);I.splice(w,0,B);const T=I.map((C,P)=>({...C,position:P+1}));i(T);const O=T.map(C=>({slug:C.slug,position:C.position}));o("items",O)}},z=f=>{f.preventDefault(),g(route("table.rearrange.column"),{onSuccess:()=>{s(!1),d()}})};return e.jsxs(r.Dialog,{open:l,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(n==null?void 0:n.length)>0&&(n==null?void 0:n.map((f,S)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:m=>t(m,f),onDragEnd:p,onDragOver:j,onDrop:m=>N(m,f),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(q,{strokeWidth:1.5,size:18})}),f!=null&&f.alternative_name?f==null?void 0:f.alternative_name:f.name]})},S)))})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>s(!1),children:"cancel"}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:f=>z(f),loading:b,children:"Submit"})]})]})}function ce({columns:l}){const[s,a]=v.useState(!1),[n,i]=v.useState(!1),[x,u]=v.useState(!1),[h,o]=v.useState(!1),[g,b]=v.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(r.Menu,{children:[e.jsx(r.MenuHandler,{children:e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(r.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(r.MenuItem,{onClick:()=>{a(!0)},children:"Add Column"}),e.jsx(r.MenuItem,{onClick:()=>{i(!0)},children:"Show/Hide Columns"}),e.jsx(r.MenuItem,{onClick:()=>{u(!0)},children:"Rename Columns"}),e.jsx(r.MenuItem,{onClick:()=>{b(!0)},children:"Rearrange Columns"}),e.jsx(r.MenuItem,{className:"text-red-500",onClick:()=>{o(!0)},children:"Delete Columns"})]})]}),e.jsx(ne,{addColumnDialog:s,setAddColumnDialog:a}),e.jsx(le,{columns:l,hideColumnDialog:n,setHideColumnDialog:i}),e.jsx(ae,{renameColumnDialog:x,setRenameColumnDialog:u,columns:l}),e.jsx(te,{deleteColumnDialog:h,setDeleteColumnDialog:o,columns:l}),e.jsx(oe,{arrangeColumnDialog:g,setArrangeColumnDialog:b,columns:l})]})}function ie({entity_id:l}){const{post:s,processing:a,reset:n}=D({entity_id:l}),i=()=>{l&&s(route("table.restore.column"),{preserveScroll:!0,onSuccess:()=>{n()}})};return e.jsx("div",{className:"restore-table",children:e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize",loading:a,onClick:i,children:"Restore Table"})})}function de({deleteTableDialog:l,setDeleteTableDialog:s,tableId:a}){const{processing:n,delete:i}=D(),x=()=>{a&&i(route("table.delete",a),{preserveScroll:!0,onSuccess:()=>{V.visit(route("dashboard"))}})};return e.jsx(e.Fragment,{children:e.jsxs(r.Dialog,{open:l,size:"xs",className:"rounded py-5",children:[e.jsxs(r.DialogBody,{children:[e.jsx(r.Typography,{variant:"h4",className:"text-center",color:"black",children:"Are you sure?"}),e.jsx("p",{className:"font-medium text-center",children:"This step is permanent and cannot be undone."})]}),e.jsxs(r.DialogFooter,{className:"justify-center",children:[e.jsx(r.Button,{variant:"gradient",className:"mr-1",onClick:()=>{s(!1)},disabled:n,children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"red",onClick:x,loading:n,children:e.jsx("span",{children:"Confirm"})})]})]})})}function ue({valueId:l}){var o;const{slug:s}=(o=_().props)==null?void 0:o.entity,{processing:a,delete:n}=D(),[i,x]=v.useState(!1),u={onClick:()=>x(!i)},h=()=>{l&&n(route("table.delete.row",l),{preserveScroll:!0,onSuccess:()=>{V.visit(route("view.table.item",s))}})};return e.jsx(y.Fragment,{children:e.jsxs(r.Popover,{placement:"top-end",open:i,handler:x,children:[e.jsx(r.PopoverHandler,{...u,children:e.jsx(r.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:()=>setOpen(!0),children:e.jsx(Y,{size:14})})}),e.jsxs(r.PopoverContent,{...u,className:"px-3",children:[e.jsx(r.Typography,{variant:"h6",className:"text-center",children:"Are you sure?"}),e.jsx(r.Typography,{variant:"small",className:"font-normal",children:"This cannot be reverted back."}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx(r.Button,{variant:"text",color:"red",size:"sm",className:"capitalize rounded",onClick:()=>x(!1),disabled:a,children:"Cancel"}),e.jsx(r.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize rounded",onClick:h,loading:a,children:"Delete"})]})]})]})})}function xe({changed:l,handleOnSave:s}){return e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!l,onClick:s,children:"Save"})}function me({value:l,handleItemChange:s,headerSlug:a}){const[n,i]=v.useState(l||""),x=u=>{i(u.target.value),s(a,u.target.value)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full resize-none",value:n,rows:1,onChange:u=>{x(u)}})})}function he({value:l,handleItemChange:s,headerSlug:a}){function n(h){return!isNaN(Date.parse(h))}const[i,x]=v.useState(n(l)?l:""),u=h=>{x(h),s(a,h)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(G,{selected:i,onChange:h=>u(h),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function pe({value:l,handleItemChange:s,headerSlug:a,options:n}){const[i,x]=v.useState(l||""),u=o=>{x(o),s(a,o)},h=JSON.parse(n);return e.jsx("div",{className:"w-full h-full min-w-32",children:e.jsxs("select",{value:i,onChange:o=>{u(o.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium px-1",children:[e.jsx("option",{value:"",children:"Select"}),(h==null?void 0:h.length)>0&&h.map((o,g)=>e.jsx("option",{value:o,children:o},g))]})})}function ge({value:l,headerSlug:s,columnId:a}){const[n,i]=v.useState(!1),x=()=>i(!n),{data:u,setData:h,post:o,processing:g,reset:b}=D({columnId:a,headerSlug:s,artifacts:[]}),{getRootProps:c,getInputProps:d}=X({onDrop:N=>{h("artifacts",[...u.artifacts,...N.map(z=>Object.assign(z,{preview:URL.createObjectURL(z)}))])}}),t=u==null?void 0:u.artifacts.map(N=>e.jsxs("li",{children:[N.path," - ",N.size," bytes"]},N.path)),p=()=>{o(route("table.upload.row.artifacts",a),{preserveScroll:!0,onSuccess:()=>{b(),i(!1)}})},j=({files:N})=>{if(N){const z=JSON.parse(N),f=m=>m.split(".").pop(),S=m=>{const w=m.split("/");let k=w[w.length-1];return k=k.replace(/^\d+_/,""),k};return e.jsx("div",{className:"flex ps-2",children:z.map((m,w)=>e.jsxs("div",{className:"my-2",children:[f(m)==="csv"&&e.jsx(r.Tooltip,{content:S(m),children:e.jsx(E,{size:18})}),f(m)==="xlsx"&&e.jsx(r.Tooltip,{content:S(m),children:e.jsx(E,{size:18})}),f(m)==="xls"&&e.jsx(r.Tooltip,{content:S(m),children:e.jsx(E,{size:18})}),f(m)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),f(m)==="pdf"&&e.jsx(r.Tooltip,{content:S(m),children:e.jsx(Z,{})})]},w))})}};return e.jsxs("div",{className:"w-full h-full flex items-center",children:[e.jsx("button",{className:"font-medium text-[12px] mt-2 border py-1 px-2 rounded",onClick:x,children:"Uplaod"}),l&&e.jsx(j,{files:l||""}),e.jsxs(r.Dialog,{open:n,handler:x,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(r.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...c({className:"dropzone"}),children:[e.jsx("input",{...d()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(u==null?void 0:u.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:t})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:x,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:p,loading:g,children:e.jsx("span",{children:"Confirm"})})]})]})]})}const je={text:me,date:he,dropdown:pe,upload:ge};function fe({header:l,itemValue:s,handleItemChange:a,columnId:n}){const i=je[l==null?void 0:l.input_type];return e.jsx(y.Fragment,{children:e.jsx(i,{value:s,handleItemChange:a,headerSlug:l.slug,options:l==null?void 0:l.input_options,columnId:n})})}function be({columnId:l,header:s,itemValue:a,handleItemChange:n}){return e.jsx(y.Fragment,{children:e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${s!=null&&s.hidden?"hidden":""}`,children:s!=null&&s.editable?e.jsx(fe,{header:s,itemValue:a,handleItemChange:n,columnId:l}):a})})}function ve({headers:l,values:s,valueId:a}){const[n,i]=v.useState(!1),{data:x,setData:u,post:h}=D({changedItems:[...s]});function o(d,t){for(let p=0;p<d.length;p++)if(t in d[p])return d[p][t];return""}function g(d,t){for(let p=0;p<t.length;p++)if(d in t[p])return p;return-1}const b=(d,t)=>{let p=x.changedItems,j=g(d,p);j!==-1&&(p[j][d]=t,u("changedItems",p),i(!0))},c=async()=>{h(route("table.save.row",a),{onSuccess:()=>{i(!1)}})};return e.jsx(y.Fragment,{children:e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[l.length&&l.map((d,t)=>e.jsx(be,{columnId:a,header:d,itemValue:o(s,d.slug),handleItemChange:b},t)),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(xe,{changed:n,handleOnSave:c}),e.jsx(ue,{valueId:a})]})})]})})}function Be({auth:l,entity:s}){var x,u,h;const{role:a}=l,[n,i]=v.useState(!1);return e.jsxs($,{user:l==null?void 0:l.user,children:[e.jsx(U,{title:s==null?void 0:s.title}),e.jsx("div",{className:"top-section p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx(r.Typography,{variant:"h3",className:"tracking-tight",children:s==null?void 0:s.title}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(R,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(R,{href:route("view.table.item",s==null?void 0:s.slug),children:s==null?void 0:s.title})})]})]}),e.jsxs("div",{children:[e.jsxs(r.Menu,{children:[e.jsx(r.MenuHandler,{children:e.jsx(r.Button,{variant:"text",size:"sm",children:e.jsx(ee,{size:18,color:"gray"})})}),e.jsx(r.MenuList,{className:"font-semibold text-gray-600 max-w-32",children:e.jsx(r.MenuItem,{onClick:()=>{i(!0)},className:"text-red-500 hover:!text-red-500",children:"Delete"})})]}),e.jsx(de,{deleteTableDialog:n,setDeleteTableDialog:i,tableId:s==null?void 0:s.id})]})]})}),(s==null?void 0:s.attributes.length)===0&&e.jsxs("div",{className:"text-center border rounded py-6",children:[e.jsx(r.Typography,{variant:"h4",color:"blue-gray",className:"mb-3",children:"It seems you haven't created any columns yet."}),e.jsx(R,{href:route("table.wizard.column.index",s==null?void 0:s.id),children:e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Create Column"})})]}),(s==null?void 0:s.attributes.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-2",children:[e.jsxs("div",{className:"search-wrapper w-1/6 flex relative",children:[e.jsx(M,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8"}),e.jsx("div",{className:"search-icon",children:e.jsx(r.IconButton,{size:"sm",className:"rounded-l-none",children:e.jsx(K,{color:"white",size:18})})})]}),a==="super-admin"&&e.jsxs(y.Fragment,{children:[e.jsx(re,{columns:s==null?void 0:s.attributes}),e.jsx(ce,{columns:s==null?void 0:s.attributes}),e.jsx(ie,{entity_id:s==null?void 0:s.id})]})]})}),e.jsx("div",{className:"content mt-6",children:e.jsx(r.Card,{className:"h-full w-full rounded-none",children:e.jsx("div",{className:"overflow-x-auto overflow-hidden",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[(x=s==null?void 0:s.attributes)==null?void 0:x.map((o,g)=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${o!=null&&o.hidden?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(r.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:o!=null&&o.alternative_name?o==null?void 0:o.alternative_name:o.name}),(o==null?void 0:o.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(Q,{size:12,strokeWidth:2,onClick:()=>{sortData(o.slug,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(J,{size:12,strokeWidth:2,onClick:()=>{sortData(o.slug,"desc")}})})]})]})},g)),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:((u=s==null?void 0:s.values)==null?void 0:u.length)>0&&((h=s==null?void 0:s.values)==null?void 0:h.map((o,g)=>{const b=JSON.parse(o==null?void 0:o.values),c=s==null?void 0:s.attributes;return e.jsx(ve,{headers:c,values:b,valueId:o==null?void 0:o.id},g)}))})]})})})})]})]})}export{Be as default};
