import{r as N,j as e,R as _,b as D,y as V,W as re,Y as ne,a as Z}from"./app-CF7YME_T.js";import{r as a}from"./index-DKFUDnck.js";import{_ as Q,A as ce,C as de}from"./AuthenticatedLayout-BuQHVsRe.js";import{D as ie,S as xe,E as ue,C as me,P as fe}from"./ExportButton-nZQNGxrB.js";import{T as X}from"./TextInput-Byy2MORQ.js";import{U as he}from"./UploadItemField-DGvNxUV6.js";import{I as k}from"./InputLabel-BdHT6X-y.js";import{I as S}from"./InputError-BtSJWETP.js";import"./transition-D6OMmc5L.js";import"./index-DAXshhI0.js";function te({siteId:i,locId:o,name:s,value:x,handleEditAbleItem:n}){const[l,j]=N.useState(x||""),h=y=>{j(y),n(i,o,s,y)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:l,rows:1,onChange:y=>{h(y.target.value)}})})}function ee({siteId:i,locId:o,name:s,value:x,handleEditAbleItem:n}){const[l,j]=N.useState(x||""),h=y=>{j(y),n(i,o,s,y)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(ie,{selected:l,onChange:y=>h(y),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function se({siteId:i,locId:o,name:s,value:x,options:n,handleEditAbleItem:l}){const[j,h]=N.useState(x||""),y=u=>{h(u),l(i,o,s,u)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:j,onChange:u=>{y(u.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),(n==null?void 0:n.length)>0&&n.map((u,g)=>e.jsx("option",{value:u.value,children:u.label},g))]})})}const je={text:te,date:ee,dropdown:se};function ve({column:i,site:o,value:s,handleEditAbleItem:x}){const n=je[i.input_type];return e.jsx(n,{siteId:o==null?void 0:o.id,locId:o==null?void 0:o.loc_id,name:i.key,value:s,handleEditAbleItem:x,options:JSON.parse(i==null?void 0:i.options)})}function Ne({site_id:i,changedItems:o,setChangedItems:s}){const[x,n]=N.useState(!1),l=async j=>{var h,y,u;if(o.length>0){let g=o.filter(v=>v.site_id===j)[0];if(g){n(!0);const v=await axios.post(route("wireless.sites.save.item"),{site_id:g==null?void 0:g.site_id,location_id:g==null?void 0:g.loc_id,items:g==null?void 0:g.items});(h=v==null?void 0:v.data)!=null&&h.success&&(n(!1),Q.success((u=(y=v==null?void 0:v.data)==null?void 0:y.success)==null?void 0:u.message),s(B=>B.filter(b=>b.site_id!==j)))}}};return e.jsx(a.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!o.some(j=>j.site_id===i),onClick:()=>{l(i)},loading:x,children:"Save"})}function ye({mappingDialog:i,setMappingDialog:o,mappingData:s,setBatchId:x}){var F,$,J,R,U,q,H,A,O,M,K,Y;const n=()=>o(!i),[l,j]=N.useState({file_path:s?s==null?void 0:s.filePath:"",loc_id:"",wntd:"",imsi:"",version:"",avc:"",bw_profile:"",lon:"",lat:"",site_name:"",home_cell:"",home_pci:"",traffic_profile:""}),[h,y]=N.useState({}),[u,g]=N.useState(!1),[v,B]=N.useState(""),[b,d]=N.useState(""),m=(t,f)=>{j(E=>({...E,[t]:f}))};N.useEffect(()=>{m("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const I=async t=>{var E,W,G,z,L,r;t.preventDefault();let f={};if(["loc_id","wntd","imsi","version","avc","bw_profile","lon","lat","site_name","home_cell","home_pci","traffic_profile"].forEach(c=>{l[c]||(f[c]="This field is required.")}),y(f),Object.keys(f).length>0){console.log(f);return}try{g(!0);const c=await D.post(route("wireless.sites.map.save"),l);c!=null&&c.data&&(d((W=(E=c==null?void 0:c.data)==null?void 0:E.success)==null?void 0:W.message),x((G=c==null?void 0:c.data)==null?void 0:G.batch_id),setTimeout(()=>{o(!1),d(""),B("")},3e3),V.visit(route("wireless.sites.index")))}catch(c){console.log("error:",c),B(`${(r=(L=(z=c==null?void 0:c.response)==null?void 0:z.data)==null?void 0:L.error)==null?void 0:r.message}`)}finally{g(!1)}};return e.jsx(_.Fragment,{children:e.jsxs(a.Dialog,{open:i,size:"xs",children:[e.jsx(a.DialogHeader,{children:"CSV Mapping"}),v&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:v}),b&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:b}),e.jsxs(a.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"LOCID",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.loc_id,onChange:t=>m("loc_id",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((F=s==null?void 0:s.header)==null?void 0:F.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.loc_id,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"WNTD",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.wntd,onChange:t=>m("wntd",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.wntd,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"IMSI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.imsi,onChange:t=>m("imsi",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((J=s==null?void 0:s.header)==null?void 0:J.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.imsi,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"VERSION",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.version,onChange:t=>m("version",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.version,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"AVC",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.avc,onChange:t=>m("avc",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((U=s==null?void 0:s.header)==null?void 0:U.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.avc,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"BW Profile",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.bw_profile,onChange:t=>m("bw_profile",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.bw_profile,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.lon,onChange:t=>m("lon",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((H=s==null?void 0:s.header)==null?void 0:H.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.lat,onChange:t=>m("lat",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"SiteName",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.site_name,onChange:t=>m("site_name",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((O=s==null?void 0:s.header)==null?void 0:O.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"HomeCell",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.home_cell,onChange:t=>m("home_cell",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.home_cell,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"HomePCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.home_pci,onChange:t=>m("home_pci",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((K=s==null?void 0:s.header)==null?void 0:K.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.home_pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{value:"Traffic_Profile",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:l.traffic_profile,onChange:t=>m("traffic_profile",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((Y=s==null?void 0:s.header)==null?void 0:Y.length)>0&&(s==null?void 0:s.header.map((t,f)=>e.jsx("option",{value:t,children:t},f)))]}),e.jsx(S,{message:h.traffic_profile,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"red",onClick:n,className:"mr-1",disabled:u,children:e.jsx("span",{children:"Cancel"})}),e.jsx(a.Button,{variant:"gradient",color:"green",onClick:I,loading:u,children:e.jsx("span",{children:"Confirm"})})]})]})})}function be({addColumnDialog:i,setAddColumnDialog:o}){const{data:s,setData:x,post:n,processing:l,errors:j,reset:h}=re({type:"wntd",name:"",key:"",input_type:"",options:""}),y=u=>{u.preventDefault(),n(route("additional.columns.save.item"),{onSuccess:()=>{o(!1),h()}})};return e.jsxs(a.Dialog,{open:i,size:"xs",children:[e.jsx(a.DialogHeader,{children:"Add New Column"}),e.jsxs(a.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(k,{value:"Column Name",className:"mb-1"}),e.jsx(X,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:u=>x("name",u.target.value)}),e.jsx(S,{message:j.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(k,{value:"Column Key",className:"mb-1"}),e.jsx(X,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:u=>x("key",u.target.value)}),e.jsx(S,{message:j.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(k,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:u=>x("input_type",u.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(S,{message:j.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(k,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:u=>x("options",u.target.value)}),e.jsx(S,{message:j.options,className:"text-sm font-medium"})]})]}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"red",onClick:()=>o(!i),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(a.Button,{variant:"gradient",color:"green",onClick:u=>y(u),className:"capitalize",loading:l,children:e.jsx("span",{children:"Submit"})})]})]})}function we({hideColumnDialog:i,setHideColumnDialog:o,columns:s,additional_columns:x,hidden_columns:n}){const l=()=>o(!i),{data:j,setData:h,post:y,processing:u,errors:g,reset:v}=re({type:"wntd",key:"hide",items:(n==null?void 0:n.length)>0?n:[]}),B=(d,m)=>{const I=d.target.checked;h(F=>I?{...F,items:[...F.items,m]}:{...F,items:F.items.filter($=>$!==m)})},b=d=>{d.preventDefault(),y(route("hide.columns.item"),{onSuccess:()=>{o(!1),v()}})};return e.jsxs(a.Dialog,{open:i,size:"xs",children:[e.jsx(a.DialogHeader,{children:"Hide Column"}),e.jsx(a.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsxs("div",{className:"form-item grid grid-cols-2",children:[(s==null?void 0:s.length)>0&&s.map((d,m)=>e.jsx(_.Fragment,{children:e.jsx(a.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(a.Typography,{color:"blue-gray",className:"font-medium text-sm",children:d==null?void 0:d.name}),onChange:I=>B(I,d==null?void 0:d.key),defaultChecked:n==null?void 0:n.includes(d==null?void 0:d.key)})},m)),(x==null?void 0:x.length)>0&&x.map((d,m)=>e.jsx(_.Fragment,{children:e.jsx(a.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(a.Typography,{color:"blue-gray",className:"font-medium text-sm",children:d==null?void 0:d.name}),onChange:I=>B(I,d==null?void 0:d.key),defaultChecked:n==null?void 0:n.includes(d==null?void 0:d.key)})},m))]})]})}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"red",onClick:l,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(a.Button,{variant:"gradient",color:"green",onClick:d=>{b(d)},className:"capitalize",loading:u,children:e.jsx("span",{children:"Confirm"})})]})]})}function ge({renameColumnDialog:i,setRenameColumnDialog:o,columns:s,additional_columns:x}){var B;const{data:n,setData:l,post:j,processing:h,errors:y,reset:u}=re({type:"wntd",key:"rename",items:[]});N.useEffect(()=>{i&&l(b=>{const d=[...s.map(m=>({key:m.key,name:m.name})),...x.map(m=>({key:m.key,name:m.name}))];return{...b,items:d}})},[i]);const g=(b,d)=>{l(m=>({...m,items:m.items.map(I=>I.key===b?{...I,name:d}:I)}))},v=b=>{b.preventDefault(),j(route("rename.columns.item"),{onSuccess:()=>{o(!1),u()}})};return e.jsxs(a.Dialog,{open:i,size:"xs",children:[e.jsx(a.DialogHeader,{children:"Rename Columns"}),e.jsx(a.DialogBody,{className:"h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(n==null?void 0:n.items.length)>0&&((B=n==null?void 0:n.items)==null?void 0:B.map((b,d)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(X,{className:"w-full text-sm font-medium text-gray-600",value:b==null?void 0:b.name,onChange:m=>g(b==null?void 0:b.key,m.target.value)})},d)))})}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>o(!1),children:"Cancel"}),e.jsx(a.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:b=>v(b),loading:h,children:"Submit"})]})]})}function Ce({columns:i,additional_columns:o,hidden_columns:s}){const[x,n]=N.useState(!1),[l,j]=N.useState(!1),[h,y]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(a.Menu,{children:[e.jsx(a.MenuHandler,{children:e.jsx(a.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(a.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(a.MenuItem,{onClick:()=>{n(!0)},children:"Add Column"}),e.jsx(a.MenuItem,{onClick:()=>{j(!0)},children:"Hide Columns"}),e.jsx(a.MenuItem,{onClick:()=>{y(!0)},children:"Rename Columns"})]})]}),e.jsx(be,{addColumnDialog:x,setAddColumnDialog:n}),e.jsx(we,{hideColumnDialog:l,setHideColumnDialog:j,columns:i,additional_columns:o,hidden_columns:s}),e.jsx(ge,{renameColumnDialog:h,setRenameColumnDialog:y,columns:i,additional_columns:o})]})}function He({auth:i,sites:o,get_data:s,batch:x,additional_columns:n,hidden_columns:l,renamed_columns:j}){var L;const{role:h}=i,y=[{name:"LOCID",sortable:!0,key:"loc_id"},{name:"WNTD",sortable:!0,key:"wntd"},{name:"IMSI",sortable:!0,key:"imsi"},{name:"VERSION",sortable:!0,key:"version"},{name:"AVC",sortable:!0,key:"avc"},{name:"BW Profile",sortable:!0,key:"bw_profile"},{name:"Lon",sortable:!0,key:"lon"},{name:"Lat",sortable:!0,key:"lat"},{name:"SiteName",sortable:!0,key:"site_name"},{name:"HomeCell",sortable:!0,key:"home_cell"},{name:"HomePCI",sortable:!0,key:"home_pci"},{name:"Traffic Profile",sortable:!0,key:"traffic_profile"},{name:"Start Date",sortable:!1,key:"start_date"},{name:"End Date",sortable:!1,key:"end_date"},{name:"Solution Type",sortable:!1,key:"solution_type"},{name:"Status",sortable:!1,key:"status"},{name:"Remarks",sortable:!1,key:"remarks"},{name:"Artifacts",sortable:!1,key:"artifacts"}],[u,g]=N.useState(y),[v,B]=N.useState(n);N.useEffect(()=>{if(j){const r=[...u];r.forEach(C=>{const P=j.find(T=>T.key===C.key);P&&(C.name=P.name)});const c=[...v];c.forEach(C=>{const P=j.find(T=>T.key===C.key);P&&(C.name=P.name)}),g(r),B(c)}},[j]);const b=N.useRef(null),[d,m]=N.useState(s!=null&&s.search?s==null?void 0:s.search:""),[I,F]=N.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[$]=N.useState(o),[J,R]=N.useState(!1),[U,q]=N.useState(""),[H,A]=N.useState(null),[O,M]=N.useState([]),K=r=>{b.current.click()},Y=async r=>{var C,P,T;const c=new FormData;c.append("import_file",r.target.files[0]);try{const w=await D.post(route("wireless.sites.import"),c);w!=null&&w.data&&(q(w==null?void 0:w.data),R(!0))}catch(w){Q.error(`${(T=(P=(C=w==null?void 0:w.response)==null?void 0:C.data)==null?void 0:P.error)==null?void 0:T.message}`)}},t=async()=>{V.get(route("wireless.sites.index",{search:d}))},f=async(r,c)=>{V.get(route("wireless.sites.index",{order_by:r,order:c}))},E=(r,c)=>{var C;if(r)return(C=r[c])==null?void 0:C.value},W=async(r,c)=>{V.get(route("wireless.sites.index",{filter_by:r,value:c}))},G=r=>{F(r),V.get(route("wireless.sites.index",{...s,per_page:r}))};N.useEffect(()=>{x!=null&&x.batch_site_id&&A(x==null?void 0:x.batch_site_id)},[]),N.useEffect(()=>{const r=async()=>{var C,P,T;try{let w=0;const p=await D.get(route("import.progress",{batchId:H}));if(p!=null&&p.data){let le=parseInt((C=p==null?void 0:p.data)==null?void 0:C.total_jobs),ae=parseInt((P=p==null?void 0:p.data)==null?void 0:P.pending_jobs),oe=le-ae;parseInt((T=p==null?void 0:p.data)==null?void 0:T.failed_jobs)>0?clearInterval(c):(w=parseInt(oe/le*100).toFixed(0),w<100?Q.loading(`CSV Data Import Progress: ${w}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(Q.dismiss("loading-toast"),clearInterval(c)))}}catch(w){console.log(w)}},c=setInterval(()=>{H&&r()},5e3);return()=>clearInterval(c)},[H]);const z=(r,c,C,P)=>{const T=O.findIndex(w=>w.site_id===r&&w.loc_id===c);M(T!==-1?w=>{const p=[...w];return p[T]={...p[T],items:{...p[T].items,[C]:P}},p}:w=>[...w,{site_id:r,loc_id:c,items:{[C]:P}}])};return e.jsxs(ce,{user:i==null?void 0:i.user,children:[e.jsx(ne,{title:"Wireless Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(a.Typography,{variant:"h3",className:"tracking-tight",children:"WNTD"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(Z,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(Z,{href:route("wireless.sites.index"),children:"WNTD"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-2",children:[e.jsxs("div",{className:"search-wrapper w-1/3 flex relative",children:[e.jsx(X,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:d,onChange:r=>m(r.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(a.IconButton,{size:"sm",className:"rounded-l-none",onClick:t,children:e.jsx(xe,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:r=>W("status",r.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:r=>W("solution_type",r.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"device_upgrade",children:"Device Upgrade"}),e.jsx("option",{value:"reparent",children:"Reparent"}),e.jsx("option",{value:"repan",children:"Repan"})]})}),h==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(a.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:K,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:Y,ref:b,style:{display:"none"}})]}),e.jsx(Ce,{columns:u,additional_columns:v,hidden_columns:l})]}),e.jsx(ue,{route_name:"wireless.sites.export",file_name:"WNTD_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(a.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[u.map(r=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${l!=null&&l.includes(r==null?void 0:r.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:r.name}),(r==null?void 0:r.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(me,{size:12,strokeWidth:2,onClick:()=>{f(r.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(de,{size:12,strokeWidth:2,onClick:()=>{f(r.key,"desc")}})})]})]})},r.name)),(v==null?void 0:v.length)>0&&(v==null?void 0:v.map(r=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${l!=null&&l.includes(r==null?void 0:r.key)?"hidden":""}`,children:e.jsx("div",{className:"flex justify-between",children:e.jsx(a.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:r.name})})},r.name))),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:$==null?void 0:$.data.map(r=>e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("loc_id")?"hidden":""}`,children:e.jsx(Z,{href:route("wireless.show.location.index",r==null?void 0:r.loc_id),className:"font-semibold underline",children:r==null?void 0:r.loc_id})}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("wntd")?"hidden":""}`,children:r==null?void 0:r.wntd}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("imsi")?"hidden":""}`,children:r==null?void 0:r.imsi}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("version")?"hidden":""}`,children:r==null?void 0:r.version}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("avc")?"hidden":""}`,children:r==null?void 0:r.avc}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("bw_profile")?"hidden":""}`,children:r==null?void 0:r.bw_profile}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("lon")?"hidden":""}`,children:r==null?void 0:r.lon}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("lat")?"hidden":""}`,children:r==null?void 0:r.lat}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("site_name")?"hidden":""}`,children:r==null?void 0:r.site_name}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("home_cell")?"hidden":""}`,children:r==null?void 0:r.home_cell}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("home_pci")?"hidden":""}`,children:r==null?void 0:r.home_pci}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${l!=null&&l.includes("traffic_profile")?"hidden":""}`,children:r==null?void 0:r.traffic_profile}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("start_date")?"hidden":""}`,children:e.jsx(ee,{value:E(r==null?void 0:r.tracking,"start_date"),name:"start_date",locId:r.loc_id,siteId:r.id,handleEditAbleItem:z})}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("end_date")?"hidden":""}`,children:e.jsx(ee,{value:E(r==null?void 0:r.tracking,"end_date"),name:"end_date",locId:r.loc_id,siteId:r.id,handleEditAbleItem:z})}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("solution_type")?"hidden":""}`,children:e.jsx(se,{value:E(r==null?void 0:r.tracking,"solution_type"),name:"solution_type",locId:r.loc_id,siteId:r.id,handleEditAbleItem:z,options:[{label:"Device Upgrade",value:"device_upgrade"},{label:"Reparent",value:"reparent"},{label:"Repan",value:"repan"}]})}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("status")?"hidden":""}`,children:e.jsx(se,{value:E(r==null?void 0:r.tracking,"status"),name:"status",locId:r.loc_id,siteId:r.id,handleEditAbleItem:z,options:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}]})}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("remarks")?"hidden":""}`,children:e.jsx(te,{value:E(r==null?void 0:r.tracking,"remarks"),name:"remarks",locId:r.loc_id,siteId:r.id,handleEditAbleItem:z})}),e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes("artifacts")?"hidden":""}`,children:e.jsx(he,{value:E(r==null?void 0:r.tracking,"artifacts"),name:"artifacts",locId:r.loc_id,siteId:r.id})}),(v==null?void 0:v.length)>0&&v.map((c,C)=>e.jsx("td",{className:`border-l h-10 ${l!=null&&l.includes(c.key)?"hidden":""}`,children:e.jsx(ve,{column:c,site:r,value:E(r==null?void 0:r.tracking,c.key),handleEditAbleItem:z})},C)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsx(Ne,{site_id:r==null?void 0:r.id,changedItems:O,setChangedItems:M})})]},r.id))})]}),((L=$==null?void 0:$.data)==null?void 0:L.length)===0&&e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:I,onChange:r=>{G(r.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${o==null?void 0:o.from}-${o==null?void 0:o.to} of ${o==null?void 0:o.total} Records`}),e.jsx(fe,{links:$==null?void 0:$.links,perPage:I})]})]})}),e.jsx(ye,{mappingDialog:J,setMappingDialog:R,mappingData:U,setBatchId:A})]})]})}export{He as default};
