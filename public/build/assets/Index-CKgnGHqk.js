import{r as h,j as e,R as X,b as re,y as G,u as Z,W as V,c as se,s as te,d as D,e as ce,Y as ie,a as le}from"./app-DJDtEcW-.js";import{r as t}from"./index-aoLFchbJ.js";import{_ as K,A as ue}from"./AuthenticatedLayout-CPFH4X6Z.js";import{M as xe,T as ae,P as he}from"./Pagination-BquHe1cs.js";import{T as ee}from"./TextInput-CS9SMXBs.js";import{I as z}from"./InputLabel-CfmYp7Wd.js";import{I as P}from"./InputError-DsolrlrK.js";import{A as ne,E as me}from"./ag-theme-quartz-D2ANM19B.js";/* empty css                         */import{U as fe}from"./UploadItem-7q902CnH.js";import"./transition-BU2mhQ3d.js";import"./ApplicationLogo-5QIRwlwM.js";import"./index-DZpz44Hh.js";function je({mappingDialog:c,setMappingDialog:n,mappingData:s,setBatchId:i}){var _,E,S,R,p,F,$,W,q,L,M,O,A;const o=()=>n(!c),[x,N]=h.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[u,H]=h.useState({}),[y,w]=h.useState(!1),[I,k]=h.useState(""),[b,v]=h.useState(""),m=(l,j)=>{N(U=>({...U,[l]:j}))};h.useEffect(()=>{m("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const f=async l=>{var U,Q,Y,a,d,g;l.preventDefault();let j={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(r=>{x[r]||(j[r]="This field is required.")}),H(j),Object.keys(j).length>0){console.log(j);return}try{w(!0);const r=await re.post(route("site.field.map.save"),x);r!=null&&r.data&&(v((Q=(U=r==null?void 0:r.data)==null?void 0:U.success)==null?void 0:Q.message),i((Y=r==null?void 0:r.data)==null?void 0:Y.batch_id),setTimeout(()=>{n(!1),v(""),k("")},3e3),G.visit(route("site.field.name.index")))}catch(r){console.log("error:",r),k(`${(g=(d=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:d.error)==null?void 0:g.message}`)}finally{w(!1)}};return e.jsx(X.Fragment,{children:e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"CSV Mapping"}),I&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:I}),b&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:b}),e.jsxs(t.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.site_name,onChange:l=>m("site_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((_=s==null?void 0:s.header)==null?void 0:_.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.cell_name,onChange:l=>m("cell_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((E=s==null?void 0:s.header)==null?void 0:E.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.lon,onChange:l=>m("lon",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((S=s==null?void 0:s.header)==null?void 0:S.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.lat,onChange:l=>m("lat",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.bb_type,onChange:l=>m("bb_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((p=s==null?void 0:s.header)==null?void 0:p.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.rru_type,onChange:l=>m("rru_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((F=s==null?void 0:s.header)==null?void 0:F.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.antenna_type,onChange:l=>m("antenna_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.frequency,onChange:l=>m("frequency",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.pci,onChange:l=>m("pci",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.azimuth,onChange:l=>m("azimuth",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.height,onChange:l=>m("height",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.last_epo,onChange:l=>m("last_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((O=s==null?void 0:s.header)==null?void 0:O.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.next_epo,onChange:l=>m("next_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((l,j)=>e.jsx("option",{value:l,children:l},j)))]}),e.jsx(P,{message:u.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:o,className:"mr-1",disabled:y,children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:f,loading:y,children:e.jsx("span",{children:"Confirm"})})]})]})})}function Ne(c){const{changedDataFW:n}=Z(i=>i.table),s=async()=>{var i,o,x;if(n.length>0){let N=n.filter(u=>u.site_id===c.data.id)[0];if(N){const u=await axios.post(route("site.field.name.save.item"),{site_id:N==null?void 0:N.site_id,items:N==null?void 0:N.items});(i=u==null?void 0:u.data)!=null&&i.success&&K.success((x=(o=u==null?void 0:u.data)==null?void 0:o.success)==null?void 0:x.message)}}};return e.jsx(t.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:()=>{s()},children:"Save"})}function ve({addColumnDialog:c,setAddColumnDialog:n}){const{data:s,setData:i,post:o,processing:x,errors:N,reset:u}=V({type:"fw_site",name:"",key:"",input_type:"",options:""}),H=y=>{y.preventDefault(),o(route("additional.columns.save.item"),{onSuccess:()=>{n(!1),u()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Add New Column"}),e.jsxs(t.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(z,{value:"Column Name",className:"mb-1"}),e.jsx(ee,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:y=>i("name",y.target.value)}),e.jsx(P,{message:N.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(z,{value:"Column Key",className:"mb-1"}),e.jsx(ee,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:y=>i("key",y.target.value)}),e.jsx(P,{message:N.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(z,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:y=>i("input_type",y.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(P,{message:N.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(z,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:y=>i("options",y.target.value)}),e.jsx(P,{message:N.options,className:"text-sm font-medium"})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:()=>n(!c),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:y=>H(y),className:"capitalize",loading:x,children:e.jsx("span",{children:"Submit"})})]})]})}function ye({hideColumnDialog:c,setHideColumnDialog:n,columns:s,hidden_columns:i,deleted_columns:o}){const x=()=>n(!c),[N,u]=h.useState([]),{data:H,setData:y,post:w,processing:I,errors:k,reset:b}=V({type:"fw_site",key:"hide",items:(i==null?void 0:i.length)>0?i:[]});h.useEffect(()=>{c&&u(f=>[...s.filter(E=>!o.includes(E.key)).map(E=>({key:E.key,name:E.name}))])},[c]);const v=(f,_)=>{const E=f.target.checked;y(S=>E?{...S,items:[...S.items,_]}:{...S,items:S.items.filter(R=>R!==_)})},m=f=>{f.preventDefault(),w(route("hide.columns.item"),{onSuccess:()=>{n(!1),b()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Hide Column"}),e.jsx(t.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(N==null?void 0:N.length)>0&&N.map((f,_)=>e.jsx(X.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:f==null?void 0:f.name}),onChange:E=>v(E,f==null?void 0:f.key),defaultChecked:i==null?void 0:i.includes(f==null?void 0:f.key)})},_))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:x,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:f=>{m(f)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function ge({renameColumnDialog:c,setRenameColumnDialog:n,columns:s,deleted_columns:i}){var k;const{data:o,setData:x,post:N,processing:u,errors:H,reset:y}=V({type:"fw_site",key:"rename",items:[]});h.useEffect(()=>{c&&x(b=>{const v=[...s.filter(m=>!i.includes(m.key)).map(m=>({key:m.key,name:m.name}))];return{...b,items:v}})},[c]);const w=(b,v)=>{x(m=>({...m,items:m.items.map(f=>f.key===b?{...f,name:v}:f)}))},I=b=>{b.preventDefault(),N(route("rename.columns.item"),{onSuccess:()=>{n(!1),y()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Rename Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(o==null?void 0:o.items.length)>0&&((k=o==null?void 0:o.items)==null?void 0:k.map((b,v)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(ee,{className:"w-full text-sm font-medium text-gray-600",value:b==null?void 0:b.name,onChange:m=>w(b==null?void 0:b.key,m.target.value)})},v)))})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:b=>I(b),loading:u,children:"Submit"})]})]})}function pe({deleteColumnDialog:c,setDeleteColumnDialog:n,columns:s,deleted_columns:i}){const{data:o,setData:x,post:N,processing:u,errors:H,reset:y}=V({type:"fw_site",key:"delete",items:[]}),[w,I]=h.useState([]);h.useEffect(()=>{c&&I(v=>[...s.filter(f=>!i.includes(f.key)).map(f=>({key:f.key,name:f.name}))])},[c]);const k=(v,m)=>{const f=v.target.checked;x(_=>f?{..._,items:[..._.items,m]}:{..._,items:_.items.filter(E=>E!==m)})},b=v=>{v.preventDefault(),N(route("delete.columns.item"),{onSuccess:()=>{n(!1),y()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Delete Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(w==null?void 0:w.length)>0&&w.map((v,m)=>e.jsx(X.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:v==null?void 0:v.name}),onChange:f=>{k(f,v==null?void 0:v.key)}})},m))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:v=>{b(v)},loading:u,children:"Submit"})]})]})}function we({arrangeColumnDialog:c,setArrangeColumnDialog:n,columns:s,deleted_columns:i}){const[o,x]=h.useState([]),[N,u]=h.useState(null),{data:H,setData:y,post:w,processing:I,errors:k,reset:b}=V({type:"fw_site",key:"arrange",items:[]});h.useEffect(()=>{c&&x(S=>[...(F=>F.map(($,W)=>({...$,position:W+1})))(s.filter(F=>!i.includes(F.key)).map(F=>({key:F.key,name:F.name})))])},[c]);const v=(S,R)=>{u(R)},m=()=>{u(null)},f=S=>{S.preventDefault()},_=(S,R)=>{if(!N)return;const p=o.indexOf(N),F=o.indexOf(R);if(p!==-1&&F!==-1){const W=[...(O=>O.map((A,l)=>({...A,position:l+1})))(o)],[q]=W.splice(p,1);W.splice(F,0,q);const L=W.map((O,A)=>({...O,position:A+1}));x(L);const M=L.map(O=>({key:O.key,position:O.position}));y("items",M)}},E=S=>{S.preventDefault(),w(route("rearrange.columns.item"),{onSuccess:()=>{n(!1),b()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(o==null?void 0:o.length)>0&&(o==null?void 0:o.map((S,R)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:p=>v(p,S),onDragEnd:m,onDragOver:f,onDrop:p=>_(p,S),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(xe,{strokeWidth:1.5,size:18})}),S.name]})},R)))})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:S=>E(S),loading:I,children:"Submit"})]})]})}function be({columns:c,hidden_columns:n,deleted_columns:s}){const[i,o]=h.useState(!1),[x,N]=h.useState(!1),[u,H]=h.useState(!1),[y,w]=h.useState(!1),[I,k]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{o(!0)},children:"Add New Column"}),e.jsx(ve,{addColumnDialog:i,setAddColumnDialog:o}),e.jsx(ye,{hideColumnDialog:x,setHideColumnDialog:N,columns:c,hidden_columns:n,deleted_columns:s}),e.jsx(ge,{renameColumnDialog:u,setRenameColumnDialog:H,columns:c,deleted_columns:s}),e.jsx(pe,{deleteColumnDialog:y,setDeleteColumnDialog:w,columns:c,deleted_columns:s}),e.jsx(we,{arrangeColumnDialog:I,setArrangeColumnDialog:k,columns:c,deleted_columns:s})]})}function Ce({site_id:c}){const{processing:n,delete:s}=V(),[i,o]=h.useState(!1),x={onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},N=()=>{s(route("site.field.name.destroy",c),{preserveScroll:!0,onSuccess:()=>{G.visit(route("site.field.name.index"))}})};return e.jsx(X.Fragment,{children:e.jsxs(t.Popover,{placement:"top-end",open:i,handler:o,children:[e.jsx(t.PopoverHandler,{...x,children:e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:()=>setOpen(!0),children:e.jsx(ae,{size:14})})}),e.jsxs(t.PopoverContent,{...x,className:"px-3",children:[e.jsx(t.Typography,{variant:"h6",className:"text-center",children:"Are you sure?"}),e.jsx(t.Typography,{variant:"small",className:"font-normal",children:"This cannot be reverted back."}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx(t.Button,{variant:"text",color:"red",size:"sm",className:"capitalize rounded",onClick:()=>o(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize rounded",onClick:N,children:"Delete"})]})]})]})})}const Se=()=>{const c=se(),{addNewRowDataFW:n}=Z(o=>o.table),s=o=>{if(console.log(n),o.preventDefault(),!n.site_name)return K.error("Site name is required");G.post(route("site.field.name.add.row"),{newItem:n},{onSuccess:()=>{c(D(!1)),K.success("Row Added successfully")}})},i=()=>{c(D(!1)),te({})};return e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:s,children:"Save"}),e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:i,children:e.jsx(ae,{size:14})})]})};function _e({setAddNewRow:c}){const n=se(),{addNewRowDataFW:s}=Z(w=>w.table),i=["opti_type_1","opti_type_5","opti_type_6"],o=["in_progress","not_started","completed"],x=h.useMemo(()=>({editable:!0})),[N]=h.useState([{headerName:"Site Name",field:"site_name"},{headerName:"Cell Name",field:"cell_name"},{headerName:"Lon",field:"lon"},{headerName:"Lat",field:"lat"},{headerName:"BB Type",field:"bb_type"},{headerName:"RRU Type",field:"rru_type"},{headerName:"Antenna Type",field:"antenna_type"},{headerName:"Frequency",field:"frequency"},{headerName:"PCI",field:"pci"},{headerName:"Azimuth",field:"azimuth"},{headerName:"Height",field:"height"},{headerName:"Last EPO",field:"last_epo"},{headerName:"Next EPO",field:"next_epo"},{headerName:"Start Date",field:"start_date"},{headerName:"End Date",field:"end_date"},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:i}},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:o}},{headerName:"Remarks",field:"remarks"},{headerName:"Artifacts",field:"artifacts",editable:!1},{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:Se}]),[u,H]=h.useState([{loc_id:"",wntd:"",imsi:"",version:"",avc:"",bw_profile:"",lon:"",lat:"",site_name:"",home_cell:"",home_pci:"",traffic_profile:"",deleted_at:null,remarks:"",artifacts:"",solution_type:"",start_date:new Date,status:"",end_date:new Date}]),y=w=>{var k;const I={...s};n(te({...I,[(k=w==null?void 0:w.colDef)==null?void 0:k.field]:w==null?void 0:w.value}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto overflow-hidden",children:e.jsx("div",{className:"ag-theme-quartz",style:{height:100},children:e.jsx(ne,{rowData:u,columnDefs:N,defaultColDef:x,onCellValueChanged:y})})})})}const ke=c=>e.jsxs("div",{className:"flex gap-5 my-2",children:[e.jsx(Ne,{...c}),e.jsx(Ce,{...c})]});function qe({auth:c,sites:n,get_data:s,batch:i,additional_columns:o,hidden_columns:x,renamed_columns:N,deleted_columns:u,arrange_columns:H}){var Y;const I=[{headerName:"Site Name",field:"site_name"},{headerName:"Cell Name",field:"cell_name"},{headerName:"Lon",field:"lon"},{headerName:"Lat",field:"lat"},{headerName:"BB Type",field:"bb_type"},{headerName:"RRU Type",field:"rru_type"},{headerName:"Antenna Type",field:"antenna_type"},{headerName:"Frequency",field:"frequency"},{headerName:"PCI",field:"pci"},{headerName:"Azimuth",field:"azimuth"},{headerName:"Height",field:"height"},{headerName:"Last EPO",field:"last_epo"},{headerName:"Next EPO",field:"next_epo"},{headerName:"Start Date",field:"start_date",input_type:"date",valueFormatter:a=>{if(!a.value)return"";const d=a.value.getMonth()+1,g=a.value.getDate();return`${a.value.getFullYear()}-${d<10?"0"+d:d}-${g<10?"0"+g:g}`},cellEditor:"agDateCellEditor",filter:!1},{headerName:"End Date",field:"end_date",valueFormatter:a=>{if(!a.value)return"";const d=a.value.getMonth()+1,g=a.value.getDate();return`${a.value.getFullYear()}-${d<10?"0"+d:d}-${g<10?"0"+g:g}`},cellEditor:"agDateCellEditor",filter:!1},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:["opti_type_1","opti_type_5","opti_type_6"]}},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:["in_progress","not_started","completed"]}},{headerName:"Remarks",field:"remarks"},{headerName:"Artifacts",field:"artifacts",cellRenderer:fe,editable:!1}],k=h.useRef(),{role:b}=c,v=se(),{addNewRowFW:m}=Z(a=>a.table),f=h.useMemo(()=>({editable:!0,filter:!0}));h.useEffect(()=>{var a;((a=n==null?void 0:n.data)==null?void 0:a.length)>0&&(n==null||n.data.map(d=>{if(d.end_date||d.start_date){let g=d!=null&&d.end_date?new Date(d==null?void 0:d.end_date):new Date,r=d!=null&&d.start_date?new Date(d==null?void 0:d.start_date):new Date;d.start_date=r,d.end_date=g}return d}),F(n))},[n==null?void 0:n.data]);const[_,E]=h.useState();h.useRef(null),h.useState(s!=null&&s.search?s==null?void 0:s.search:"");const[S,R]=h.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[p,F]=h.useState([]),[$,W]=h.useState(!1),[q,L]=h.useState(""),[M,O]=h.useState(null),[A,l]=h.useState([]);h.useEffect(()=>{function a(d){const g=d==null?void 0:d.map(r=>{let C={};return(r==null?void 0:r.input_type)==="date"?C={headerName:r==null?void 0:r.name.toUpperCase(),field:r==null?void 0:r.key,valueFormatter:T=>{if(!T.value)return"";const B=T.value.getMonth()+1,J=T.value.getDate();return`${T.value.getFullYear()}-${B<10?"0"+B:B}-${J<10?"0"+J:J}`},cellEditor:"agDateCellEditor",filter:!1}:(r==null?void 0:r.input_type)==="text"?C={headerName:r==null?void 0:r.name.toUpperCase(),field:r==null?void 0:r.key}:(r==null?void 0:r.input_type)==="dropdown"&&(C={headerName:r==null?void 0:r.name.toUpperCase(),field:r==null?void 0:r.key,cellEditorParams:{values:JSON.parse(r==null?void 0:r.options)}}),C});console.log(g),E([...I,...g,{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:ke}])}(o==null?void 0:o.length)>0&&(console.log(o,"additional_columns"),a(o))},[o]),h.useEffect(()=>{A.length>0&&v(ce(A))},[A]);const j=a=>{const d=A.findIndex(g=>{var r,C;return g.site_id===((r=a==null?void 0:a.data)==null?void 0:r.id)&&g.loc_id===((C=a==null?void 0:a.data)==null?void 0:C.loc_id)});l(d!==-1?g=>{var C;const r=[...g];return r[d]={...r[d],items:{...r[d].items,[(C=a==null?void 0:a.colDef)==null?void 0:C.field]:a==null?void 0:a.value}},r}:g=>{var r,C,T;return[...g,{site_id:(r=a==null?void 0:a.data)==null?void 0:r.id,loc_id:(C=a==null?void 0:a.data)==null?void 0:C.loc_id,items:{[(T=a==null?void 0:a.colDef)==null?void 0:T.field]:a==null?void 0:a.value}}]})},U=a=>{R(a),G.get(route("site.field.name.index",{...s,per_page:a}))};h.useEffect(()=>{i!=null&&i.batch_field_id&&O(i==null?void 0:i.batch_field_id)},[]),h.useEffect(()=>{const a=async()=>{var g,r,C;try{let T=0;const B=await re.get(route("import.progress",{batchId:M}));if(B!=null&&B.data){let J=parseInt((g=B==null?void 0:B.data)==null?void 0:g.total_jobs),oe=parseInt((r=B==null?void 0:B.data)==null?void 0:r.pending_jobs),de=J-oe;parseInt((C=B==null?void 0:B.data)==null?void 0:C.failed_jobs)>0?clearInterval(d):(T=parseInt(de/J*100).toFixed(0),T<100?K.loading(`CSV Data Import Progress: ${T}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(K.dismiss("loading-toast"),clearInterval(d)))}}catch(T){console.log(T)}},d=setInterval(()=>{M&&a()},5e3);return()=>clearInterval(d)},[M]);const Q=()=>{var d;((d=k.current.props)==null?void 0:d.columnDefs).forEach(g=>{const r=g.field,C=k.current.api.getColumnFilterModel(r);console.log(C),C!=null&&C.filter&&G.get(route("site.field.name.index",{search:C==null?void 0:C.filter}))})};return e.jsxs(ue,{user:c==null?void 0:c.user,children:[e.jsx(ie,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsxs("div",{className:"bg-white shadow rounded py-3 px-5 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(t.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(le,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(le,{href:route("site.field.name.index"),children:"FW Site"})})]})]})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[b==="super-admin"&&e.jsx(e.Fragment,{}),e.jsx(me,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(t.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[(p==null?void 0:p.data)&&((Y=p==null?void 0:p.data)==null?void 0:Y.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ag-theme-quartz",style:{height:500},children:e.jsx(ne,{ref:k,rowData:p==null?void 0:p.data,columnDefs:_,defaultColDef:f,onCellValueChanged:j,onFilterChanged:Q})}),m&&e.jsx(_e,{tableHeader:_})]}),(p==null?void 0:p.length)===0&&e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"pagination flex justify-between items-center",children:[e.jsxs("div",{className:"px-4 flex gap-5",children:[e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{v(D(!0))},children:"Add New Row"}),e.jsx(be,{columns:_,hidden_columns:x,deleted_columns:u||[]})]}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:S,onChange:a=>{U(a.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${n==null?void 0:n.from}-${n==null?void 0:n.to} of ${n==null?void 0:n.total} Records`}),e.jsx(he,{links:p==null?void 0:p.links,perPage:S})]})]})]})}),e.jsx(je,{mappingDialog:$,setMappingDialog:W,mappingData:q,setBatchId:O})]})]})}export{qe as default};
