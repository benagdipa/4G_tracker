import{r as m,j as e,R as te,b as le,y as Y,W as ee,Y as ie,a as se}from"./app-DNp-emWw.js";import{r as t}from"./index-ChC4ODf3.js";import{_ as H,A as ue,C as xe}from"./AuthenticatedLayout-BEfWFsmZ.js";import{D as he,S as fe,E as me,C as je,P as ye}from"./ExportButton-DXpxS9TM.js";import{T as D}from"./TextInput-CT3IAyRu.js";import{U as ve}from"./UploadItemField-CpMUGg2l.js";import{I as T}from"./InputLabel-DIUvqpDL.js";import{I as F}from"./InputError-CmZdJ38n.js";import"./transition-DzGjdDzv.js";import"./index-BOEHotrA.js";function re({siteId:c,name:a,value:s,handleEditAbleItem:h}){const[x,d]=m.useState(s||""),j=o=>{d(o),h(c,a,o)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(he,{selected:x,onChange:o=>j(o),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function ne({siteId:c,name:a,value:s,options:h,handleEditAbleItem:x}){const[d,j]=m.useState(s||""),o=b=>{j(b),x(c,a,b)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:d,onChange:b=>{o(b.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),h.length>0&&h.map((b,y)=>e.jsx("option",{value:b.value,children:b.label},y))]})})}function ae({siteId:c,name:a,value:s,handleEditAbleItem:h}){const[x,d]=m.useState(s||""),j=o=>{d(o),h(c,a,o)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:x,rows:1,onChange:o=>{j(o.target.value)}})})}function Ne({mappingDialog:c,setMappingDialog:a,mappingData:s,setBatchId:h}){var i,$,C,M,P,G,W,Q,X,q,V,J,L;const x=()=>a(!c),[d,j]=m.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[o,b]=m.useState({}),[y,g]=m.useState(!1),[N,_]=m.useState(""),[E,r]=m.useState(""),u=(n,f)=>{j(I=>({...I,[n]:f}))};m.useEffect(()=>{u("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const v=async n=>{var I,U,A,K,Z,R;n.preventDefault();let f={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(S=>{d[S]||(f[S]="This field is required.")}),b(f),Object.keys(f).length>0){console.log(f);return}try{g(!0);const S=await le.post(route("site.field.map.save"),d);S!=null&&S.data&&(r((U=(I=S==null?void 0:S.data)==null?void 0:I.success)==null?void 0:U.message),h((A=S==null?void 0:S.data)==null?void 0:A.batch_id),setTimeout(()=>{a(!1),r(""),_("")},3e3),Y.visit(route("site.field.name.index")))}catch(S){console.log("error:",S),_(`${(R=(Z=(K=S==null?void 0:S.response)==null?void 0:K.data)==null?void 0:Z.error)==null?void 0:R.message}`)}finally{g(!1)}};return e.jsx(te.Fragment,{children:e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"CSV Mapping"}),N&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:N}),E&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:E}),e.jsxs(t.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.site_name,onChange:n=>u("site_name",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((i=s==null?void 0:s.header)==null?void 0:i.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.cell_name,onChange:n=>u("cell_name",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lon,onChange:n=>u("lon",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((C=s==null?void 0:s.header)==null?void 0:C.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lat,onChange:n=>u("lat",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.bb_type,onChange:n=>u("bb_type",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.rru_type,onChange:n=>u("rru_type",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((G=s==null?void 0:s.header)==null?void 0:G.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.antenna_type,onChange:n=>u("antenna_type",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.frequency,onChange:n=>u("frequency",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((Q=s==null?void 0:s.header)==null?void 0:Q.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.pci,onChange:n=>u("pci",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((X=s==null?void 0:s.header)==null?void 0:X.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.azimuth,onChange:n=>u("azimuth",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.height,onChange:n=>u("height",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((V=s==null?void 0:s.header)==null?void 0:V.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.last_epo,onChange:n=>u("last_epo",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((J=s==null?void 0:s.header)==null?void 0:J.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.next_epo,onChange:n=>u("next_epo",n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((n,f)=>e.jsx("option",{value:n,children:n},f)))]}),e.jsx(F,{message:o.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:x,className:"mr-1",disabled:y,children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:v,loading:y,children:e.jsx("span",{children:"Confirm"})})]})]})})}function be({site_id:c,changedItems:a,setChangedItems:s}){const[h,x]=m.useState(!1),d=async j=>{var o,b,y;if(a.length>0){let g=a.filter(N=>N.site_id===j)[0];if(g){x(!0);const N=await axios.post(route("site.field.name.save.item"),{site_id:g==null?void 0:g.site_id,items:g==null?void 0:g.items});(o=N==null?void 0:N.data)!=null&&o.success&&(x(!1),H.success((y=(b=N==null?void 0:N.data)==null?void 0:b.success)==null?void 0:y.message),s(_=>_.filter(E=>E.site_id!==j)))}}};return e.jsx(t.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!a.some(j=>j.site_id===c),onClick:()=>{d(c)},loading:h,children:"Save"})}const pe={text:ae,date:re,dropdown:ne};function ge({column:c,item:a,value:s,handleEditAbleItem:h}){const x=pe[c.input_type];return e.jsx(x,{siteId:a==null?void 0:a.id,name:c.key,value:s,handleEditAbleItem:h,options:JSON.parse(c==null?void 0:c.options)})}function ke({addColumnDialog:c,setAddColumnDialog:a}){const{data:s,setData:h,post:x,processing:d,errors:j,reset:o}=ee({type:"fw_site",name:"",key:"",input_type:"",options:""}),b=y=>{y.preventDefault(),x(route("additional.columns.save.item"),{onSuccess:()=>{a(!1),o()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Add New Column"}),e.jsxs(t.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(T,{value:"Column Name",className:"mb-1"}),e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:y=>h("name",y.target.value)}),e.jsx(F,{message:j.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(T,{value:"Column Key",className:"mb-1"}),e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:y=>h("key",y.target.value)}),e.jsx(F,{message:j.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(T,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:y=>h("input_type",y.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(F,{message:j.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(T,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:y=>h("options",y.target.value)}),e.jsx(F,{message:j.options,className:"text-sm font-medium"})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:()=>a(!c),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:y=>b(y),className:"capitalize",loading:d,children:e.jsx("span",{children:"Submit"})})]})]})}function Ce({hideColumnDialog:c,setHideColumnDialog:a,columns:s,additional_columns:h,hidden_columns:x,deleted_columns:d}){const j=()=>a(!c),[o,b]=m.useState([]),{data:y,setData:g,post:N,processing:_,errors:E,reset:r}=ee({type:"fw_site",key:"hide",items:(x==null?void 0:x.length)>0?x:[]});m.useEffect(()=>{c&&b(i=>[...s.filter(C=>!d.includes(C.key)).map(C=>({key:C.key,name:C.name})),...h.filter(C=>!d.includes(C.key)).map(C=>({key:C.key,name:C.name}))])},[c]);const u=(i,$)=>{const C=i.target.checked;g(M=>C?{...M,items:[...M.items,$]}:{...M,items:M.items.filter(P=>P!==$)})},v=i=>{i.preventDefault(),N(route("hide.columns.item"),{onSuccess:()=>{a(!1),r()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Hide Column"}),e.jsx(t.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(o==null?void 0:o.length)>0&&o.map((i,$)=>e.jsx(te.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:i==null?void 0:i.name}),onChange:C=>u(C,i==null?void 0:i.key),defaultChecked:x==null?void 0:x.includes(i==null?void 0:i.key)})},$))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:j,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:i=>{v(i)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function we({renameColumnDialog:c,setRenameColumnDialog:a,columns:s,additional_columns:h,deleted_columns:x}){var E;const{data:d,setData:j,post:o,processing:b,errors:y,reset:g}=ee({type:"fw_site",key:"rename",items:[]});m.useEffect(()=>{c&&j(r=>{const u=[...s.filter(v=>!x.includes(v.key)).map(v=>({key:v.key,name:v.name})),...h.filter(v=>!x.includes(v.key)).map(v=>({key:v.key,name:v.name}))];return{...r,items:u}})},[c]);const N=(r,u)=>{j(v=>({...v,items:v.items.map(i=>i.key===r?{...i,name:u}:i)}))},_=r=>{r.preventDefault(),o(route("rename.columns.item"),{onSuccess:()=>{a(!1),g()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Rename Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(d==null?void 0:d.items.length)>0&&((E=d==null?void 0:d.items)==null?void 0:E.map((r,u)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",value:r==null?void 0:r.name,onChange:v=>N(r==null?void 0:r.key,v.target.value)})},u)))})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:r=>_(r),loading:b,children:"Submit"})]})]})}function Se({deleteColumnDialog:c,setDeleteColumnDialog:a,columns:s,additional_columns:h,deleted_columns:x}){const{data:d,setData:j,post:o,processing:b,errors:y,reset:g}=ee({type:"fw_site",key:"delete",items:[]}),[N,_]=m.useState([]);m.useEffect(()=>{c&&_(u=>[...s.filter(i=>!x.includes(i.key)).map(i=>({key:i.key,name:i.name})),...h.filter(i=>!x.includes(i.key)).map(i=>({key:i.key,name:i.name}))])},[c]);const E=(u,v)=>{const i=u.target.checked;j($=>i?{...$,items:[...$.items,v]}:{...$,items:$.items.filter(C=>C!==v)})},r=u=>{u.preventDefault(),o(route("delete.columns.item"),{onSuccess:()=>{a(!1),g()}})};return e.jsxs(t.Dialog,{open:c,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Delete Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(N==null?void 0:N.length)>0&&N.map((u,v)=>e.jsx(te.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:u==null?void 0:u.name}),onChange:i=>{E(i,u==null?void 0:u.key)}})},v))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:u=>{r(u)},loading:b,children:"Submit"})]})]})}function _e({columns:c,additional_columns:a,hidden_columns:s,deleted_columns:h}){const[x,d]=m.useState(!1),[j,o]=m.useState(!1),[b,y]=m.useState(!1),[g,N]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(t.Menu,{children:[e.jsx(t.MenuHandler,{children:e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(t.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(t.MenuItem,{onClick:()=>{d(!0)},children:"Add Column"}),e.jsx(t.MenuItem,{onClick:()=>{o(!0)},children:"Hide Columns"}),e.jsx(t.MenuItem,{onClick:()=>{y(!0)},children:"Rename Columns"}),e.jsx(t.MenuItem,{onClick:()=>{N(!0)},className:"text-red-500",children:"Delete Columns"})]})]}),e.jsx(ke,{addColumnDialog:x,setAddColumnDialog:d}),e.jsx(Ce,{hideColumnDialog:j,setHideColumnDialog:o,columns:c,additional_columns:a,hidden_columns:s,deleted_columns:h}),e.jsx(we,{renameColumnDialog:b,setRenameColumnDialog:y,columns:c,additional_columns:a,deleted_columns:h}),e.jsx(Se,{deleteColumnDialog:g,setDeleteColumnDialog:N,columns:c,additional_columns:a,deleted_columns:h})]})}function qe({auth:c,sites:a,get_data:s,batch:h,additional_columns:x,hidden_columns:d,renamed_columns:j,deleted_columns:o}){var S;const{role:b}=c,y=[{name:"Site Name",sortable:!0,key:"site_name"},{name:"Cell Name",sortable:!0,key:"cell_name"},{name:"Lon",sortable:!0,key:"lon"},{name:"Lat",sortable:!0,key:"lat"},{name:"BB Type",sortable:!0,key:"bb_type"},{name:"RRU Type",sortable:!0,key:"rru_type"},{name:"Antenna Type",sortable:!0,key:"antenna_type"},{name:"Frequency",sortable:!0,key:"frequency"},{name:"PCI",sortable:!1,key:"pci"},{name:"Azimuth",sortable:!1,key:"azimuth"},{name:"Height",sortable:!1,key:"height"},{name:"Last EPO",sortable:!1,key:"last_epo"},{name:"Next EPO",sortable:!1,key:"next_epo"},{name:"Solution Type",sortable:!1,key:"solution_type"},{name:"Start Date",sortable:!1,key:"start_date"},{name:"End Date",sortable:!1,key:"end_date"},{name:"Status",sortable:!1,key:"status"},{name:"Remarks",sortable:!1,key:"remarks"},{name:"Artifacts",sortable:!1,key:"artifacts"}],[g,N]=m.useState(y),[_,E]=m.useState(x),r=u(d,o);function u(l,p){return l==null?p:p==null?l:[...new Set([...l,...p])]}m.useEffect(()=>{if(j){const l=[...g];l.forEach(k=>{const z=j.find(B=>B.key===k.key);z&&(k.name=z.name)});const p=[..._];p.forEach(k=>{const z=j.find(B=>B.key===k.key);z&&(k.name=z.name)}),N(l),E(p)}},[j]);const v=m.useRef(null),[i,$]=m.useState(s!=null&&s.search?s==null?void 0:s.search:""),[C,M]=m.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[P]=m.useState(a),[G,W]=m.useState(!1),[Q,X]=m.useState(""),[q,V]=m.useState(null),[J,L]=m.useState([]),n=l=>{v.current.click()},f=async l=>{var k,z,B;const p=new FormData;p.append("import_file",l.target.files[0]);try{const w=await le.post(route("site.field.name.import"),p);w!=null&&w.data&&(X(w==null?void 0:w.data),W(!0))}catch(w){H.error(`${(B=(z=(k=w==null?void 0:w.response)==null?void 0:k.data)==null?void 0:z.error)==null?void 0:B.message}`)}},I=async()=>{i&&Y.get(route("site.field.name.index",{search:i}))},U=async(l,p)=>{Y.get(route("site.field.name.index",{order_by:l,order:p}))},A=(l,p)=>{var k;if(l)return(k=l[p])==null?void 0:k.value},K=async(l,p)=>{Y.get(route("site.field.name.index",{filter_by:l,value:p}))},Z=l=>{M(l),Y.get(route("site.field.name.index",{...s,per_page:l}))};m.useEffect(()=>{h!=null&&h.batch_field_id&&V(h==null?void 0:h.batch_field_id)},[]),m.useEffect(()=>{const l=async()=>{var k,z,B;try{let w=0;const O=await le.get(route("import.progress",{batchId:q}));if(O!=null&&O.data){let oe=parseInt((k=O==null?void 0:O.data)==null?void 0:k.total_jobs),ce=parseInt((z=O==null?void 0:O.data)==null?void 0:z.pending_jobs),de=oe-ce;parseInt((B=O==null?void 0:O.data)==null?void 0:B.failed_jobs)>0?clearInterval(p):(w=parseInt(de/oe*100).toFixed(0),w<100?H.loading(`CSV Data Import Progress: ${w}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(H.dismiss("loading-toast"),clearInterval(p)))}}catch(w){console.log(w)}},p=setInterval(()=>{q&&l()},5e3);return()=>clearInterval(p)},[q]);const R=(l,p,k)=>{const z=J.findIndex(B=>B.site_id===l);L(z!==-1?B=>{const w=[...B];return w[z]={...w[z],items:{...w[z].items,[p]:k}},w}:B=>[...B,{site_id:l,items:{[p]:k}}])};return e.jsxs(ue,{user:c==null?void 0:c.user,children:[e.jsx(ie,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(t.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(se,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(se,{href:route("site.field.name.index"),children:"FW Site"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[e.jsxs("div",{className:"search-wrapper w-1/3 flex relative",children:[e.jsx(D,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:i,onChange:l=>$(l.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(t.IconButton,{size:"sm",className:"rounded-l-none",onClick:I,children:e.jsx(fe,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>K("status",l.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>K("solution_type",l.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"opti_type_1",children:"Opti Type-1"}),e.jsx("option",{value:"opti_type_5",children:"Opti Type-5"}),e.jsx("option",{value:"opti_type_6",children:"Opti Type-6"})]})}),b==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(t.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:n,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:f,ref:v,style:{display:"none"}})]}),e.jsx(_e,{columns:g,additional_columns:_,hidden_columns:d,deleted_columns:o||[]})]}),e.jsx(me,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(t.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[g.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name}),(l==null?void 0:l.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(je,{size:12,strokeWidth:2,onClick:()=>{U(l.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(xe,{size:12,strokeWidth:2,onClick:()=>{U(l.key,"desc")}})})]})]})},l.name)),(_==null?void 0:_.length)>0&&(_==null?void 0:_.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsx("div",{className:"flex justify-between",children:e.jsx(t.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name})})},l.name))),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:P==null?void 0:P.data.map((l,p)=>e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("site_name")?"hidden":""}`,children:e.jsx(se,{href:route("site.field.name.show",l==null?void 0:l.id),className:"font-semibold underline",children:l==null?void 0:l.site_name})}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("cell_name")?"hidden":""}`,children:l==null?void 0:l.cell_name}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lon")?"hidden":""}`,children:l==null?void 0:l.lon}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lat")?"hidden":""}`,children:l==null?void 0:l.lat}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("bb_type")?"hidden":""}`,children:l==null?void 0:l.bb_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("rru_type")?"hidden":""}`,children:l==null?void 0:l.rru_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("antenna_type")?"hidden":""}`,children:l==null?void 0:l.antenna_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("frequency")?"hidden":""}`,children:l==null?void 0:l.frequency}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("pci")?"hidden":""}`,children:l==null?void 0:l.pci}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("azimuth")?"hidden":""}`,children:l==null?void 0:l.azimuth}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("height")?"hidden":""}`,children:l==null?void 0:l.height}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("last_epo")?"hidden":""}`,children:l==null?void 0:l.last_epo}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("next_epo")?"hidden":""}`,children:l==null?void 0:l.next_epo}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("solution_type")?"hidden":""}`,children:e.jsx(ne,{value:A(l==null?void 0:l.tracking,"solution_type"),name:"solution_type",siteId:l==null?void 0:l.id,options:[{label:"Opti Type-1",value:"opti_type_1"},{label:"Opti Type-5",value:"opti_type_5"},{label:"Opti Type-6",value:"opti_type_6"}],handleEditAbleItem:R})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("start_date")?"hidden":""}`,children:e.jsx(re,{value:A(l==null?void 0:l.tracking,"start_date"),name:"start_date",siteId:l==null?void 0:l.id,handleEditAbleItem:R})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("end_date")?"hidden":""}`,children:e.jsx(re,{value:A(l==null?void 0:l.tracking,"end_date"),name:"end_date",siteId:l==null?void 0:l.id,handleEditAbleItem:R})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("status")?"hidden":""}`,children:e.jsx(ne,{value:A(l==null?void 0:l.tracking,"status"),name:"status",siteId:l==null?void 0:l.id,options:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}],handleEditAbleItem:R})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("remarks")?"hidden":""}`,children:e.jsx(ae,{value:A(l==null?void 0:l.tracking,"remarks"),name:"remarks",siteId:l==null?void 0:l.id,handleEditAbleItem:R})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("artifacts")?"hidden":""}`,children:e.jsx(ve,{value:A(l==null?void 0:l.tracking,"artifacts"),name:"artifacts",siteId:l==null?void 0:l.id})}),(x==null?void 0:x.length)>0&&x.map((k,z)=>e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes(k.key)?"hidden":""}`,children:e.jsx(ge,{column:k,item:l,value:A(l==null?void 0:l.tracking,k.key),handleEditAbleItem:R})},z)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsx(be,{site_id:l==null?void 0:l.id,changedItems:J,setChangedItems:L})})]},l==null?void 0:l.id))})]}),((S=P==null?void 0:P.data)==null?void 0:S.length)===0&&e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:C,onChange:l=>{Z(l.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${a==null?void 0:a.from}-${a==null?void 0:a.to} of ${a==null?void 0:a.total} Records`}),e.jsx(ye,{links:P==null?void 0:P.links,perPage:C})]})]})}),e.jsx(Ne,{mappingDialog:G,setMappingDialog:W,mappingData:Q,setBatchId:V})]})]})}export{qe as default};
