import{r as m,j as e,R as Q,b as re,y as G,u as X,W as J,c as ee,s as te,d as Z,e as ce,Y as ie,a as se}from"./app-hAMxQ-Mf.js";import{r}from"./index-Dh3BsRSv.js";import{_ as K,A as ue}from"./AuthenticatedLayout-CE8-LQZf.js";import{M as xe,T as ae,P as he}from"./Pagination-BCejUtAE.js";import{T as D}from"./TextInput-Bd5Fx4_T.js";import{I as E}from"./InputLabel-BaHAriAx.js";import{I as z}from"./InputError-0oix6y5E.js";import{A as ne,E as me}from"./ag-theme-quartz-CpHMyD7J.js";/* empty css                         */import{U as fe}from"./UploadItem-Cd01xrtP.js";import"./transition-BcTd7teN.js";import"./ApplicationLogo-YPo9sQhw.js";import"./index-DgG258sn.js";function je({mappingDialog:c,setMappingDialog:n,mappingData:s,setBatchId:u}){var k,_,S,p,T,F,$,A,V,W,q,R,M;const o=()=>n(!c),[h,v]=m.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[x,H]=m.useState({}),[y,b]=m.useState(!1),[P,B]=m.useState(""),[C,g]=m.useState(""),j=(l,N)=>{v(L=>({...L,[l]:N}))};m.useEffect(()=>{j("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const f=async l=>{var L,Y,t,d,w,a;l.preventDefault();let N={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(i=>{h[i]||(N[i]="This field is required.")}),H(N),Object.keys(N).length>0){console.log(N);return}try{b(!0);const i=await re.post(route("site.field.map.save"),h);i!=null&&i.data&&(g((Y=(L=i==null?void 0:i.data)==null?void 0:L.success)==null?void 0:Y.message),u((t=i==null?void 0:i.data)==null?void 0:t.batch_id),setTimeout(()=>{n(!1),g(""),B("")},3e3),G.visit(route("site.field.name.index")))}catch(i){console.log("error:",i),B(`${(a=(w=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:w.error)==null?void 0:a.message}`)}finally{b(!1)}};return e.jsx(Q.Fragment,{children:e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"CSV Mapping"}),P&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:P}),C&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:C}),e.jsxs(r.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.site_name,onChange:l=>j("site_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((k=s==null?void 0:s.header)==null?void 0:k.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.cell_name,onChange:l=>j("cell_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((_=s==null?void 0:s.header)==null?void 0:_.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lon,onChange:l=>j("lon",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((S=s==null?void 0:s.header)==null?void 0:S.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.lat,onChange:l=>j("lat",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((p=s==null?void 0:s.header)==null?void 0:p.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.bb_type,onChange:l=>j("bb_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((T=s==null?void 0:s.header)==null?void 0:T.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.rru_type,onChange:l=>j("rru_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((F=s==null?void 0:s.header)==null?void 0:F.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.antenna_type,onChange:l=>j("antenna_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.frequency,onChange:l=>j("frequency",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.pci,onChange:l=>j("pci",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((V=s==null?void 0:s.header)==null?void 0:V.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.azimuth,onChange:l=>j("azimuth",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.height,onChange:l=>j("height",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.last_epo,onChange:l=>j("last_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:h.next_epo,onChange:l=>j("next_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((l,N)=>e.jsx("option",{value:l,children:l},N)))]}),e.jsx(z,{message:x.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:o,className:"mr-1",disabled:y,children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:f,loading:y,children:e.jsx("span",{children:"Confirm"})})]})]})})}function Ne(c){const{changedDataFW:n}=X(u=>u.table),s=async()=>{var u,o,h;if(n.length>0){let v=n.filter(x=>x.site_id===c.data.id)[0];if(v){const x=await axios.post(route("site.field.name.save.item"),{site_id:v==null?void 0:v.site_id,items:v==null?void 0:v.items});(u=x==null?void 0:x.data)!=null&&u.success&&K.success((h=(o=x==null?void 0:x.data)==null?void 0:o.success)==null?void 0:h.message)}}};return e.jsx(r.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:()=>{s()},children:"Save"})}function ve({addColumnDialog:c,setAddColumnDialog:n}){const{data:s,setData:u,post:o,processing:h,errors:v,reset:x}=J({type:"fw_site",name:"",key:"",input_type:"",options:""}),H=y=>{y.preventDefault(),o(route("additional.columns.save.item"),{onSuccess:()=>{n(!1),x()}})};return e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Add New Column"}),e.jsxs(r.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Name",className:"mb-1"}),e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:y=>u("name",y.target.value)}),e.jsx(z,{message:v.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Key",className:"mb-1"}),e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:y=>u("key",y.target.value)}),e.jsx(z,{message:v.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:y=>u("input_type",y.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(z,{message:v.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:y=>u("options",y.target.value)}),e.jsx(z,{message:v.options,className:"text-sm font-medium"})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:()=>n(!c),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:y=>H(y),className:"capitalize",loading:h,children:e.jsx("span",{children:"Submit"})})]})]})}function ye({hideColumnDialog:c,setHideColumnDialog:n,columns:s,hidden_columns:u,deleted_columns:o}){const h=()=>n(!c),[v,x]=m.useState([]),{data:H,setData:y,post:b,processing:P,errors:B,reset:C}=J({type:"fw_site",key:"hide",items:(u==null?void 0:u.length)>0?u:[]});m.useEffect(()=>{c&&x(f=>[...s.filter(_=>!o.includes(_.key)).map(_=>({key:_.key,name:_.name}))])},[c]);const g=(f,k)=>{const _=f.target.checked;y(S=>_?{...S,items:[...S.items,k]}:{...S,items:S.items.filter(p=>p!==k)})},j=f=>{f.preventDefault(),b(route("hide.columns.item"),{onSuccess:()=>{n(!1),C()}})};return e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Hide Column"}),e.jsx(r.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(v==null?void 0:v.length)>0&&v.map((f,k)=>e.jsx(Q.Fragment,{children:e.jsx(r.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(r.Typography,{color:"blue-gray",className:"font-medium text-sm",children:f==null?void 0:f.name}),onChange:_=>g(_,f==null?void 0:f.key),defaultChecked:u==null?void 0:u.includes(f==null?void 0:f.key)})},k))})]})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:h,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:f=>{j(f)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function ge({renameColumnDialog:c,setRenameColumnDialog:n,columns:s,deleted_columns:u}){var B;const{data:o,setData:h,post:v,processing:x,errors:H,reset:y}=J({type:"fw_site",key:"rename",items:[]});m.useEffect(()=>{c&&h(C=>{const g=[...s.filter(j=>!u.includes(j.key)).map(j=>({key:j.key,name:j.name}))];return{...C,items:g}})},[c]);const b=(C,g)=>{h(j=>({...j,items:j.items.map(f=>f.key===C?{...f,name:g}:f)}))},P=C=>{C.preventDefault(),v(route("rename.columns.item"),{onSuccess:()=>{n(!1),y()}})};return e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Rename Columns"}),e.jsx(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(o==null?void 0:o.items.length)>0&&((B=o==null?void 0:o.items)==null?void 0:B.map((C,g)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(D,{className:"w-full text-sm font-medium text-gray-600",value:C==null?void 0:C.name,onChange:j=>b(C==null?void 0:C.key,j.target.value)})},g)))})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"Cancel"}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:C=>P(C),loading:x,children:"Submit"})]})]})}function pe({deleteColumnDialog:c,setDeleteColumnDialog:n,columns:s,deleted_columns:u}){const{data:o,setData:h,post:v,processing:x,errors:H,reset:y}=J({type:"fw_site",key:"delete",items:[]}),[b,P]=m.useState([]);m.useEffect(()=>{c&&P(g=>[...s.filter(f=>!u.includes(f.key)).map(f=>({key:f.key,name:f.name}))])},[c]);const B=(g,j)=>{const f=g.target.checked;h(k=>f?{...k,items:[...k.items,j]}:{...k,items:k.items.filter(_=>_!==j)})},C=g=>{g.preventDefault(),v(route("delete.columns.item"),{onSuccess:()=>{n(!1),y()}})};return e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Delete Columns"}),e.jsx(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(b==null?void 0:b.length)>0&&b.map((g,j)=>e.jsx(Q.Fragment,{children:e.jsx(r.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(r.Typography,{color:"blue-gray",className:"font-medium text-sm",children:g==null?void 0:g.name}),onChange:f=>{B(f,g==null?void 0:g.key)}})},j))})]})}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"Cancel"}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:g=>{C(g)},loading:x,children:"Submit"})]})]})}function we({arrangeColumnDialog:c,setArrangeColumnDialog:n,columns:s,deleted_columns:u}){const[o,h]=m.useState([]),[v,x]=m.useState(null),{data:H,setData:y,post:b,processing:P,errors:B,reset:C}=J({type:"fw_site",key:"arrange",items:[]});m.useEffect(()=>{c&&h(S=>[...(F=>F.map(($,A)=>({...$,position:A+1})))(s.filter(F=>!u.includes(F.key)).map(F=>({key:F.key,name:F.name})))])},[c]);const g=(S,p)=>{x(p)},j=()=>{x(null)},f=S=>{S.preventDefault()},k=(S,p)=>{if(!v)return;const T=o.indexOf(v),F=o.indexOf(p);if(T!==-1&&F!==-1){const A=[...(R=>R.map((M,l)=>({...M,position:l+1})))(o)],[V]=A.splice(T,1);A.splice(F,0,V);const W=A.map((R,M)=>({...R,position:M+1}));h(W);const q=W.map(R=>({key:R.key,position:R.position}));y("items",q)}},_=S=>{S.preventDefault(),b(route("rearrange.columns.item"),{onSuccess:()=>{n(!1),C()}})};return e.jsxs(r.Dialog,{open:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(r.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(o==null?void 0:o.length)>0&&(o==null?void 0:o.map((S,p)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:T=>g(T,S),onDragEnd:j,onDragOver:f,onDrop:T=>k(T,S),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(xe,{strokeWidth:1.5,size:18})}),S.name]})},p)))})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>n(!1),children:"cancel"}),e.jsx(r.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:S=>_(S),loading:P,children:"Submit"})]})]})}function be({columns:c,hidden_columns:n,deleted_columns:s}){const[u,o]=m.useState(!1),[h,v]=m.useState(!1),[x,H]=m.useState(!1),[y,b]=m.useState(!1),[P,B]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{o(!0)},children:"Add New Column"}),e.jsx(ve,{addColumnDialog:u,setAddColumnDialog:o}),e.jsx(ye,{hideColumnDialog:h,setHideColumnDialog:v,columns:c,hidden_columns:n,deleted_columns:s}),e.jsx(ge,{renameColumnDialog:x,setRenameColumnDialog:H,columns:c,deleted_columns:s}),e.jsx(pe,{deleteColumnDialog:y,setDeleteColumnDialog:b,columns:c,deleted_columns:s}),e.jsx(we,{arrangeColumnDialog:P,setArrangeColumnDialog:B,columns:c,deleted_columns:s})]})}function Ce({site_id:c}){const{processing:n,delete:s}=J(),[u,o]=m.useState(!1),h={onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},v=()=>{s(route("site.field.name.destroy",c),{preserveScroll:!0,onSuccess:()=>{G.visit(route("site.field.name.index"))}})};return e.jsx(Q.Fragment,{children:e.jsxs(r.Popover,{placement:"top-end",open:u,handler:o,children:[e.jsx(r.PopoverHandler,{...h,children:e.jsx(r.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:()=>setOpen(!0),children:e.jsx(ae,{size:14})})}),e.jsxs(r.PopoverContent,{...h,className:"px-3",children:[e.jsx(r.Typography,{variant:"h6",className:"text-center",children:"Are you sure?"}),e.jsx(r.Typography,{variant:"small",className:"font-normal",children:"This cannot be reverted back."}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx(r.Button,{variant:"text",color:"red",size:"sm",className:"capitalize rounded",onClick:()=>o(!1),children:"Cancel"}),e.jsx(r.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize rounded",onClick:v,children:"Delete"})]})]})]})})}const Se=()=>{const c=ee(),{addNewRowDataFW:n}=X(o=>o.table),s=o=>{if(console.log(n),o.preventDefault(),!n.site_name)return K.error("Site name is required");G.post(route("site.field.name.add.row"),{newItem:n},{onSuccess:()=>{c(Z(!1)),K.success("Row Added successfully")}})},u=()=>{c(Z(!1)),te({})};return e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",onClick:s,children:"Save"}),e.jsx(r.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:u,children:e.jsx(ae,{size:14})})]})};function _e({setAddNewRow:c}){const n=ee(),{addNewRowDataFW:s}=X(b=>b.table),u=["opti_type_1","opti_type_5","opti_type_6"],o=["in_progress","not_started","completed"],h=m.useMemo(()=>({editable:!0})),[v]=m.useState([{headerName:"Site Name",field:"site_name"},{headerName:"Cell Name",field:"cell_name"},{headerName:"Lon",field:"lon"},{headerName:"Lat",field:"lat"},{headerName:"BB Type",field:"bb_type"},{headerName:"RRU Type",field:"rru_type"},{headerName:"Antenna Type",field:"antenna_type"},{headerName:"Frequency",field:"frequency"},{headerName:"PCI",field:"pci"},{headerName:"Azimuth",field:"azimuth"},{headerName:"Height",field:"height"},{headerName:"Last EPO",field:"last_epo"},{headerName:"Next EPO",field:"next_epo"},{headerName:"Start Date",field:"start_date"},{headerName:"End Date",field:"end_date"},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:u}},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:o}},{headerName:"Remarks",field:"remarks"},{headerName:"Artifacts",field:"artifacts",editable:!1},{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:Se}]),[x,H]=m.useState([{loc_id:"",wntd:"",imsi:"",version:"",avc:"",bw_profile:"",lon:"",lat:"",site_name:"",home_cell:"",home_pci:"",traffic_profile:"",deleted_at:null,remarks:"",artifacts:"",solution_type:"",start_date:new Date,status:"",end_date:new Date}]),y=b=>{var B;const P={...s};n(te({...P,[(B=b==null?void 0:b.colDef)==null?void 0:B.field]:b==null?void 0:b.value}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto overflow-hidden",children:e.jsx("div",{className:"ag-theme-quartz",style:{height:100},children:e.jsx(ne,{rowData:x,columnDefs:v,defaultColDef:h,onCellValueChanged:y})})})})}const le=c=>e.jsxs("div",{className:"flex gap-5 my-2",children:[e.jsx(Ne,{...c}),e.jsx(Ce,{...c})]});function $e({auth:c,sites:n,get_data:s,batch:u,additional_columns:o,hidden_columns:h,renamed_columns:v,deleted_columns:x,arrange_columns:H}){var Y;const y=m.useRef(),{role:b}=c,P=ee(),{addNewRowFW:B}=X(t=>t.table),C=m.useMemo(()=>({editable:!0,filter:!0})),g=["opti_type_1","opti_type_5","opti_type_6"],j=["in_progress","not_started","completed"];m.useEffect(()=>{var t;((t=n==null?void 0:n.data)==null?void 0:t.length)>0&&(n==null||n.data.map(d=>{if(d.end_date||d.start_date){let w=d!=null&&d.end_date?new Date(d==null?void 0:d.end_date):new Date,a=d!=null&&d.start_date?new Date(d==null?void 0:d.start_date):new Date;d.start_date=a,d.end_date=w}return d}),T(n))},[n==null?void 0:n.data]);const[f,k]=m.useState([{headerName:"Site Name",field:"site_name"},{headerName:"Cell Name",field:"cell_name"},{headerName:"Lon",field:"lon"},{headerName:"Lat",field:"lat"},{headerName:"BB Type",field:"bb_type"},{headerName:"RRU Type",field:"rru_type"},{headerName:"Antenna Type",field:"antenna_type"},{headerName:"Frequency",field:"frequency"},{headerName:"PCI",field:"pci"},{headerName:"Azimuth",field:"azimuth"},{headerName:"Height",field:"height"},{headerName:"Last EPO",field:"last_epo"},{headerName:"Next EPO",field:"next_epo"},{headerName:"Start Date",field:"start_date",input_type:"date",valueFormatter:t=>{if(!t.value)return"";const d=t.value.getMonth()+1,w=t.value.getDate();return`${t.value.getFullYear()}-${d<10?"0"+d:d}-${w<10?"0"+w:w}`},cellEditor:"agDateCellEditor",filter:!1},{headerName:"End Date",field:"end_date",valueFormatter:t=>{if(!t.value)return"";const d=t.value.getMonth()+1,w=t.value.getDate();return`${t.value.getFullYear()}-${d<10?"0"+d:d}-${w<10?"0"+w:w}`},cellEditor:"agDateCellEditor",filter:!1},{headerName:"Solution Type",field:"solution_type",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:g}},{headerName:"Status",field:"status",cellEditor:"agSelectCellEditor",filterParams:{caseSensitive:!0,defaultOption:"startsWith"},cellEditorParams:{values:j}},{headerName:"Remarks",field:"remarks"},{headerName:"Artifacts",field:"artifacts",cellRenderer:fe,editable:!1},{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:le}]);m.useRef(null),m.useState(s!=null&&s.search?s==null?void 0:s.search:"");const[_,S]=m.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[p,T]=m.useState([]),[F,$]=m.useState(!1),[A,V]=m.useState(""),[W,q]=m.useState(null),[R,M]=m.useState([]);m.useEffect(()=>{function t(d){const w=d==null?void 0:d.map(a=>{let i={};return(a==null?void 0:a.input_type)==="date"?i={headerName:a==null?void 0:a.name.toUpperCase(),field:a==null?void 0:a.name,valueFormatter:O=>{if(!O.value)return"";const I=O.value.getMonth()+1,U=O.value.getDate();return`${O.value.getFullYear()}-${I<10?"0"+I:I}-${U<10?"0"+U:U}`},cellEditor:"agDateCellEditor",filter:!1}:(a==null?void 0:a.input_type)==="text"?i={headerName:a==null?void 0:a.name.toUpperCase(),field:a==null?void 0:a.name}:(a==null?void 0:a.input_type)==="dropdown"&&(i={headerName:a==null?void 0:a.name.toUpperCase(),field:a==null?void 0:a.name,cellEditorParams:{values:JSON.parse(a==null?void 0:a.options)}}),i});console.log(w),k([...table_hader_constant,...w,{headerName:"",field:"",editable:!1,filter:!1,cellRenderer:le}])}(o==null?void 0:o.length)>0&&(console.log(o,"additional_columns"),t(o))},[o]),m.useEffect(()=>{R.length>0&&P(ce(R))},[R]);const l=t=>{const d=R.findIndex(w=>{var a,i;return w.site_id===((a=t==null?void 0:t.data)==null?void 0:a.id)&&w.loc_id===((i=t==null?void 0:t.data)==null?void 0:i.loc_id)});M(d!==-1?w=>{var i;const a=[...w];return a[d]={...a[d],items:{...a[d].items,[(i=t==null?void 0:t.colDef)==null?void 0:i.field]:t==null?void 0:t.value}},a}:w=>{var a,i,O;return[...w,{site_id:(a=t==null?void 0:t.data)==null?void 0:a.id,loc_id:(i=t==null?void 0:t.data)==null?void 0:i.loc_id,items:{[(O=t==null?void 0:t.colDef)==null?void 0:O.field]:t==null?void 0:t.value}}]})},N=t=>{S(t),G.get(route("site.field.name.index",{...s,per_page:t}))};m.useEffect(()=>{u!=null&&u.batch_field_id&&q(u==null?void 0:u.batch_field_id)},[]),m.useEffect(()=>{const t=async()=>{var w,a,i;try{let O=0;const I=await re.get(route("import.progress",{batchId:W}));if(I!=null&&I.data){let U=parseInt((w=I==null?void 0:I.data)==null?void 0:w.total_jobs),oe=parseInt((a=I==null?void 0:I.data)==null?void 0:a.pending_jobs),de=U-oe;parseInt((i=I==null?void 0:I.data)==null?void 0:i.failed_jobs)>0?clearInterval(d):(O=parseInt(de/U*100).toFixed(0),O<100?K.loading(`CSV Data Import Progress: ${O}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(K.dismiss("loading-toast"),clearInterval(d)))}}catch(O){console.log(O)}},d=setInterval(()=>{W&&t()},5e3);return()=>clearInterval(d)},[W]);const L=()=>{var d;((d=y.current.props)==null?void 0:d.columnDefs).forEach(w=>{const a=w.field,i=y.current.api.getColumnFilterModel(a);console.log(i),i!=null&&i.filter&&G.get(route("site.field.name.index",{search:i==null?void 0:i.filter}))})};return e.jsxs(ue,{user:c==null?void 0:c.user,children:[e.jsx(ie,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsxs("div",{className:"bg-white shadow rounded py-3 px-5 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(r.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(se,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(se,{href:route("site.field.name.index"),children:"FW Site"})})]})]})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[b==="super-admin"&&e.jsx(e.Fragment,{}),e.jsx(me,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(r.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[(p==null?void 0:p.data)&&((Y=p==null?void 0:p.data)==null?void 0:Y.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ag-theme-quartz",style:{height:500},children:e.jsx(ne,{ref:y,rowData:p==null?void 0:p.data,columnDefs:f,defaultColDef:C,onCellValueChanged:l,onFilterChanged:L})}),B&&e.jsx(_e,{tableHeader:f})]}),(p==null?void 0:p.length)===0&&e.jsx(r.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"pagination flex justify-between items-center",children:[e.jsxs("div",{className:"px-4 flex gap-5",children:[e.jsx(r.Button,{variant:"gradient",size:"sm",className:"capitalize rounded text-sm",onClick:()=>{P(Z(!0))},children:"Add New Row"}),e.jsx(be,{columns:f,hidden_columns:h,deleted_columns:x||[]})]}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:_,onChange:t=>{N(t.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${n==null?void 0:n.from}-${n==null?void 0:n.to} of ${n==null?void 0:n.total} Records`}),e.jsx(he,{links:p==null?void 0:p.links,perPage:_})]})]})]})}),e.jsx(je,{mappingDialog:F,setMappingDialog:$,mappingData:A,setBatchId:q})]})]})}export{$e as default};
