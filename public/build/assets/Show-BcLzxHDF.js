import{j as e,Y as b,a as p,R as y}from"./app-CAPyA-I5.js";import{A as v}from"./AuthenticatedLayout-DX7MQPuv.js";import{r as d}from"./index-BmaSszKO.js";import{U as w,F as _,I as T}from"./UploadItemField-DwBVcVqX.js";import{p as u}from"./format-utaHABU8.js";import"./transition-BwUPmZSd.js";import"./index-D24mBKj_.js";import"./createLucideIcon-VFqdoHTN.js";import"./floating-ui.dom-BJX5GPEt.js";function H({auth:t,site:l,trackings:m}){const f=["LOCID","WNTD","IMSI","VERSION","AVC","BW Profile","Lon","Lat","SiteName","HomeCell","HomePCI","Traffic Profile","Start Date","End Date","Solution Type","Status","Remarks","Artifacts"],n=(a,r)=>{var c,x;if(a)return r==="start_date"||r==="end_date"?j((c=a[r])==null?void 0:c.value):(x=a[r])==null?void 0:x.value},j=a=>{if(a){const r=new Date(a);return u(r,"MM/dd/yyyy")}},N=({files:a})=>{if(a){const r=JSON.parse(a),c=o=>o.split(".").pop(),x=o=>{const h=o.split("/");let s=h[h.length-1];return s=s.replace(/^\d+_/,""),s},i=(o,h)=>{const s=document.createElement("a");s.href=o,s.download=h,document.body.appendChild(s),s.click(),document.body.removeChild(s)};return e.jsx("div",{className:"flex mt-3",children:r==null?void 0:r.map((o,h)=>e.jsxs(y.Fragment,{children:[c(o)==="csv"&&e.jsx(d.Tooltip,{content:x(o),children:e.jsx(_,{onClick:()=>i(o,x(o)),className:"cursor-pointer"})}),c(o)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),c(o)==="pdf"&&e.jsx(d.Tooltip,{content:x(o),children:e.jsx(T,{})})]},h))})}};return e.jsxs(v,{user:t==null?void 0:t.user,children:[e.jsx(b,{title:"Site"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(d.Typography,{variant:"h3",className:"tracking-tight",children:l==null?void 0:l.loc_id}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(p,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(p,{href:route("wireless.sites.index"),children:"WNTD"})})]})]})})}),e.jsx("div",{className:"content mt-6",children:e.jsx(d.Card,{className:"h-full w-full rounded-none",children:e.jsx("div",{className:"overflow-x-auto overflow-hidden",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsx("tr",{children:f.map(a=>e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer",children:e.jsx("div",{className:"flex justify-between",children:e.jsx(d.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:a})})},a))})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:e.jsx(p,{href:route("wireless.show.location.index",l==null?void 0:l.loc_id),children:l==null?void 0:l.loc_id})}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.wntd}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.imsi}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.version}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.avc}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.bw_profile}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2 w-20",children:l==null?void 0:l.lon}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2 w-20",children:l==null?void 0:l.lat}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.site_name}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.home_cell}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.home_pci}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:l==null?void 0:l.traffic_profile}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:n(l==null?void 0:l.tracking,"start_date")}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2",children:n(l==null?void 0:l.tracking,"end_date")}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2 capitalize",children:n(l==null?void 0:l.tracking,"solution_type")}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2 capitalize",children:n(l==null?void 0:l.tracking,"status")}),e.jsx("td",{className:"border-l h-10 text-[12px] font-medium ps-2 capitalize",children:n(l==null?void 0:l.tracking,"remarks")}),e.jsx("td",{className:"border-l h-10",children:e.jsx(w,{value:n(l==null?void 0:l.tracking,"artifacts"),name:"artifacts",locId:l.loc_id,siteId:l.id,single:!0})})]},l.id)})]})})})}),e.jsx("div",{children:e.jsx("div",{className:"py-12 px-12 relative z-10",children:e.jsx(d.Timeline,{children:m==null?void 0:m.map((a,r)=>e.jsxs(d.TimelineItem,{children:[r+1!==(m==null?void 0:m.length)&&e.jsx(d.TimelineConnector,{}),e.jsxs(d.TimelineHeader,{className:"h-3",children:[e.jsx(d.TimelineIcon,{}),e.jsx(d.Typography,{variant:"h6",color:"blue-gray",className:"leading-none",children:u(new Date(a.created_at),"MMMM dd, yyyy HH:mm:ss")})]}),e.jsx(d.TimelineBody,{className:"pb-8",children:(a==null?void 0:a.key)==="artifacts"?e.jsxs(d.Typography,{variant:"small",color:"gray",className:"font-normal text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:a==null?void 0:a.user.name})," Uploaded New  ",e.jsx("span",{className:"capitalize font-semibold",children:a.key?a.key.replace(/_/g," "):""}),(a==null?void 0:a.value)&&e.jsx(N,{files:a==null?void 0:a.value})]}):e.jsxs(d.Typography,{variant:"small",color:"gray",className:"font-normal text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:a==null?void 0:a.user.name})," changed value of ",e.jsx("span",{className:"capitalize font-semibold",children:a.key?a.key.replace(/_/g," "):""})," to",e.jsx("span",{className:"capitalize block",children:(a==null?void 0:a.key)==="start_date"||(a==null?void 0:a.key)==="end_date"?j(a.value):a.value})]})})]},r))})})})]})}export{H as default};
