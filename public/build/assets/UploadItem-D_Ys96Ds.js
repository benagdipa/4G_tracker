import{r as w,W as C,j as e}from"./app-MeaRoDMw.js";import{r as t}from"./index-Ck9CppQy.js";import{u as I,F as p,I as U}from"./index-B1ynsPwE.js";import{D as y}from"./download-_xNUqRhz.js";function E(l){var f;const{data:s}=l,x=()=>j(!h),[h,j]=w.useState(!1),{data:o,setData:u,post:g,processing:N,reset:v}=C({site_id:s==null?void 0:s.id,field_name:(f=l==null?void 0:l.colDef)==null?void 0:f.field,artifacts:[]}),{getRootProps:F,getInputProps:b}=I({onDrop:n=>{u("artifacts",[...o.artifacts,...n.map(i=>Object.assign(i,{preview:URL.createObjectURL(i)}))])}}),z=o==null?void 0:o.artifacts.map(n=>e.jsxs("li",{children:[n.path," - ",n.size," bytes"]},n.path)),O=()=>{g(route("site.field.name.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{v(),j(!1)}})},S=({files:n})=>{if(n){const i=JSON.parse(n),c=r=>r.split(".").pop(),a=r=>{const d=r.split("/");let m=d[d.length-1];return m=m.replace(/^\d+_/,""),m};return e.jsx("div",{className:"flex ps-2",children:i.map((r,d)=>e.jsxs("div",{className:"",children:[c(r)==="csv"&&e.jsx(t.Tooltip,{content:a(r),children:e.jsx(p,{size:18})}),c(r)==="xlsx"&&e.jsx(t.Tooltip,{content:a(r),children:e.jsx(p,{size:18})}),c(r)==="xls"&&e.jsx(t.Tooltip,{content:a(r),children:e.jsx(p,{size:18})}),c(r)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),c(r)==="pdf"&&e.jsx(t.Tooltip,{content:a(r),children:e.jsx(U,{})})]},d))})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-center items-center",children:[" ",e.jsx("button",{className:"font-medium text-[12px] w-[70%]",onClick:x,children:"upload"}),e.jsxs(e.Fragment,{children:[" ",(s==null?void 0:s.artifacts)&&e.jsx("a",{href:`/dashboard/wireless-sites/artifacts/?q=${JSON.parse(s==null?void 0:s.artifacts)}`,children:e.jsx(y,{className:"cursor-pointer",size:20})})]})]}),(s==null?void 0:s.artifacts)&&e.jsx(e.Fragment,{children:JSON.parse(s==null?void 0:s.artifacts).length>0&&e.jsx(S,{files:s!=null&&s.value?s==null?void 0:s.value:""})}),e.jsxs(t.Dialog,{open:h,handler:x,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(t.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...F({className:"dropzone"}),children:[e.jsx("input",{...b()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(o==null?void 0:o.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:z})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:x,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:O,loading:N,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{E as U};
