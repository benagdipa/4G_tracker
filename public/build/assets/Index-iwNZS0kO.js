import{r as y,j as e,W as D,R as Y,b as G,y as U,Y as te,a as I}from"./app-C6jrbMoX.js";import{r as n}from"./index-f3svSaYE.js";import{_ as V,A as ne,C as oe}from"./AuthenticatedLayout-C0WuoabP.js";import{D as ce,S as ae,E as de,C as ie,P as xe}from"./ExportButton-5HppZy2w.js";import{T as Q}from"./TextInput-BIPnZpur.js";import{u as ue,F as K,I as he}from"./index-rLrgfTGh.js";import{I as S}from"./InputLabel-CSMFfQvb.js";import{I as _}from"./InputError-B7AkdK5t.js";import"./transition-0TAARjeD.js";function X({siteId:x,name:c,value:s,handleEditAbleItem:u}){const[d,i]=y.useState(s||""),v=r=>{i(r),u(x,c,r)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(ce,{selected:d,onChange:r=>v(r),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function Z({siteId:x,name:c,value:s,options:u,handleEditAbleItem:d}){const[i,v]=y.useState(s||""),r=N=>{v(N),d(x,c,N)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:i,onChange:N=>{r(N.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),u.length>0&&u.map((N,f)=>e.jsx("option",{value:N.value,children:N.label},f))]})})}function se({siteId:x,name:c,value:s,handleEditAbleItem:u}){const[d,i]=y.useState(s||""),v=r=>{i(r),u(x,c,r)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:d,rows:1,onChange:r=>{v(r.target.value)}})})}function fe({siteId:x,name:c,value:s,single:u=!1}){const d=()=>v(!i),[i,v]=y.useState(!1),{data:r,setData:N,post:f,processing:w,reset:k}=D({site_id:x,field_name:c,artifacts:[]}),{getRootProps:T,getInputProps:E}=ue({onDrop:g=>{N("artifacts",[...r.artifacts,...g.map(B=>Object.assign(B,{preview:URL.createObjectURL(B)}))])}}),o=r==null?void 0:r.artifacts.map(g=>e.jsxs("li",{children:[g.path," - ",g.size," bytes"]},g.path)),j=()=>{f(route("site.field.name.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{k(),v(!1)}})},$=({files:g})=>{if(g){const B=JSON.parse(g),P=b=>b.split(".").pop(),A=b=>{const O=b.split("/");let H=O[O.length-1];return H=H.replace(/^\d+_/,""),H};return e.jsx("div",{className:"flex ps-2",children:B.map((b,O)=>e.jsxs("div",{className:`${u?"pt-2":""}`,children:[P(b)==="csv"&&e.jsx(n.Tooltip,{content:A(b),children:e.jsx(K,{size:18})}),P(b)==="xlsx"&&e.jsx(n.Tooltip,{content:A(b),children:e.jsx(K,{size:18})}),P(b)==="xls"&&e.jsx(n.Tooltip,{content:A(b),children:e.jsx(K,{size:18})}),P(b)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),P(b)==="pdf"&&e.jsx(n.Tooltip,{content:A(b),children:e.jsx(he,{})})]},O))})}};return e.jsxs("div",{className:"w-full h-full",children:[!u&&e.jsx("button",{className:"font-medium text-[12px] opacity-0",onClick:d,children:"Uplaod"}),s&&e.jsx($,{files:s||""}),e.jsxs(n.Dialog,{open:i,handler:d,size:"xs",children:[e.jsx(n.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(n.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...T({className:"dropzone"}),children:[e.jsx("input",{...E()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(r==null?void 0:r.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:o})]})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:d,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:j,loading:w,children:e.jsx("span",{children:"Confirm"})})]})]})]})}function je({mappingDialog:x,setMappingDialog:c,mappingData:s,setBatchId:u}){var g,B,P,A,b,O,H,M,J,L,R,q,W;const d=()=>c(!x),[i,v]=y.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[r,N]=y.useState({}),[f,w]=y.useState(!1),[k,T]=y.useState(""),[E,o]=y.useState(""),j=(t,a)=>{v(l=>({...l,[t]:a}))};y.useEffect(()=>{j("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const $=async t=>{var l,p,C,z,F,m;t.preventDefault();let a={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(h=>{i[h]||(a[h]="This field is required.")}),N(a),Object.keys(a).length>0){console.log(a);return}try{w(!0);const h=await G.post(route("site.field.map.save"),i);h!=null&&h.data&&(o((p=(l=h==null?void 0:h.data)==null?void 0:l.success)==null?void 0:p.message),u((C=h==null?void 0:h.data)==null?void 0:C.batch_id),setTimeout(()=>{c(!1),o(""),T("")},3e3),U.visit(route("site.field.name.index")))}catch(h){console.log("error:",h),T(`${(m=(F=(z=h==null?void 0:h.response)==null?void 0:z.data)==null?void 0:F.error)==null?void 0:m.message}`)}finally{w(!1)}};return e.jsx(Y.Fragment,{children:e.jsxs(n.Dialog,{open:x,size:"xs",children:[e.jsx(n.DialogHeader,{children:"CSV Mapping"}),k&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:k}),E&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:E}),e.jsxs(n.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.site_name,onChange:t=>j("site_name",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((g=s==null?void 0:s.header)==null?void 0:g.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.cell_name,onChange:t=>j("cell_name",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((B=s==null?void 0:s.header)==null?void 0:B.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.lon,onChange:t=>j("lon",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.lat,onChange:t=>j("lat",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.bb_type,onChange:t=>j("bb_type",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((b=s==null?void 0:s.header)==null?void 0:b.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.rru_type,onChange:t=>j("rru_type",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((O=s==null?void 0:s.header)==null?void 0:O.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.antenna_type,onChange:t=>j("antenna_type",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((H=s==null?void 0:s.header)==null?void 0:H.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.frequency,onChange:t=>j("frequency",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.pci,onChange:t=>j("pci",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((J=s==null?void 0:s.header)==null?void 0:J.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.azimuth,onChange:t=>j("azimuth",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.height,onChange:t=>j("height",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.last_epo,onChange:t=>j("last_epo",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:i.next_epo,onChange:t=>j("next_epo",t.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((t,a)=>e.jsx("option",{value:t,children:t},a)))]}),e.jsx(_,{message:r.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:d,className:"mr-1",disabled:f,children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:$,loading:f,children:e.jsx("span",{children:"Confirm"})})]})]})})}function me({site_id:x,changedItems:c,setChangedItems:s}){const[u,d]=y.useState(!1),i=async v=>{var r,N,f;if(c.length>0){let w=c.filter(k=>k.site_id===v)[0];if(w){d(!0);const k=await axios.post(route("site.field.name.save.item"),{site_id:w==null?void 0:w.site_id,items:w==null?void 0:w.items});(r=k==null?void 0:k.data)!=null&&r.success&&(d(!1),V.success((f=(N=k==null?void 0:k.data)==null?void 0:N.success)==null?void 0:f.message),s(T=>T.filter(E=>E.site_id!==v)))}}};return e.jsx(n.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!c.some(v=>v.site_id===x),onClick:()=>{i(x)},loading:u,children:"Save"})}function ve(){const[x,c]=y.useState(!1),{data:s,setData:u,post:d,processing:i,errors:v,reset:r}=D({type:"fw_site",name:"",key:"",input_type:"",options:""}),N=f=>{f.preventDefault(),d(route("additional.columns.save.item"),{onSuccess:()=>{c(!1),r()}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"add-column",children:e.jsx(n.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:()=>{c(!0)},children:"Add Column"})}),e.jsxs(n.Dialog,{open:x,size:"xs",children:[e.jsx(n.DialogHeader,{children:"Add New Column"}),e.jsxs(n.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(S,{value:"Column Name",className:"mb-1"}),e.jsx(Q,{className:"w-full text-sm font-normal",placeholder:"Column Name...",value:s.name,onChange:f=>u("name",f.target.value)}),e.jsx(_,{message:v.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(S,{value:"Column Key",className:"mb-1"}),e.jsx(Q,{className:"w-full text-sm font-normal",placeholder:"Column key...",value:s.key,onChange:f=>u("key",f.target.value)}),e.jsx(_,{message:v.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(S,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:f=>u("input_type",f.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(_,{message:v.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(S,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:f=>u("options",f.target.value)}),e.jsx(_,{message:v.options,className:"text-sm font-medium"})]})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:()=>c(!x),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:f=>N(f),className:"capitalize",loading:i,children:e.jsx("span",{children:"Submit"})})]})]})]})}const ye={text:se,date:X,dropdown:Z};function Ne({column:x,item:c,value:s,handleEditAbleItem:u}){const d=ye[x.input_type];return e.jsx(d,{siteId:c==null?void 0:c.id,name:x.key,value:s,handleEditAbleItem:u,options:JSON.parse(x==null?void 0:x.options)})}function be({columns:x,additional_columns:c,hidden_columns:s}){const[u,d]=y.useState(!1),i=()=>d(!u),{data:v,setData:r,post:N,processing:f,errors:w,reset:k}=D({type:"fw_site",key:"hide",items:(s==null?void 0:s.length)>0?s:[]}),T=(o,j)=>{const $=o.target.checked;r(g=>$?{...g,items:[...g.items,j]}:{...g,items:g.items.filter(B=>B!==j)})},E=o=>{o.preventDefault(),N(route("hide.columns.item"),{onSuccess:()=>{d(!1),k()}})};return e.jsxs(e.Fragment,{children:[e.jsx(n.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:i,children:"Hide Column"}),e.jsxs(n.Dialog,{open:u,size:"xs",children:[e.jsx(n.DialogHeader,{children:"Hide Column"}),e.jsx(n.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsxs("div",{className:"form-item grid grid-cols-2",children:[(x==null?void 0:x.length)>0&&x.map((o,j)=>e.jsx(Y.Fragment,{children:e.jsx(n.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(n.Typography,{color:"blue-gray",className:"font-medium text-sm",children:o==null?void 0:o.name}),onChange:$=>T($,o==null?void 0:o.key),defaultChecked:s==null?void 0:s.includes(o==null?void 0:o.key)})},j)),(c==null?void 0:c.length)>0&&c.map((o,j)=>e.jsx(Y.Fragment,{children:e.jsx(n.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(n.Typography,{color:"blue-gray",className:"font-medium text-sm",children:o==null?void 0:o.name}),onChange:$=>T($,o==null?void 0:o.key),defaultChecked:s==null?void 0:s.includes(o==null?void 0:o.key)})},j))]})]})}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:i,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:o=>{E(o)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})]})}function $e({auth:x,sites:c,get_data:s,batch:u,additional_columns:d,hidden_columns:i}){var a;const{role:v}=x,r=JSON.parse(i),N=[{name:"Site Name",sortable:!0,key:"site_name"},{name:"Cell Name",sortable:!0,key:"cell_name"},{name:"Lon",sortable:!0,key:"lon"},{name:"Lat",sortable:!0,key:"lat"},{name:"BB Type",sortable:!0,key:"bb_type"},{name:"RRU Type",sortable:!0,key:"rru_type"},{name:"Antenna Type",sortable:!0,key:"antenna_type"},{name:"Frequency",sortable:!0,key:"frequency"},{name:"PCI",sortable:!1,key:"pci"},{name:"Azimuth",sortable:!1,key:"azimuth"},{name:"Height",sortable:!1,key:"height"},{name:"Last EPO",sortable:!1,key:"last_epo"},{name:"Next EPO",sortable:!1,key:"next_epo"},{name:"Solution Type",sortable:!1,key:"solution_type"},{name:"Start Date",sortable:!1,key:"start_date"},{name:"End Date",sortable:!1,key:"end_date"},{name:"Status",sortable:!1,key:"status"},{name:"Remarks",sortable:!1,key:"remarks"},{name:"Artifacts",sortable:!1,key:"artifacts"}],f=y.useRef(null),[w,k]=y.useState(s!=null&&s.search?s==null?void 0:s.search:""),[T,E]=y.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[o]=y.useState(c),[j,$]=y.useState(!1),[g,B]=y.useState(""),[P,A]=y.useState(null),[b,O]=y.useState([]),H=l=>{f.current.click()},M=async l=>{var C,z,F;const p=new FormData;p.append("import_file",l.target.files[0]);try{const m=await G.post(route("site.field.name.import"),p);m!=null&&m.data&&(B(m==null?void 0:m.data),$(!0))}catch(m){V.error(`${(F=(z=(C=m==null?void 0:m.response)==null?void 0:C.data)==null?void 0:z.error)==null?void 0:F.message}`)}},J=async()=>{w&&U.get(route("site.field.name.index",{search:w}))},L=async(l,p)=>{U.get(route("site.field.name.index",{order_by:l,order:p}))},R=(l,p)=>{var C;if(l)return(C=l[p])==null?void 0:C.value},q=async(l,p)=>{U.get(route("site.field.name.index",{filter_by:l,value:p}))},W=l=>{E(l),U.get(route("site.field.name.index",{...s,per_page:l}))};y.useEffect(()=>{u!=null&&u.batch_field_id&&A(u==null?void 0:u.batch_field_id)},[]),y.useEffect(()=>{const l=async()=>{var C,z,F;try{let m=0;const h=await G.get(route("import.progress",{batchId:P}));if(h!=null&&h.data){let ee=parseInt((C=h==null?void 0:h.data)==null?void 0:C.total_jobs),le=parseInt((z=h==null?void 0:h.data)==null?void 0:z.pending_jobs),re=ee-le;parseInt((F=h==null?void 0:h.data)==null?void 0:F.failed_jobs)>0?clearInterval(p):(m=parseInt(re/ee*100).toFixed(0),m<100?V.loading(`CSV Data Import Progress: ${m}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(V.dismiss("loading-toast"),clearInterval(p)))}}catch(m){console.log(m)}},p=setInterval(()=>{P&&l()},1e3);return()=>clearInterval(p)},[P]);const t=(l,p,C)=>{const z=b.findIndex(F=>F.site_id===l);O(z!==-1?F=>{const m=[...F];return m[z]={...m[z],items:{...m[z].items,[p]:C}},m}:F=>[...F,{site_id:l,items:{[p]:C}}])};return e.jsxs(ne,{user:x==null?void 0:x.user,children:[e.jsx(te,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(n.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(I,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(I,{href:route("site.field.name.index"),children:"FW Site"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[e.jsxs("div",{className:"search-wrapper w-1/3 flex relative",children:[e.jsx(Q,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:w,onChange:l=>k(l.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(n.IconButton,{size:"sm",className:"rounded-l-none",onClick:J,children:e.jsx(ae,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>q("status",l.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>q("solution_type",l.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"opti_type_1",children:"Opti Type-1"}),e.jsx("option",{value:"opti_type_5",children:"Opti Type-5"}),e.jsx("option",{value:"opti_type_6",children:"Opti Type-6"})]})}),v==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(n.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:H,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:M,ref:f,style:{display:"none"}})]}),e.jsx(ve,{}),e.jsx(be,{columns:N,additional_columns:d,hidden_columns:r})]}),e.jsx(de,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(n.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[N.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name}),(l==null?void 0:l.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(ie,{size:12,strokeWidth:2,onClick:()=>{L(l.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(oe,{size:12,strokeWidth:2,onClick:()=>{L(l.key,"desc")}})})]})]})},l.name)),(d==null?void 0:d.length)>0&&(d==null?void 0:d.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${r!=null&&r.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsx("div",{className:"flex justify-between",children:e.jsx(n.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name})})},l.name))),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:o==null?void 0:o.data.map((l,p)=>e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("site_name")?"hidden":""}`,children:e.jsx(I,{href:"#",className:"font-semibold",children:l==null?void 0:l.site_name})}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("cell_name")?"hidden":""}`,children:l==null?void 0:l.cell_name}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lon")?"hidden":""}`,children:l==null?void 0:l.lon}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("lat")?"hidden":""}`,children:l==null?void 0:l.lat}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("bb_type")?"hidden":""}`,children:l==null?void 0:l.bb_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("rru_type")?"hidden":""}`,children:l==null?void 0:l.rru_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("antenna_type")?"hidden":""}`,children:l==null?void 0:l.antenna_type}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("frequency")?"hidden":""}`,children:l==null?void 0:l.frequency}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("pci")?"hidden":""}`,children:l==null?void 0:l.pci}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("azimuth")?"hidden":""}`,children:l==null?void 0:l.azimuth}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("height")?"hidden":""}`,children:l==null?void 0:l.height}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("last_epo")?"hidden":""}`,children:l==null?void 0:l.last_epo}),e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${r!=null&&r.includes("next_epo")?"hidden":""}`,children:l==null?void 0:l.next_epo}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("solution_type")?"hidden":""}`,children:e.jsx(Z,{value:R(l==null?void 0:l.tracking,"solution_type"),name:"solution_type",siteId:l==null?void 0:l.id,options:[{label:"Opti Type-1",value:"opti_type_1"},{label:"Opti Type-5",value:"opti_type_5"},{label:"Opti Type-6",value:"opti_type_6"}],handleEditAbleItem:t})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("start_date")?"hidden":""}`,children:e.jsx(X,{value:R(l==null?void 0:l.tracking,"start_date"),name:"start_date",siteId:l==null?void 0:l.id,handleEditAbleItem:t})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("end_date")?"hidden":""}`,children:e.jsx(X,{value:R(l==null?void 0:l.tracking,"end_date"),name:"end_date",siteId:l==null?void 0:l.id,handleEditAbleItem:t})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("status")?"hidden":""}`,children:e.jsx(Z,{value:R(l==null?void 0:l.tracking,"status"),name:"status",siteId:l==null?void 0:l.id,options:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}],handleEditAbleItem:t})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("remarks")?"hidden":""}`,children:e.jsx(se,{value:R(l==null?void 0:l.tracking,"remarks"),name:"remarks",siteId:l==null?void 0:l.id,handleEditAbleItem:t})}),e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes("artifacts")?"hidden":""}`,children:e.jsx(fe,{value:R(l==null?void 0:l.tracking,"artifacts"),name:"artifacts",siteId:l==null?void 0:l.id})}),(d==null?void 0:d.length)>0&&d.map((C,z)=>e.jsx("td",{className:`border-l h-10 ${r!=null&&r.includes(C.key)?"hidden":""}`,children:e.jsx(Ne,{column:C,item:l,value:R(l==null?void 0:l.tracking,C.key),handleEditAbleItem:t})},z)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsx(me,{site_id:l==null?void 0:l.id,changedItems:b,setChangedItems:O})})]},l==null?void 0:l.id))})]}),((a=o==null?void 0:o.data)==null?void 0:a.length)===0&&e.jsx(n.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:T,onChange:l=>{W(l.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${c==null?void 0:c.from}-${c==null?void 0:c.to} of ${c==null?void 0:c.total} Records`}),e.jsx(xe,{links:o==null?void 0:o.links,perPage:T})]})]})}),e.jsx(je,{mappingDialog:j,setMappingDialog:$,mappingData:g,setBatchId:A})]})]})}export{$e as default};
