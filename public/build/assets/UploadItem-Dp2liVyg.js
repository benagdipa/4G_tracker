import{R as S,W as y,j as e}from"./app-WkBXpZXB.js";import{r as n}from"./index-BdxLiRtc.js";import{u as z,F as I,I as R}from"./index-CxRZoBKD.js";import{D as U}from"./download-B316ynM4.js";function T(c){var h;const{data:s}=c,a=()=>p(!m),[m,p]=S.useState(!1),{data:o,setData:j,post:u,processing:g,reset:N}=y({site_id:s==null?void 0:s.id,location_id:s.loc_id,field_name:(h=c==null?void 0:c.colDef)==null?void 0:h.field,artifacts:[]}),{getRootProps:v,getInputProps:F}=z({onDrop:r=>{j("artifacts",[...o.artifacts,...r.map(i=>Object.assign(i,{preview:URL.createObjectURL(i)}))])}}),w=o==null?void 0:o.artifacts.map(r=>e.jsxs("li",{children:[r.path," - ",r.size," bytes"]},r.path)),b=()=>{u(route("wireless.sites.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{N(),p(!1)}})},C=({files:r})=>{if(r){const i=JSON.parse(r),d=t=>t.split(".").pop(),f=t=>{const l=t.split("/");let x=l[l.length-1];return x=x.replace(/^\d+_/,""),x};return e.jsx("div",{className:"flex ps-2",children:i.map((t,l)=>e.jsxs("div",{className:"",children:[d(t)==="csv"&&e.jsx(n.Tooltip,{content:f(t),children:e.jsx(I,{size:18})}),d(t)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),d(t)==="pdf"&&e.jsx(n.Tooltip,{content:f(t),children:e.jsx(R,{})})]},l))})}},O=async()=>{await axios.get(route("wireless.sites.get.artifacts"))};return e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{className:"flex justify-center items-center",children:[" ",e.jsx("button",{className:"font-medium text-[12px] w-[70%]",onClick:a,children:"upload"}),e.jsxs(e.Fragment,{children:[" ",(s==null?void 0:s.artifacts)&&e.jsx("a",{href:`/dashboard/wireless-sites/artifacts/?q=${JSON.parse(s==null?void 0:s.artifacts)}`,children:e.jsx(U,{className:"cursor-pointer",size:20,onClick:O})})]})]}),(s==null?void 0:s.artifacts)&&e.jsx(e.Fragment,{children:JSON.parse(s==null?void 0:s.artifacts).length>0&&e.jsx(C,{files:s!=null&&s.value?s==null?void 0:s.value:""})}),e.jsxs(n.Dialog,{open:m,handler:a,size:"xs",children:[e.jsx(n.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(n.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...v({className:"dropzone"}),children:[e.jsx("input",{...F()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(o==null?void 0:o.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:w})]})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:a,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:b,loading:g,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{T as U};
