import{R as m,W as R,j as e}from"./app-3pJHEf12.js";import{r}from"./index-Y7xV2V3x.js";import{u as U}from"./index-9OFpv4KG.js";import{c as j}from"./createLucideIcon-CmfSugWV.js";import"./floating-ui.dom-BJX5GPEt.js";/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=j("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function L({locId:f,siteId:g,name:u,value:i}){const c=()=>x(!p),[p,x]=m.useState(!1),{data:n,setData:y,post:v,processing:k,reset:F}=R({site_id:g,location_id:f,field_name:u,artifacts:[]}),{getRootProps:N,getInputProps:b}=U({onDrop:s=>{y("artifacts",[...n.artifacts,...s.map(a=>Object.assign(a,{preview:URL.createObjectURL(a)}))])}}),D=n==null?void 0:n.artifacts.map(s=>e.jsxs("li",{children:[s.path," - ",s.size," bytes"]},s.path)),C=()=>{v(route("wireless.sites.update.artifacts"),{preserveScroll:!0,onSuccess:()=>{F(),x(!1)}})},I=({files:s})=>{if(s){const a=JSON.parse(s),l=t=>t.split(".").pop(),h=t=>{const o=t.split("/");let d=o[o.length-1];return d=d.replace(/^\d+_/,""),d};return e.jsx("div",{className:"flex",children:a.map((t,o)=>e.jsxs(m.Fragment,{children:[l(t)==="csv"&&e.jsx(r.Tooltip,{content:h(t),children:e.jsx(q,{})}),l(t)==="txt"&&e.jsx("img",{src:"txt-icon.png",alt:"Text File Icon"}),l(t)==="pdf"&&e.jsx(r.Tooltip,{content:h(t),children:e.jsx(w,{})})]},o))})}};return e.jsxs("div",{className:"w-full h-full",children:[e.jsx("button",{className:"font-medium text-[12px] opacity-0",onClick:c,children:"Uplaod"}),i&&e.jsx(I,{files:i||""}),e.jsxs(r.Dialog,{open:p,handler:c,size:"xs",children:[e.jsx(r.DialogHeader,{children:"Upload Artifacts"}),e.jsxs(r.DialogBody,{children:[e.jsx("div",{className:"border-dashed border py-12 text-sm text-center font-medium rounded-md border-gray-300",children:e.jsxs("div",{...N({className:"dropzone"}),children:[e.jsx("input",{...b()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]})}),(n==null?void 0:n.artifacts.length)>0&&e.jsxs("aside",{children:[e.jsx("h4",{className:"font-sm font-semibold",children:"Files"}),e.jsx("ul",{className:"text-[12px] font-normal",children:D})]})]}),e.jsxs(r.DialogFooter,{children:[e.jsx(r.Button,{variant:"text",color:"red",onClick:c,className:"mr-1",children:e.jsx("span",{children:"Cancel"})}),e.jsx(r.Button,{variant:"gradient",color:"green",onClick:C,loading:k,children:e.jsx("span",{children:"Confirm"})})]})]})]})}export{L as default};
