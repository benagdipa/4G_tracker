import{r as h,j as e,R as K,d as Q,y as W}from"./app-DkFmaBGb.js";import{r as n}from"./index-BEfhJxFX.js";import{I as x}from"./InputLabel-9UjX4QNZ.js";import{I as u}from"./InputError-BwH1Y3I2.js";import"./floating-ui.dom-BJX5GPEt.js";function D({mappingDialog:i,setMappingDialog:f,mappingData:s,setBatchId:V}){var _,S,C,E,q,z,O,P,B,I,L,M,R;const U=()=>f(!i),[d,$]=h.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[o,G]=h.useState({}),[v,m]=h.useState(!1),[N,y]=h.useState(""),[b,w]=h.useState(""),t=(l,r)=>{$(j=>({...j,[l]:r}))};h.useEffect(()=>{t("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const J=async l=>{var j,T,k,F,A,H;l.preventDefault();let r={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(c=>{d[c]||(r[c]="This field is required.")}),G(r),Object.keys(r).length>0){console.log(r);return}try{m(!0);const c=await Q.post(route("site.field.map.save"),d);c!=null&&c.data&&(w((T=(j=c==null?void 0:c.data)==null?void 0:j.success)==null?void 0:T.message),V((k=c==null?void 0:c.data)==null?void 0:k.batch_id),setTimeout(()=>{f(!1),w(""),y("")},3e3),W.visit(route("site.field.name.index")))}catch(c){console.log("error:",c),y(`${(H=(A=(F=c==null?void 0:c.response)==null?void 0:F.data)==null?void 0:A.error)==null?void 0:H.message}`)}finally{m(!1)}};return e.jsx(K.Fragment,{children:e.jsxs(n.Dialog,{open:i,size:"xs",children:[e.jsx(n.DialogHeader,{children:"CSV Mapping"}),N&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:N}),b&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:b}),e.jsxs(n.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.site_name,onChange:l=>t("site_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((_=s==null?void 0:s.header)==null?void 0:_.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.cell_name,onChange:l=>t("cell_name",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((S=s==null?void 0:s.header)==null?void 0:S.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lon,onChange:l=>t("lon",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((C=s==null?void 0:s.header)==null?void 0:C.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.lat,onChange:l=>t("lat",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((E=s==null?void 0:s.header)==null?void 0:E.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.bb_type,onChange:l=>t("bb_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.rru_type,onChange:l=>t("rru_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((z=s==null?void 0:s.header)==null?void 0:z.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.antenna_type,onChange:l=>t("antenna_type",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((O=s==null?void 0:s.header)==null?void 0:O.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.frequency,onChange:l=>t("frequency",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.pci,onChange:l=>t("pci",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((B=s==null?void 0:s.header)==null?void 0:B.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.azimuth,onChange:l=>t("azimuth",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((I=s==null?void 0:s.header)==null?void 0:I.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.height,onChange:l=>t("height",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.last_epo,onChange:l=>t("last_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:d.next_epo,onChange:l=>t("next_epo",l.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((l,r)=>e.jsx("option",{value:l,children:l},r)))]}),e.jsx(u,{message:o.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"red",onClick:U,className:"mr-1",disabled:v,children:e.jsx("span",{children:"Cancel"})}),e.jsx(n.Button,{variant:"gradient",color:"green",onClick:J,loading:v,children:e.jsx("span",{children:"Confirm"})})]})]})})}export{D as default};
