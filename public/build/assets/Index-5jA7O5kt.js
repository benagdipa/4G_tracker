import{r as v,j as e,R as J,b as re,y as K,W as Y,Y as oe,a as le}from"./app-BdOlReHc.js";import{r as t}from"./index-D-Ll7bUc.js";import{_ as ee,A as ae,C as ie}from"./AuthenticatedLayout-CI8StupR.js";import{M as de,D as ce,T as ue,S as xe,R as he,E as fe,C as me,P as je}from"./RestoreTable-B2DTjDjy.js";import{T as se}from"./TextInput-CJsx93Sa.js";import{U as ye}from"./UploadItemField-C03b2m7Y.js";import{I as E}from"./InputLabel-f6OJzfcH.js";import{I as F}from"./InputError-Cjj1Dmq4.js";import"./transition-Di5Gmdpv.js";import"./format-BaCGhcH6.js";function ve({mappingDialog:n,setMappingDialog:i,mappingData:s,setBatchId:h}){var B,T,z,P,R,H,$,A,L,W,U,M,q;const a=()=>i(!n),[x,f]=v.useState({file_path:s?s==null?void 0:s.filePath:"",site_name:"",cell_name:"",lon:"",lat:"",bb_type:"",rru_type:"",antenna_type:"",frequency:"",pci:"",azimuth:"",height:"",last_epo:"",next_epo:""}),[d,C]=v.useState({}),[p,w]=v.useState(!1),[_,S]=v.useState(""),[k,b]=v.useState(""),m=(r,y)=>{f(V=>({...V,[r]:y}))};v.useEffect(()=>{m("file_path",s!=null&&s.filePath?s==null?void 0:s.filePath:"")},[s]);const j=async r=>{var V,G,X,Z,D,Q;r.preventDefault();let y={};if(["site_name","cell_name","lon","lat","bb_type","rru_type","antenna_type","frequency","pci","azimuth","height","last_epo","next_epo"].forEach(l=>{x[l]||(y[l]="This field is required.")}),C(y),Object.keys(y).length>0){console.log(y);return}try{w(!0);const l=await re.post(route("site.field.map.save"),x);l!=null&&l.data&&(b((G=(V=l==null?void 0:l.data)==null?void 0:V.success)==null?void 0:G.message),h((X=l==null?void 0:l.data)==null?void 0:X.batch_id),setTimeout(()=>{i(!1),b(""),S("")},3e3),K.visit(route("site.field.name.index")))}catch(l){console.log("error:",l),S(`${(Q=(D=(Z=l==null?void 0:l.response)==null?void 0:Z.data)==null?void 0:D.error)==null?void 0:Q.message}`)}finally{w(!1)}};return e.jsx(J.Fragment,{children:e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"CSV Mapping"}),_&&e.jsx("p",{className:"text-red-500 font-medium text-[12px] px-4",children:_}),k&&e.jsx("p",{className:"text-green-500 font-medium text-[12px] px-4",children:k}),e.jsxs(t.DialogBody,{className:"px-6 overflow-scroll",children:[e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Site Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.site_name,onChange:r=>m("site_name",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((B=s==null?void 0:s.header)==null?void 0:B.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.site_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Cell Name",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.cell_name,onChange:r=>m("cell_name",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((T=s==null?void 0:s.header)==null?void 0:T.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.cell_name,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Lon",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.lon,onChange:r=>m("lon",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((z=s==null?void 0:s.header)==null?void 0:z.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.lon,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Lat",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.lat,onChange:r=>m("lat",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((P=s==null?void 0:s.header)==null?void 0:P.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.lat,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"BB Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.bb_type,onChange:r=>m("bb_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((R=s==null?void 0:s.header)==null?void 0:R.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.bb_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"RRU Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.rru_type,onChange:r=>m("rru_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((H=s==null?void 0:s.header)==null?void 0:H.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.rru_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Antenna Type",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.antenna_type,onChange:r=>m("antenna_type",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(($=s==null?void 0:s.header)==null?void 0:$.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.antenna_type,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Frequency",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.frequency,onChange:r=>m("frequency",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((A=s==null?void 0:s.header)==null?void 0:A.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.frequency,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"PCI",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.pci,onChange:r=>m("pci",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((L=s==null?void 0:s.header)==null?void 0:L.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.pci,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Azimuth",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.azimuth,onChange:r=>m("azimuth",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((W=s==null?void 0:s.header)==null?void 0:W.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.azimuth,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Height",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.height,onChange:r=>m("height",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((U=s==null?void 0:s.header)==null?void 0:U.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.height,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Last EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.last_epo,onChange:r=>m("last_epo",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((M=s==null?void 0:s.header)==null?void 0:M.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.last_epo,className:"!text-[12px] font-medium"})]})]})}),e.jsx("div",{className:"form-item mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{value:"Next EPO",className:"w-1/3"}),e.jsxs("div",{className:"w-full",children:[e.jsxs("select",{className:"w-full font-medium text-[12px] py-1 rounded-md border-gray-300",value:x.next_epo,onChange:r=>m("next_epo",r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),((q=s==null?void 0:s.header)==null?void 0:q.length)>0&&(s==null?void 0:s.header.map((r,y)=>e.jsx("option",{value:r,children:r},y)))]}),e.jsx(F,{message:d.next_epo,className:"!text-[12px] font-medium"})]})]})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:a,className:"mr-1",disabled:p,children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:j,loading:p,children:e.jsx("span",{children:"Confirm"})})]})]})})}function pe({site_id:n,changedItems:i,setChangedItems:s}){const[h,a]=v.useState(!1),x=async f=>{var d,C,p;if(i.length>0){let w=i.filter(_=>_.site_id===f)[0];if(w){a(!0);const _=await axios.post(route("site.field.name.save.item"),{site_id:w==null?void 0:w.site_id,items:w==null?void 0:w.items});(d=_==null?void 0:_.data)!=null&&d.success&&(a(!1),ee.success((p=(C=_==null?void 0:_.data)==null?void 0:C.success)==null?void 0:p.message),s(S=>S.filter(k=>k.site_id!==f)))}}};return e.jsx(t.Button,{size:"sm",className:"capitalize py-1 px-2 rounded font-semibold",disabled:!i.some(f=>f.site_id===n),onClick:()=>{x(n)},loading:h,children:"Save"})}function be({addColumnDialog:n,setAddColumnDialog:i}){const{data:s,setData:h,post:a,processing:x,errors:f,reset:d}=Y({type:"fw_site",name:"",key:"",input_type:"",options:""}),C=p=>{p.preventDefault(),a(route("additional.columns.save.item"),{onSuccess:()=>{i(!1),d()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Add New Column"}),e.jsxs(t.DialogBody,{children:[e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Name",className:"mb-1"}),e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column Name...",value:s.name,onChange:p=>h("name",p.target.value)}),e.jsx(F,{message:f.name,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Key",className:"mb-1"}),e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",placeholder:"Column key...",value:s.key,onChange:p=>h("key",p.target.value)}),e.jsx(F,{message:f.key,className:"text-sm font-medium"})]}),e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Column Input Type",className:"mb-1"}),e.jsxs("select",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-medium text-gray-600 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",value:s.input_type,onChange:p=>h("input_type",p.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"date",children:"Date"}),e.jsx("option",{value:"dropdown",children:"DropDown"})]}),e.jsx(F,{message:f.input_type,className:"text-sm font-medium"})]}),(s==null?void 0:s.input_type)==="dropdown"&&e.jsxs("div",{className:"form-item mb-4",children:[e.jsx(E,{value:"Dropdown Options seprated by (|)",className:"mb-1"}),e.jsx("textarea",{className:"w-full rounded text-sm border-gray-300 shadow-sm font-normal focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600",placeholder:"Dropdown Options seprated by | ...",rows:4,value:s.options,onChange:p=>h("options",p.target.value)}),e.jsx(F,{message:f.options,className:"text-sm font-medium"})]})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:()=>i(!n),className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:p=>C(p),className:"capitalize",loading:x,children:e.jsx("span",{children:"Submit"})})]})]})}function Ne({hideColumnDialog:n,setHideColumnDialog:i,columns:s,hidden_columns:h,deleted_columns:a}){const x=()=>i(!n),[f,d]=v.useState([]),{data:C,setData:p,post:w,processing:_,errors:S,reset:k}=Y({type:"fw_site",key:"hide",items:(h==null?void 0:h.length)>0?h:[]});v.useEffect(()=>{n&&d(j=>[...s.filter(T=>!a.includes(T.key)).map(T=>({key:T.key,name:T.name}))])},[n]);const b=(j,B)=>{const T=j.target.checked;p(z=>T?{...z,items:[...z.items,B]}:{...z,items:z.items.filter(P=>P!==B)})},m=j=>{j.preventDefault(),w(route("hide.columns.item"),{onSuccess:()=>{i(!1),k()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Hide Column"}),e.jsx(t.DialogBody,{children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to hide"}),e.jsx("div",{className:"form-item grid grid-cols-2",children:(f==null?void 0:f.length)>0&&f.map((j,B)=>e.jsx(J.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:j==null?void 0:j.name}),onChange:T=>b(T,j==null?void 0:j.key),defaultChecked:h==null?void 0:h.includes(j==null?void 0:j.key)})},B))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",onClick:x,className:"mr-1 capitalize",children:e.jsx("span",{children:"Cancel"})}),e.jsx(t.Button,{variant:"gradient",color:"green",onClick:j=>{m(j)},className:"capitalize",children:e.jsx("span",{children:"Confirm"})})]})]})}function ge({renameColumnDialog:n,setRenameColumnDialog:i,columns:s,deleted_columns:h}){var S;const{data:a,setData:x,post:f,processing:d,errors:C,reset:p}=Y({type:"fw_site",key:"rename",items:[]});v.useEffect(()=>{n&&x(k=>{const b=[...s.filter(m=>!h.includes(m.key)).map(m=>({key:m.key,name:m.name}))];return{...k,items:b}})},[n]);const w=(k,b)=>{x(m=>({...m,items:m.items.map(j=>j.key===k?{...j,name:b}:j)}))},_=k=>{k.preventDefault(),f(route("rename.columns.item"),{onSuccess:()=>{i(!1),p()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Rename Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:(a==null?void 0:a.items.length)>0&&((S=a==null?void 0:a.items)==null?void 0:S.map((k,b)=>e.jsx("div",{className:"form-item mb-2",children:e.jsx(se,{className:"w-full text-sm font-medium text-gray-600",value:k==null?void 0:k.name,onChange:m=>w(k==null?void 0:k.key,m.target.value)})},b)))})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>i(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:k=>_(k),loading:d,children:"Submit"})]})]})}function ke({deleteColumnDialog:n,setDeleteColumnDialog:i,columns:s,deleted_columns:h}){const{data:a,setData:x,post:f,processing:d,errors:C,reset:p}=Y({type:"fw_site",key:"delete",items:[]}),[w,_]=v.useState([]);v.useEffect(()=>{n&&_(b=>[...s.filter(j=>!h.includes(j.key)).map(j=>({key:j.key,name:j.name}))])},[n]);const S=(b,m)=>{const j=b.target.checked;x(B=>j?{...B,items:[...B.items,m]}:{...B,items:B.items.filter(T=>T!==m)})},k=b=>{b.preventDefault(),f(route("delete.columns.item"),{onSuccess:()=>{i(!1),p()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Delete Columns"}),e.jsx(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:e.jsxs("div",{className:"form-item",children:[e.jsx("p",{className:"text-[#333] font-semibold",children:"Please select the column you want to delete."}),e.jsx("div",{className:"grid grid-cols-2",children:(w==null?void 0:w.length)>0&&w.map((b,m)=>e.jsx(J.Fragment,{children:e.jsx(t.Checkbox,{containerProps:{className:"py-3"},className:"w-5 h-5 rounded-md",label:e.jsx(t.Typography,{color:"blue-gray",className:"font-medium text-sm",children:b==null?void 0:b.name}),onChange:j=>{S(j,b==null?void 0:b.key)}})},m))})]})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>i(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:b=>{k(b)},loading:d,children:"Submit"})]})]})}function we({arrangeColumnDialog:n,setArrangeColumnDialog:i,columns:s,deleted_columns:h}){const[a,x]=v.useState([]),[f,d]=v.useState(null),{data:C,setData:p,post:w,processing:_,errors:S,reset:k}=Y({type:"fw_site",key:"arrange",items:[]});v.useEffect(()=>{n&&x(z=>[...(H=>H.map(($,A)=>({...$,position:A+1})))(s.filter(H=>!h.includes(H.key)).map(H=>({key:H.key,name:H.name})))])},[n]);const b=(z,P)=>{d(P)},m=()=>{d(null)},j=z=>{z.preventDefault()},B=(z,P)=>{if(!f)return;const R=a.indexOf(f),H=a.indexOf(P);if(R!==-1&&H!==-1){const A=[...(M=>M.map((q,r)=>({...q,position:r+1})))(a)],[L]=A.splice(R,1);A.splice(H,0,L);const W=A.map((M,q)=>({...M,position:q+1}));x(W);const U=W.map(M=>({key:M.key,position:M.position}));p("items",U)}},T=z=>{z.preventDefault(),w(route("rearrange.columns.item"),{onSuccess:()=>{i(!1),k()}})};return e.jsxs(t.Dialog,{open:n,size:"xs",children:[e.jsx(t.DialogHeader,{children:"Re-arrange Columns"}),e.jsxs(t.DialogBody,{className:"max-h-[42rem] overflow-scroll",children:[e.jsx("p",{className:"text-[#333] font-semibold mb-3",children:"Please drag and drop the column you want to arrange."}),e.jsx("div",{className:"draggable-wrapper border rounded-md py-2",children:(a==null?void 0:a.length)>0&&(a==null?void 0:a.map((z,P)=>e.jsx("div",{className:"text-gray-600 font-medium py-1 px-2 text-sm  cursor-move",draggable:"true",onDragStart:R=>b(R,z),onDragEnd:m,onDragOver:j,onDrop:R=>B(R,z),children:e.jsxs("div",{className:"flex items-center gap-3 border py-2 px-2 rounded-md ",children:[e.jsx("div",{className:"icon-wrapper",children:e.jsx(de,{strokeWidth:1.5,size:18})}),z.name]})},P)))})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{variant:"text",color:"red",className:"mr-1 capitalize",onClick:()=>i(!1),children:"cancel"}),e.jsx(t.Button,{variant:"gradient",color:"green",className:"capitalize",onClick:z=>T(z),loading:_,children:"Submit"})]})]})}function Ce({columns:n,hidden_columns:i,deleted_columns:s}){const[h,a]=v.useState(!1),[x,f]=v.useState(!1),[d,C]=v.useState(!1),[p,w]=v.useState(!1),[_,S]=v.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(t.Menu,{children:[e.jsx(t.MenuHandler,{children:e.jsx(t.Button,{variant:"gradient",size:"sm",className:"capitalize",children:"Column Options"})}),e.jsxs(t.MenuList,{className:"font-semibold text-gray-600",children:[e.jsx(t.MenuItem,{onClick:()=>{a(!0)},children:"Add Column"}),e.jsx(t.MenuItem,{onClick:()=>{f(!0)},children:"Show/Hide Columns"}),e.jsx(t.MenuItem,{onClick:()=>{C(!0)},children:"Rename Columns"}),e.jsx(t.MenuItem,{onClick:()=>{S(!0)},children:"Rearrange Columns"}),e.jsx(t.MenuItem,{onClick:()=>{w(!0)},className:"text-red-500",children:"Delete Columns"})]})]}),e.jsx(be,{addColumnDialog:h,setAddColumnDialog:a}),e.jsx(Ne,{hideColumnDialog:x,setHideColumnDialog:f,columns:n,hidden_columns:i,deleted_columns:s}),e.jsx(ge,{renameColumnDialog:d,setRenameColumnDialog:C,columns:n,deleted_columns:s}),e.jsx(ke,{deleteColumnDialog:p,setDeleteColumnDialog:w,columns:n,deleted_columns:s}),e.jsx(we,{arrangeColumnDialog:_,setArrangeColumnDialog:S,columns:n,deleted_columns:s})]})}function Se({siteId:n,name:i,value:s,handleEditAbleItem:h}){const[a,x]=v.useState(s||""),f=d=>{x(d),h(n,i,d)};return e.jsx("div",{className:"w-full h-full",children:e.jsx("textarea",{className:"border-none focus:ring-0 bg-transparent !shadow-none text-[12px] font-medium w-full",value:a,rows:1,onChange:d=>{f(d.target.value)}})})}function _e({siteId:n,name:i,value:s,handleEditAbleItem:h}){const[a,x]=v.useState(s||""),f=d=>{x(d),h(n,i,d)};return e.jsx("div",{className:"w-full h-full",children:e.jsx(ce,{selected:a,onChange:d=>f(d),className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",dateFormat:"dd/MM/yyyy"})})}function ze({siteId:n,name:i,value:s,options:h,handleEditAbleItem:a}){const[x,f]=v.useState(s||""),d=C=>{f(C),a(n,i,C)};return e.jsx("div",{className:"w-full h-full",children:e.jsxs("select",{value:x,onChange:C=>{d(C.target.value)},className:"border-none focus:ring-0 w-full bg-transparent !shadow-none text-[12px] font-medium",children:[e.jsx("option",{value:"",children:"Select"}),h.length>0&&h.map((C,p)=>e.jsx("option",{value:C.value,children:C.label},p))]})})}const Pe={text:Se,date:_e,dropdown:ze};function Te({item:n,site:i,handleEditAbleItem:s}){const h=Pe[n.input_type],a={status:[{label:"In Progress",value:"in_progress"},{label:"Not Started",value:"not_started"},{label:"Completed",value:"completed"}],solution_type:[{label:"Opti Type-1",value:"opti_type_1"},{label:"Opti Type-5",value:"opti_type_5"},{label:"Opti Type-6",value:"opti_type_6"}]};return e.jsx(h,{siteId:i==null?void 0:i.id,name:n.key,value:n.value,handleEditAbleItem:s,options:a[n.key]})}function Ie({site_id:n}){const{processing:i,delete:s}=Y(),[h,a]=v.useState(!1),x={onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},f=()=>{s(route("site.field.name.destroy",n),{preserveScroll:!0,onSuccess:()=>{K.visit(route("site.field.name.index"))}})};return e.jsx(J.Fragment,{children:e.jsxs(t.Popover,{placement:"top-end",open:h,handler:a,children:[e.jsx(t.PopoverHandler,{...x,children:e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize py-1 px-2 rounded",onClick:()=>setOpen(!0),children:e.jsx(ue,{size:14})})}),e.jsxs(t.PopoverContent,{...x,className:"px-3",children:[e.jsx(t.Typography,{variant:"h6",className:"text-center",children:"Are you sure?"}),e.jsx(t.Typography,{variant:"small",className:"font-normal",children:"This cannot be reverted back."}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx(t.Button,{variant:"text",color:"red",size:"sm",className:"capitalize rounded",onClick:()=>a(!1),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"red",size:"sm",className:"capitalize rounded",onClick:f,children:"Delete"})]})]})]})})}function $e({auth:n,sites:i,get_data:s,batch:h,additional_columns:a,hidden_columns:x,renamed_columns:f,deleted_columns:d,arrange_columns:C}){var Q;const{role:p}=n,w=[{name:"Site Name",sortable:!0,key:"site_name",position:1,editable:!1},{name:"Cell Name",sortable:!0,key:"cell_name",position:2,editable:!1},{name:"Lon",sortable:!0,key:"lon",position:3,editable:!1},{name:"Lat",sortable:!0,key:"lat",position:4,editable:!1},{name:"BB Type",sortable:!0,key:"bb_type",position:5,editable:!1},{name:"RRU Type",sortable:!0,key:"rru_type",position:6,editable:!1},{name:"Antenna Type",sortable:!0,key:"antenna_type",position:7,editable:!1},{name:"Frequency",sortable:!0,key:"frequency",position:8,editable:!1},{name:"PCI",sortable:!1,key:"pci",position:9,editable:!1},{name:"Azimuth",sortable:!1,key:"azimuth",position:10,editable:!1},{name:"Height",sortable:!1,key:"height",position:11,editable:!1},{name:"Last EPO",sortable:!1,key:"last_epo",position:12,editable:!1},{name:"Next EPO",sortable:!1,key:"next_epo",position:13,editable:!1},{name:"Solution Type",sortable:!1,key:"solution_type",position:14,editable:!0,input_type:"dropdown"},{name:"Start Date",sortable:!1,key:"start_date",position:15,editable:!0,input_type:"date"},{name:"End Date",sortable:!1,key:"end_date",position:16,editable:!0,input_type:"date"},{name:"Status",sortable:!1,key:"status",position:17,editable:!0,input_type:"dropdown"},{name:"Remarks",sortable:!1,key:"remarks",position:18,editable:!0,input_type:"text"},{name:"Artifacts",sortable:!1,key:"artifacts",position:19,editable:!0,input_type:"upload"}];function _(l,g){return l==null?g:g==null?l:[...new Set([...l,...g])]}const S=_(x,d);function k(){const l=[...w],g=a==null?void 0:a.map(u=>({...u,editable:!0})),o=(u,N)=>u.position!==void 0&&N.position!==void 0?u.position-N.position:u.position!==void 0?-1:N.position!==void 0?1:0;return f&&(l.forEach(u=>{const N=f.find(O=>O.key===u.key);N&&(u.name=N.name)}),g.forEach(u=>{const N=f.find(O=>O.key===u.key);N&&(u.name=N.name)})),S&&(l.forEach(u=>{S.find(O=>O===u.key)&&(u.hidden=!0)}),g.forEach(u=>{S.find(O=>O===u.key)&&(u.hidden=!0)})),C&&(l.forEach(u=>{const N=C.find(O=>O.key===u.key);N&&(u.position=N.position)}),g.forEach(u=>{const N=C.find(O=>O.key===u.key);N&&(u.position=N.position)})),[...l,...g].sort(o)}const b=k(),m=v.useRef(null),[j,B]=v.useState(s!=null&&s.search?s==null?void 0:s.search:""),[T,z]=v.useState(s!=null&&s.per_page?s==null?void 0:s.per_page:10),[P]=v.useState(i),[R,H]=v.useState(!1),[$,A]=v.useState(""),[L,W]=v.useState(null),[U,M]=v.useState([]),q=l=>{m.current.click()},r=async l=>{var o,c,I;const g=new FormData;g.append("import_file",l.target.files[0]);try{const u=await re.post(route("site.field.name.import"),g);u!=null&&u.data&&(A(u==null?void 0:u.data),H(!0))}catch(u){ee.error(`${(I=(c=(o=u==null?void 0:u.response)==null?void 0:o.data)==null?void 0:c.error)==null?void 0:I.message}`)}},y=async()=>{j&&K.get(route("site.field.name.index",{search:j}))},V=async(l,g)=>{K.get(route("site.field.name.index",{order_by:l,order:g}))},G=async(l,g)=>{K.get(route("site.field.name.index",{filter_by:l,value:g}))},X=l=>{z(l),K.get(route("site.field.name.index",{...s,per_page:l}))};v.useEffect(()=>{h!=null&&h.batch_field_id&&W(h==null?void 0:h.batch_field_id)},[]),v.useEffect(()=>{const l=async()=>{var o,c,I;try{let u=0;const N=await re.get(route("import.progress",{batchId:L}));if(N!=null&&N.data){let O=parseInt((o=N==null?void 0:N.data)==null?void 0:o.total_jobs),te=parseInt((c=N==null?void 0:N.data)==null?void 0:c.pending_jobs),ne=O-te;parseInt((I=N==null?void 0:N.data)==null?void 0:I.failed_jobs)>0?clearInterval(g):(u=parseInt(ne/O*100).toFixed(0),u<100?ee.loading(`CSV Data Import Progress: ${u}%.
 Please wait....`,{id:"loading-toast",style:{backgroundColor:"#424242",color:"#ffffff",fontSize:14,borderRadius:4,fontWeight:"bold"}}):(ee.dismiss("loading-toast"),clearInterval(g)))}}catch(u){console.log(u)}},g=setInterval(()=>{L&&l()},5e3);return()=>clearInterval(g)},[L]);const Z=(l,g,o)=>{const c=U.findIndex(I=>I.site_id===l);M(c!==-1?I=>{const u=[...I];return u[c]={...u[c],items:{...u[c].items,[g]:o}},u}:I=>[...I,{site_id:l,items:{[g]:o}}])},D=l=>{let g=[];return b.forEach(o=>{const c=o.key,I=l[c];I!==void 0?o!=null&&o.position?g[o.position-1]={key:c,value:I,editable:o==null?void 0:o.editable,input_type:o!=null&&o.input_type?o==null?void 0:o.input_type:""}:g.push({key:c,value:I,editable:o==null?void 0:o.editable,input_type:o!=null&&o.input_type?o==null?void 0:o.input_type:""}):g.push({key:c,value:"",editable:o==null?void 0:o.editable,input_type:o!=null&&o.input_type?o==null?void 0:o.input_type:""})}),g};return e.jsxs(ae,{user:n==null?void 0:n.user,children:[e.jsx(oe,{title:"FW Sites"}),e.jsx("div",{className:"top-section p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"",children:[e.jsx(t.Typography,{variant:"h3",className:"tracking-tight",children:"FW Site"}),e.jsxs("ul",{className:"flex gap-1 text-gray-600 text-sm",children:[e.jsx("li",{children:e.jsx(le,{href:route("dashboard"),children:"Dashboard"})}),e.jsx("li",{children:"/"}),e.jsx("li",{children:e.jsx(le,{href:route("site.field.name.index"),children:"FW Site"})})]})]})})}),e.jsx("div",{className:"filter-wrapper md:px-4",children:e.jsxs("div",{className:"flex filter-details justify-end gap-1",children:[e.jsxs("div",{className:"search-wrapper w-1/5 flex relative",children:[e.jsx(se,{placeholder:"Search...",className:"w-full text-sm rounded-md rounded-r-none border-r-0 focus:ring-0 h-8",value:j,onChange:l=>B(l.target.value)}),e.jsx("div",{className:"search-icon",children:e.jsx(t.IconButton,{size:"sm",className:"rounded-l-none",onClick:y,children:e.jsx(xe,{color:"white",size:18})})})]}),e.jsx("div",{className:"status-filter",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>G("status",l.target.value),value:(s==null?void 0:s.filter_by)==="status"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Status"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{className:"filter-solution-type",children:e.jsxs("select",{className:"w-52 text-sm rounded-md focus:ring-0 h-8 border-gray-300 py-1 text-gray-600 font-medium",onChange:l=>G("solution_type",l.target.value),value:(s==null?void 0:s.filter_by)==="solution_type"?s==null?void 0:s.value:"",children:[e.jsx("option",{value:"",children:"Filter by Solution Type"}),e.jsx("option",{value:"opti_type_1",children:"Opti Type-1"}),e.jsx("option",{value:"opti_type_5",children:"Opti Type-5"}),e.jsx("option",{value:"opti_type_6",children:"Opti Type-6"})]})}),p==="super-admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"import-type-field",children:[e.jsx(t.Button,{variant:"gradient",className:"capitalize",size:"sm",onClick:q,children:"Import from CSV"}),e.jsx("input",{type:"file",onChange:r,ref:m,style:{display:"none"}})]}),e.jsx(Ce,{columns:b,hidden_columns:x,deleted_columns:d||[]}),e.jsx(he,{type:"fw_site"})]}),e.jsx(fe,{route_name:"site.field.name.export",file_name:"FW Sites_Export"})]})}),e.jsxs("div",{className:"content mt-6",children:[e.jsx(t.Card,{className:"h-full w-full rounded-none",children:e.jsxs("div",{className:"overflow-x-auto overflow-hidden",children:[e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[b.map(l=>e.jsx("th",{className:`border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer ${S!=null&&S.includes(l==null?void 0:l.key)?"hidden":""}`,children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t.Typography,{variant:"small",className:"leading-none text-gray-800 font-medium text-sm",children:l.name}),(l==null?void 0:l.sortable)&&e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute -top-2 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(me,{size:12,strokeWidth:2,onClick:()=>{V(l.key,"asc")}})}),e.jsx("span",{className:"absolute -bottom-1 right-0 hover:bg-blue-gray-100 rounded-sm",children:e.jsx(ie,{size:12,strokeWidth:2,onClick:()=>{V(l.key,"desc")}})})]})]})},l.name)),e.jsx("th",{className:"border-y border-blue-gray-100 bg-blue-gray-50/50 p-2 border-l cursor-pointer"})]})}),e.jsx("tbody",{children:P==null?void 0:P.data.map((l,g)=>{const o=D(l);return e.jsxs("tr",{className:"even:bg-blue-gray-50/50",children:[o==null?void 0:o.map((c,I)=>e.jsx(J.Fragment,{children:e.jsx("td",{className:`border-l h-10 text-[12px] font-medium ps-2 ${S!=null&&S.includes(c==null?void 0:c.key)?"hidden":""}`,children:(c==null?void 0:c.key)==="loc_id"?e.jsx(le,{href:route("wireless.show.location.index",c==null?void 0:c.value),className:"font-semibold underline",children:c==null?void 0:c.value}):e.jsx(J.Fragment,{children:c!=null&&c.editable?e.jsxs(J.Fragment,{children:[(c==null?void 0:c.input_type)!=="upload"&&e.jsx(Te,{item:c,site:l,handleEditAbleItem:Z}),(c==null?void 0:c.input_type)==="upload"&&e.jsx(ye,{value:c==null?void 0:c.value,siteId:l==null?void 0:l.id,name:"artifacts"})]}):c==null?void 0:c.value})})},I)),e.jsx("td",{className:"border-l h-10 px-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(pe,{site_id:l==null?void 0:l.id,changedItems:U,setChangedItems:M}),e.jsx(Ie,{site_id:l==null?void 0:l.id})]})})]},l==null?void 0:l.id)})})]}),((Q=P==null?void 0:P.data)==null?void 0:Q.length)===0&&e.jsx(t.Typography,{variant:"h6",color:"blue-gray",className:"text-center py-6",children:"No data found"}),e.jsxs("div",{className:"md:flex grid justify-start md:justify-end items-center pt-6 mb-8 gap-3 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"Rows per Page"}),e.jsxs("select",{className:"rounded-md text-sm font-medium border-gray-400 focus:ring-0 py-2",value:T,onChange:l=>{X(l.target.value)},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"20",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsx("div",{className:"text-sm font-medium",children:`${i==null?void 0:i.from}-${i==null?void 0:i.to} of ${i==null?void 0:i.total} Records`}),e.jsx(je,{links:P==null?void 0:P.links,perPage:T})]})]})}),e.jsx(ve,{mappingDialog:R,setMappingDialog:H,mappingData:$,setBatchId:W})]})]})}export{$e as default};
